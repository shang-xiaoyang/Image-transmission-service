{"version":3,"file":"tos.esm.js","sources":["../src/TosServerError.ts","../src/TosClientError.ts","../src/CancelError.ts","../src/nodejs/fs-promises.ts","../src/log.ts","../src/utils.ts","../src/methods/object/multipart/createMultipartUpload.ts","../src/methods/object/multipart/listParts.ts","../src/mime-types.ts","../src/nodejs/EmitReadStream.ts","../src/nodejs/crc.node.ts","../src/universal/crc.ts","../src/nodejs/rate-limiter.ts","../src/universal/rate-limiter.ts","../src/nodejs/buffer2Stream.ts","../src/nodejs/CrcReadStream.ts","../src/methods/object/sharedTypes.ts","../src/methods/object/utils.ts","../src/interface.ts","../src/axios.ts","../src/universal/crypto.browser.ts","../src/nodejs/crypto.nodejs.ts","../src/universal/crypto.ts","../src/methods/object/multipart/uploadPart.ts","../src/methods/object/multipart/completeMultipartUpload.ts","../src/nodejs/EmptyReadStream.ts","../src/methods/object/multipart/uploadFile.ts","../src/TosExportEnum.ts","../src/methods/object/headObject.ts","../src/methods/object/multipart/uploadPartCopy.ts","../src/methods/object/copyObject.ts","../src/methods/object/multipart/resumableCopyObject.ts","../src/methods/object/getObject.ts","../src/methods/object/downloadFile.ts","../src/signatureV4.ts","../src/version.ts","../src/nodejs/TosAgent.ts","../src/methods/base.ts","../src/methods/object/listObjects.ts","../src/methods/object/listObjectsType2.ts","../src/ShareLinkClient.ts","../src/methods/bucket/base.ts","../src/methods/bucket/acl.ts","../src/methods/bucket/httpsConfig.ts","../src/methods/object/putObject.ts","../src/methods/object/fetch.ts","../src/methods/object/getPreSignedUrl.ts","../src/methods/object/doesObjectExist.ts","../src/methods/object/deleteObject.ts","../src/methods/object/renameObject.ts","../src/methods/object/deleteMultiObjects.ts","../src/methods/object/acl/index.ts","../src/methods/object/multipart/abortMultipartUpload.ts","../src/methods/object/multipart/listMultipartUploads.ts","../src/methods/object/appendObject.ts","../src/methods/object/setObjectMeta.ts","../src/methods/object/calculatePostSignature.ts","../src/handleEmptyServerError.ts","../src/methods/bucket/policy.ts","../src/methods/bucket/versioning.ts","../src/methods/object/preSignedPolicyURL.ts","../src/methods/bucket/getBucketLocation.ts","../src/methods/bucket/cors.ts","../src/methods/bucket/lifecycle.ts","../src/methods/bucket/encryption.ts","../src/methods/bucket/mirrorback.ts","../src/methods/object/tagging.ts","../src/methods/bucket/replication.ts","../src/methods/bucket/website.ts","../src/methods/bucket/notification.ts","../src/methods/bucket/customDomain.ts","../src/methods/bucket/realTimeLog.ts","../src/methods/bucket/inventory.ts","../src/methods/batch/index.ts","../src/methods/bucket/tag.ts","../src/methods/bucket/payByTraffic.ts","../src/methods/bucket/img.ts","../src/methods/bucket/intelligenttiering.ts","../src/methods/bucket/rename.ts","../src/methods/object/restoreObject.ts","../src/methods/storageLens/index.ts","../src/methods/bucket/notificationType2.ts","../src/methods/object/putSymlink.ts","../src/methods/object/getSymlink.ts","../src/methods/bucket/acceleration.ts","../src/methods/bucket/accessMonitor.ts","../src/methods/qosPolicy/index.ts","../src/methods/mrap/index.tsx","../src/methods/accesspoint/index.tsx","../src/methods/accelerator/index.tsx","../src/methods/mrap/mirror.tsx","../src/methods/bucket/media.ts","../src/methods/bucket/trash.ts","../src/methods/bucket/lock.ts","../src/methods/object/retention.ts","../src/methods/bucket/cdnNotification.ts","../src/methods/bucket/workflow.ts","../src/methods/fileCompress/index.ts","../src/methods/fileUncompress/index.ts","../src/methods/bucket/logging.ts","../src/methods/mrap/policy.tsx","../src/methods/bucket/audit.ts","../src/methods/bucket/listJob.ts","../src/methods/bucket/audioConvert.ts","../src/methods/object/getObjectAITag.ts","../src/methods/bucket/requestPayment.ts","../src/methods/utils.ts","../src/methods/datasetSearch/dataset.ts","../src/methods/datasetSearch/binding.ts","../src/methods/datasetSearch/query.ts","../src/methods/bucket/template.ts","../src/methods/bucket/templatesV2.ts","../src/methods/bucket/mediaJob.ts","../src/methods/datasetSearch/template.ts","../src/methods/bucket/dataRedundancy.ts","../src/methods/bucket/workflowV2.ts","../src/methods/apap/index.tsx","../src/InnerClient.ts","../src/vectors-methods/base.ts","../src/vectors-methods/vector-index.ts","../src/vectors-methods/vectors.ts","../src/TosVectorsClient.ts","../src/browser-index.ts"],"sourcesContent":["import { AxiosResponse } from 'axios';\nimport { Headers } from './interface';\n\nexport interface TosServerErrorData {\n  Code: string;\n  HostId: string;\n  Message: string;\n  RequestId: string;\n  EC?: string;\n}\n\nexport class TosServerError extends Error {\n  /**\n   * is original from backend, equals `data.Code`\n   */\n  public code: string;\n\n  /**\n   * the body when backend errors\n   */\n  public data: TosServerErrorData;\n  /**\n   * status code\n   */\n  public statusCode: number;\n  /**\n   * response headers\n   */\n  public headers: Headers;\n\n  /**\n   * identifies the errored request, equals to headers['x-tos-request-id'].\n   * If you has any question about the request, please send the requestId and id2 to TOS worker.\n   */\n  public requestId: string;\n\n  /**\n   * identifies the errored request, equals to headers['x-tos-id-2'].\n   * If you has any question about the request, please send the requestId and id2 to TOS worker.\n   */\n  public id2: string;\n\n  public ec?: string\n\n  constructor(response: AxiosResponse<TosServerErrorData>) {\n    const { data } = response;\n    super(data.Message);\n\n    // https://www.dannyguo.com/blog/how-to-fix-instanceof-not-working-for-custom-errors-in-typescript/\n    Object.setPrototypeOf(this, TosServerError.prototype);\n\n    this.data = data;\n    this.code = data.Code;\n    this.statusCode = response.status;\n    this.headers = response.headers;\n    this.requestId = response.headers['x-tos-request-id'] || response.data.RequestId;\n    this.id2 = response.headers['x-tos-id-2'];\n    this.ec = response.headers['x-tos-ec'] || response.data.EC;\n  }\n}\n\nexport default TosServerError;\n\nexport enum TosServerCode {\n  NoSuchBucket = 'NoSuchBucket',\n  NoSuchKey = 'NoSuchKey',\n  AccessDenied = 'AccessDenied',\n  MalformedAcl = 'MalformedAclError',\n  UnexpectedContent = 'UnexpectedContent',\n  InvalidRequest = 'InvalidRequest',\n  MissingSecurityHeader = 'MissingSecurityHeader',\n  InvalidArgument = 'InvalidArgument',\n  EntityTooSmall = 'EntityTooSmall',\n  InvalidBucketName = 'InvalidBucketName',\n  BucketNotEmpty = 'BucketNotEmpty',\n  TooManyBuckets = 'TooManyBuckets',\n  BucketAlreadyExists = 'BucketAlreadyExists',\n  MalformedBody = 'MalformedBody',\n  NoSuchLifecycleConfiguration = 'NoSuchLifecycleConfiguration',\n  ReplicationConfigurationNotFound = 'ReplicationConfigurationNotFoundError',\n  InvalidLocationConstraint = 'InvalidLocationConstraint',\n  AuthorizationQueryParametersError = 'AuthorizationQueryParametersError',\n  RequestTimeTooSkewed = 'RequestTimeTooSkewed',\n  SignatureDoesNotMatch = 'SignatureDoesNotMatch',\n  RequestedRangeNotSatisfiable = 'Requested Range Not Satisfiable',\n  PreconditionFailed = 'PreconditionFailed',\n  BadDigest = 'BadDigest',\n  InvalidDigest = 'InvalidDigest',\n  EntityTooLarge = 'EntityTooLarge',\n  UnImplemented = 'UnImplemented',\n  MethodNotAllowed = 'MethodNotAllowed',\n  InvalidAccessKeyId = 'InvalidAccessKeyId',\n  InvalidSecurityToken = 'InvalidSecurityToken',\n  ContentSHA256Mismatch = 'ContentSHA256Mismatch',\n  ExceedQPSLimit = 'ExceedQPSLimit',\n  ExceedRateLimit = 'ExceedRateLimit',\n  NoSuchCORSConfiguration = 'NoSuchCORSConfiguration',\n  NoSuchMirrorConfiguration = 'NoSuchMirrorConfiguration',\n  NoSuchWebsiteConfiguration = 'NoSuchWebsiteConfiguration',\n  MissingRequestBody = 'MissingRequestBodyError',\n  BucketAlreadyOwnedByYou = 'BucketAlreadyOwnedByYou',\n  NoSuchBucketPolicy = 'NoSuchBucketPolicy',\n  PolicyTooLarge = 'PolicyTooLarge',\n  MalformedPolicy = 'MalformedPolicy',\n  InvalidKey = 'InvalidKey',\n  MirrorFailed = 'MirrorFailed',\n  Timeout = 'Timeout',\n  OffsetNotMatched = 'OffsetNotMatched',\n  NotAppendable = 'NotAppendable',\n  ContextCanceled = 'ContextCanceled',\n  InternalError = 'InternalError',\n  TooManyRequests = 'TooManyRequests',\n  TimeOut = 'TimeOut',\n  ConcurrencyUpdateObjectLimit = 'ConcurrencyUpdateObjectLimit',\n  DuplicateUpload = 'DuplicateUpload',\n  DuplicateObject = 'DuplicateObject',\n  InvalidVersionId = 'InvalidVersionId',\n  StorageClassNotMatch = 'StorageClassNotMatch',\n  UploadStatusNotUploading = 'UploadStatusNotUploading',\n  PartSizeNotMatch = 'PartSizeNotMatch',\n  NoUploadPart = 'NoUploadPart',\n  PartsLenInvalid = 'PartsLenInvalid',\n  PartsIdxSmall = 'PartsIdxSmall',\n  PartSizeSmall = 'PartSizeSmall',\n  PrefixNotNextKeyPrefix = 'PrefixNotNextKeyPrefix',\n  InvalidPart = 'InvalidPart',\n  InvalidPartOffset = 'InvalidPartOffset',\n  MismatchObject = 'MismatchObject',\n  UploadStatusMismatch = 'UploadStatusMismatch',\n  CompletingStatusNoExpiration = 'CompletingStatusNoExpiration',\n  Found = 'Found',\n  InvalidRedirectLocation = 'InvalidRedirectLocation',\n}\n","export class TosClientError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    // https://www.dannyguo.com/blog/how-to-fix-instanceof-not-working-for-custom-errors-in-typescript/\n    Object.setPrototypeOf(this, TosClientError.prototype);\n  }\n}\n\nexport default TosClientError;\n","export class CancelError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    // https://www.dannyguo.com/blog/how-to-fix-instanceof-not-working-for-custom-errors-in-typescript/\n    Object.setPrototypeOf(this, CancelError.prototype);\n  }\n}\n","/**\n * since fs/promises exist after nodejs@14, so we make own fs/promises\n */\nimport fs from 'fs';\nimport fsPromises from 'fs/promises';\nimport { promisify } from 'util';\n\nexport const createWriteStream = fs.createWriteStream;\nexport const createReadStream = fs.createReadStream;\nexport const open = fsPromises.open;\nexport const close = promisify(fs.close);\nexport const rename = promisify(fs.rename);\nexport const stat = promisify(fs.stat);\nexport const mkdir = promisify(fs.mkdir);\nexport const writeFile = promisify(fs.writeFile);\nexport const write = promisify(fs.write);\nexport const appendFile = promisify(fs.appendFile);\n// fs.rm was added v14.14.0, so use fs.unlink\nexport const rm = promisify(fs.unlink);\nexport const readFile = promisify(fs.readFile);\n\nexport const safeMkdirRecursive = async (dirName: fs.PathLike) => {\n  try {\n    await fsPromises.access(dirName);\n  } catch (e) {\n    await fsPromises.mkdir(dirName, { recursive: true });\n  }\n};\n","import createDebug from 'debug';\n\nexport const TOS = createDebug('TOS');\n","import { Readable } from 'stream';\nimport {\n  CamelCasedPropertiesDeep,\n  KebabCasedPropertiesDeep,\n  PascalCasedPropertiesDeep,\n} from 'type-fest';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\nimport { CancelError } from './CancelError';\nimport TosClientError from './TosClientError';\nimport { Headers } from './interface';\nimport { TOSConstructorOptions, TosResponse } from './methods/base';\nimport qs from 'qs';\nimport TosServerError from './TosServerError';\nimport { CRCCls } from './universal/crc';\nimport * as fsp from './nodejs/fs-promises';\nimport { ReadStream, WriteStream } from 'fs';\nimport * as log from './log';\n\n// obj[key] must be a array\nexport const makeArrayProp = (obj: unknown) => (key: string) => {\n  if (obj == null || typeof obj !== 'object') {\n    return;\n  }\n\n  const value = get(obj, key);\n  if (!Array.isArray(value)) {\n    set(obj, key, value == null ? [] : [value]);\n  }\n};\n\nconst makeConvertProp = (convertMethod: (prop: string) => string) => {\n  const finalMethod = <T = unknown>(target: T): T => {\n    if (Array.isArray(target)) {\n      return target.map((it) => finalMethod(it)) as unknown as T;\n    }\n\n    if (typeof target === 'string') {\n      return convertMethod(target) as unknown as T;\n    }\n\n    if (typeof target === 'object' && target != null) {\n      type Obj = Record<string, unknown>;\n      const ret = Object.keys(target).reduce((acc: Obj, key: string) => {\n        const nextKey = finalMethod(key);\n        acc[nextKey] = (target as Obj)[key];\n        return acc;\n      }, {});\n      return ret as unknown as T;\n    }\n\n    return target;\n  };\n\n  return finalMethod;\n};\n\nexport const covertCamelCase2Kebab = makeConvertProp((camelCase: string) => {\n  return camelCase.replace(/[A-Z]/g, '-$&').toLowerCase();\n}) as <T = unknown>(target: T) => KebabCasedPropertiesDeep<T>;\n\nexport const convertUpperCamelCase2Normal = makeConvertProp(\n  (upperCamelCase: string) => {\n    return upperCamelCase[0].toLocaleLowerCase() + upperCamelCase.slice(1);\n  }\n) as <T = unknown>(target: T) => CamelCasedPropertiesDeep<T>;\n\nexport const convertNormalCamelCase2Upper = makeConvertProp(\n  (normalCamelCase: string) => {\n    return normalCamelCase[0].toUpperCase() + normalCamelCase.slice(1);\n  }\n) as <T = unknown>(target: T) => PascalCasedPropertiesDeep<T>;\n\nexport const getSortedQueryString = (query: Record<string, any>) => {\n  const searchParts: string[] = [];\n  Object.keys(query)\n    .sort()\n    .forEach((key) => {\n      searchParts.push(\n        `${encodeURIComponent(key)}=${encodeURIComponent(query[key])}`\n      );\n    });\n  return searchParts.join('&');\n};\n\nexport const normalizeHeadersKey = <T extends Headers>(\n  headers: T | undefined\n): T => {\n  const headers1: Headers = headers || {};\n  const headers2: Headers = {};\n  Object.keys(headers1).forEach((key: string) => {\n    if (headers1[key] != null) {\n      headers2[key] = headers1[key];\n    }\n  });\n\n  const headers3: Headers = {};\n  Object.keys(headers2).forEach((key: string) => {\n    const newKey = key.toLowerCase();\n    headers3[newKey] = headers2[key];\n  });\n\n  return headers3 as T;\n};\n\nexport const encodeHeadersValue = (headers: Headers) => {\n  const header2: Headers = {};\n  Object.entries(headers).forEach(([key, value]) => {\n    header2[key] = `${value}`\n      // reference:\n      //  https://stackoverflow.com/questions/38345372/why-is-length-2\n      .match(/./gu)!\n      .map((ch: string) => {\n        if (ch.length > 1 || ch.charCodeAt(0) >= 128) {\n          return encodeURIComponent(ch);\n        }\n        return ch;\n      })\n      .join('');\n  });\n  return header2;\n};\n\n// TODO: getRegion from endpoint, maybe user passes it is better.\nexport const getRegion = (endpoint: string) => {\n  const region = endpoint.match(/-(\\w+).volces.com/);\n  if (!region) {\n    return 'cn-beijing';\n  }\n  return `cn-${region[1]}`;\n};\n\nexport const getEndpoint = (region: string) => {\n  return `tos-${region}.volces.com`;\n};\n\nexport const normalizeProxy = (proxy: TOSConstructorOptions['proxy']) => {\n  if (typeof proxy === 'string') {\n    proxy = {\n      url: proxy,\n    };\n  }\n\n  if (\n    proxy &&\n    proxy?.needProxyParams == null &&\n    process.env.TARGET_ENVIRONMENT === 'browser'\n  ) {\n    proxy.needProxyParams = true;\n  }\n\n  return proxy;\n};\n\nexport async function safeAwait<T>(\n  p: T\n): Promise<[null, Awaited<T>] | [any, null]> {\n  try {\n    const v = await p;\n    return [null, v];\n  } catch (err) {\n    return [err, null];\n  }\n}\n\nexport function safeSync<T>(func: () => T): [any, null] | [null, T] {\n  try {\n    const ret = func();\n    return [null, ret];\n  } catch (err) {\n    return [err, null];\n  }\n}\n\nexport function isBlob(obj: unknown): obj is Blob {\n  return typeof Blob !== 'undefined' && obj instanceof Blob;\n}\n\nexport function isBuffer(obj: unknown): obj is Buffer {\n  return typeof Buffer !== 'undefined' && obj instanceof Buffer;\n}\n\nexport function isReadable(obj: unknown): obj is NodeJS.ReadableStream {\n  if (process.env.TARGET_ENVIRONMENT !== 'node') {\n    return false;\n  }\n\n  return obj instanceof Readable;\n}\n\nexport function isValidNumber(v: number): v is number {\n  return !!v || v == 0;\n}\n\nexport function obj2QueryStr(v?: Record<string, unknown>) {\n  if (!v) {\n    return '';\n  }\n  return Object.keys(v)\n    .map((key) => {\n      const vStr = `${v[key]}`;\n      return `${encodeURIComponent(key)}=${encodeURIComponent(vStr)}`;\n    })\n    .join('&');\n}\n\nexport function isCancelError(err: any) {\n  return err instanceof CancelError;\n}\n\nexport const DEFAULT_PART_SIZE = 20 * 1024 * 1024; // 20 MB\n\nexport const getGMTDateStr = (v: Date) => {\n  return v.toUTCString();\n};\nconst gmtDateOrStr = (v: Date | string) => {\n  if (typeof v === 'string') {\n    return v;\n  }\n  return v.toUTCString();\n};\n\nexport const requestHeadersMap: Record<\n  string,\n  string | [string, (v: any) => string] | ((v: any) => Record<string, string>)\n> = {\n  projectName: 'x-tos-project-name',\n  encodingType: 'encoding-type',\n  cacheControl: 'cache-control',\n  contentDisposition: 'content-disposition',\n  contentLength: 'content-length',\n  contentMD5: 'content-md5',\n  contentSHA256: 'x-tos-content-sha256',\n  contentEncoding: 'content-encoding',\n  contentLanguage: 'content-language',\n  contentType: 'content-type',\n  expires: ['expires', getGMTDateStr],\n  range: 'range',\n\n  ifMatch: 'if-match',\n  ifModifiedSince: ['if-modified-since', gmtDateOrStr],\n  ifNoneMatch: 'if-none-match',\n  ifUnmodifiedSince: ['if-unmodified-since', gmtDateOrStr],\n\n  acl: 'x-tos-acl',\n  grantFullControl: 'x-tos-grant-full-control',\n  grantRead: 'x-tos-grant-read',\n  grantReadAcp: 'x-tos-grant-read-acp',\n  grantWrite: 'x-tos-grant-write',\n  grantWriteAcp: 'x-tos-grant-write-acp',\n\n  serverSideEncryption: 'x-tos-server-side-encryption',\n  serverSideDataEncryption: 'x-tos-server-side-data-encryption',\n  ssecAlgorithm: 'x-tos-server-side-encryption-customer-algorithm',\n  ssecKey: 'x-tos-server-side-encryption-customer-key',\n  ssecKeyMD5: 'x-tos-server-side-encryption-customer-key-md5',\n\n  copySourceRange: 'x-tos-copy-source-range',\n  copySourceIfMatch: 'x-tos-copy-source-if-match',\n  copySourceIfModifiedSince: [\n    'x-tos-copy-source-if-modified-since',\n    gmtDateOrStr,\n  ],\n  copySourceIfNoneMatch: 'x-tos-copy-source-if-none-match',\n  copySourceIfUnmodifiedSince: 'x-tos-copy-source-if-unmodified-since',\n  copySourceSSECAlgorithm:\n    'x-tos-copy-source-server-side-encryption-customer-algorithm',\n  copySourceSSECKey: 'x-tos-copy-source-server-side-encryption-customer-key',\n  copySourceSSECKeyMD5:\n    'x-tos-copy-source-server-side-encryption-customer-key-MD5',\n\n  metadataDirective: 'x-tos-metadata-directive',\n  meta: (v: any) => {\n    return Object.keys(v).reduce((prev, key) => {\n      prev[`x-tos-meta-${key}`] = `${v[key]}`;\n      return prev;\n    }, {} as Record<string, string>);\n  },\n  websiteRedirectLocation: 'x-tos-website-redirect-location',\n  storageClass: 'x-tos-storage-class',\n  azRedundancy: 'x-tos-az-redundancy',\n  trafficLimit: 'x-tos-traffic-limit',\n  callback: 'x-tos-callback',\n  callbackVar: 'x-tos-callback-var',\n  allowSameActionOverlap: ['x-tos-allow-same-action-overlap', (v) => String(v)],\n  symLinkTargetKey: 'x-tos-symlink-target',\n  symLinkTargetBucket: 'x-tos-symlink-bucket',\n  forbidOverwrite: 'x-tos-forbid-overwrite',\n  bucketType: 'x-tos-bucket-type',\n  recursiveMkdir: 'x-tos-recursive-mkdir',\n  tagging: 'x-tos-tagging',\n};\n// type RequestHeadersMapKeys = keyof typeof requestHeadersMap;\n\nexport const requestQueryMap: Record<\n  string,\n  string | [string, (v: any) => string] | ((v: any) => Record<string, string>)\n> = {\n  versionId: 'versionId',\n  process: 'x-tos-process',\n  saveBucket: 'x-tos-save-bucket',\n  saveObject: 'x-tos-save-object',\n\n  responseCacheControl: 'response-cache-control',\n  responseContentDisposition: 'response-content-disposition',\n  responseContentEncoding: 'response-content-encoding',\n  responseContentLanguage: 'response-content-language',\n  responseContentType: 'response-content-type',\n  responseExpires: ['response-expires', (v: Date) => v.toUTCString()],\n};\n\nexport function fillRequestHeaders<T extends { headers?: Headers }>(\n  v: T,\n  // keys: (keyof T & RequestHeadersMapKeys)[]\n  keys: (keyof T & string)[]\n) {\n  if (!keys.length) {\n    return;\n  }\n\n  const headers = v.headers || {};\n  v.headers = headers;\n\n  function setOneHeader(k: string, v: string) {\n    if (headers[k] == null) {\n      headers[k] = v;\n    }\n  }\n\n  keys.forEach((k) => {\n    const confV = requestHeadersMap[k];\n    if (!confV) {\n      // maybe warning\n      throw new TosClientError(\n        `\\`${k}\\` isn't in keys of \\`requestHeadersMap\\``\n      );\n    }\n\n    const oriValue = v[k];\n    if (oriValue == null) {\n      return;\n    }\n\n    const oriValueStr = `${oriValue}`;\n    if (typeof confV === 'string') {\n      return setOneHeader(confV, oriValueStr);\n    }\n\n    if (Array.isArray(confV)) {\n      const newKey = confV[0];\n      const newValue = confV[1](oriValue);\n      return setOneHeader(newKey, newValue);\n    }\n\n    const obj = confV(oriValue);\n    Object.entries(obj).forEach(([k, v]) => {\n      setOneHeader(k, v);\n    });\n  });\n}\n\nexport function fillRequestQuery<T>(\n  v: T,\n  query: Record<string, unknown>,\n  keys: (keyof T & string)[]\n) {\n  if (!keys.length) {\n    return;\n  }\n\n  function setOneKey(k: string, v: string) {\n    if (query[k] == null) {\n      query[k] = v;\n    }\n  }\n\n  keys.forEach((k) => {\n    const confV = requestQueryMap[k];\n    if (!confV) {\n      // maybe warning\n      throw new TosClientError(`\\`${k}\\` isn't in keys of \\`requestQueryMap\\``);\n    }\n\n    const oriValue = v[k];\n    if (oriValue == null) {\n      return;\n    }\n\n    const oriValueStr = `${oriValue}`;\n    if (typeof confV === 'string') {\n      return setOneKey(confV, oriValueStr);\n    }\n\n    if (Array.isArray(confV)) {\n      const newKey = confV[0];\n      const newValue = confV[1](oriValue);\n      return setOneKey(newKey, newValue);\n    }\n\n    const obj = confV(oriValue);\n    Object.entries(obj).forEach(([k, v]) => {\n      setOneKey(k, v);\n    });\n  });\n}\n\nexport const paramsSerializer = (params: Record<string, string>) => {\n  return qs.stringify(params);\n};\n\nexport function getNormalDataFromError<T>(\n  data: T,\n  err: TosServerError\n): TosResponse<T> {\n  return {\n    data,\n    statusCode: err.statusCode,\n    headers: err.headers,\n    requestId: err.requestId,\n    id2: err.id2,\n  };\n}\nexport const streamToBuf = async (\n  stream: NodeJS.ReadableStream\n): Promise<Buffer> => {\n  let buf = Buffer.from([]);\n  return new Promise((resolve, reject) => {\n    stream.on('data', (data) => {\n      buf = Buffer.concat([buf, data]);\n    });\n    stream.on('end', () => {\n      resolve(buf);\n    });\n    stream.on('error', (err) => {\n      reject(err);\n    });\n  });\n};\n\nexport function checkCRC64WithHeaders(crc: CRCCls | string, headers: Headers) {\n  const serverCRC64 = headers['x-tos-hash-crc64ecma'];\n  if (serverCRC64 == null) {\n    if (process.env.TARGET_ENVIRONMENT === 'browser') {\n      console.warn(\n        \"No x-tos-hash-crc64ecma in response's headers, please see https://www.volcengine.com/docs/6349/127737 to add `x-tos-hash-crc64ecma` to Expose-Headers field.\"\n      );\n    } else {\n    }\n    return;\n  }\n\n  const crcStr = typeof crc === 'string' ? crc : crc.getCrc64();\n  if (crcStr !== serverCRC64) {\n    throw new TosClientError(\n      `validate file crc64 failed. Expect crc64 ${serverCRC64}, actual crc64 ${crcStr}. Please try again.`\n    );\n  }\n}\n\nexport const bindStreamErrorHandler = (\n  stream:\n    | NodeJS.ReadableStream\n    | ReadStream\n    | NodeJS.WritableStream\n    | WriteStream,\n  prefix?: string\n) =>\n  stream.on('error', (err: any) => {\n    log.TOS('bindStreamErrorHandler: ', `${prefix || ''} stream error:`, err);\n  });\n\nexport enum HttpHeader {\n  LastModified = 'last-modified',\n  ContentLength = 'content-length',\n  AcceptEncoding = 'accept-encoding',\n  ContentEncoding = 'content-encoding',\n  ContentMD5 = 'content-md5',\n  TosRawContentLength = 'x-tos-raw-content-length',\n  TosTrailer = 'x-tos-trailer',\n  TosHashCrc64ecma = 'x-tos-hash-crc64ecma',\n  TosContentSha256 = 'x-tos-content-sha256',\n  TosDecodedContentLength = 'x-tos-decoded-content-length',\n  TosEc = 'x-tos-ec',\n  TosRequestId = 'x-tos-request-id',\n}\n\n/**\n * make async tasks serial\n * @param makeTask\n * @returns\n */\nexport const makeSerialAsyncTask = (makeTask: () => Promise<void>) => {\n  let lastTask = Promise.resolve();\n  return async () => {\n    lastTask = lastTask.then(() => makeTask());\n    return lastTask;\n  };\n};\n\nexport const safeParseCheckpointFile = async (filePath: string) => {\n  try {\n    return JSON.parse(await fsp.readFile(filePath, 'utf-8'));\n  } catch (err) {\n    console.warn(\"checkpoint's content is not a valid JSON\");\n    return undefined;\n  }\n};\n\nexport const makeRetryStreamAutoClose = (\n  makeStream: () => NodeJS.ReadableStream | ReadStream\n) => {\n  let lastStream: ReadStream | NodeJS.ReadableStream | null = null;\n  const makeRetryStream = () => {\n    if (lastStream) {\n      bindStreamErrorHandler(lastStream, 'retry new stream');\n\n      tryDestroy(\n        lastStream,\n        new Error('retry new stream by makeRetryStreamAutoClose')\n      );\n    }\n\n    lastStream = makeStream();\n    return lastStream;\n  };\n\n  return {\n    getLastStream: () => lastStream,\n    make: makeRetryStream,\n  };\n};\n\nexport const tryDestroy = (\n  stream:\n    | NodeJS.ReadableStream\n    | ReadStream\n    | NodeJS.WritableStream\n    | WriteStream\n    | null\n    | undefined,\n  err: any\n) => {\n  if (stream && 'destroy' in stream && typeof stream.destroy === 'function') {\n    if ('destroyed' in stream && !stream.destroyed) {\n      stream.destroy(err);\n    }\n  }\n};\nexport const pipeStreamWithErrorHandle = <\n  Src extends NodeJS.ReadableStream | ReadStream,\n  Dest extends NodeJS.WritableStream | WriteStream\n>(\n  src: Src,\n  dest: Dest,\n  label: string\n): Dest => {\n  bindStreamErrorHandler(dest, label);\n  src.on('error', (err) => tryDestroy(dest, err));\n  dest.on('error', (err) => tryDestroy(src, err));\n  return src.pipe(dest) as Dest;\n};\n\nexport const isValidBucketName = (bucket: string, isCustomDomain?: boolean) => {\n  if (isCustomDomain) {\n    return;\n  }\n\n  if (bucket) {\n    if (bucket.length < 3 || bucket.length > 63) {\n      throw new TosClientError(\n        'invalid bucket name, the length must be [3, 63]'\n      );\n    }\n    if (!/^([a-z]|-|\\d)+$/.test(bucket)) {\n      throw new TosClientError(\n        'invalid bucket name, the character set is illegal'\n      );\n    }\n    if (/^-/.test(bucket) || /-$/.test(bucket)) {\n      throw new TosClientError(\n        `invalid bucket name, the bucket name can be neither starting with '-' nor ending with '-'`\n      );\n    }\n  }\n\n}\n\nexport const isValidVectorBucketName = (bucket: string) => {\n  if (bucket) {\n    if (bucket.length < 3 || bucket.length > 32) {\n      throw new TosClientError(\n        'invalid vector bucket name, the length must be [3, 32]'\n      );\n    }\n    if (!/^([a-z]|-|\\d)+$/.test(bucket)) {\n      throw new TosClientError(\n        'invalid vector bucket name, the character set is illegal'\n      );\n    }\n    if (/^-/.test(bucket) || /-$/.test(bucket)) {\n      throw new TosClientError(\n        `invalid vector bucket name, the vector bucket name can be neither starting with '-' nor ending with '-'`\n      );\n    }\n  }\n\n}\n\nexport const isValidAccountId = (accountId: string) => {\n  if (accountId === '') {\n    throw new TosClientError('invalid account id, the account id must be non-empty');\n  }\n  \n  if (!/^\\d+$/.test(accountId)) {\n    throw new TosClientError('invalid account id, the account id must be a number');\n  }\n};\n","import TOSBase from '../../base';\nimport { fillRequestHeaders, normalizeHeadersKey } from '../../../utils';\nimport { Acl } from '../../../interface';\nimport { StorageClassType } from '../../../TosExportEnum';\n\nexport interface CreateMultipartUploadInput {\n  bucket?: string;\n  key: string;\n\n  encodingType?: string;\n  cacheControl?: string;\n  contentDisposition?: string;\n  contentEncoding?: string;\n  contentLanguage?: string;\n  contentType?: string;\n  expires?: Date;\n\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWriteAcp?: string;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n\n  serverSideEncryption?: string;\n  /** @private unstable */\n  serverSideDataEncryption?: string;\n\n  meta?: Record<string, string>;\n  websiteRedirectLocation?: string;\n  storageClass?: StorageClassType;\n  forbidOverwrite?: boolean;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'encoding-type'?: string;\n    'Content-Disposition'?: string;\n    'x-tos-acl'?: Acl;\n    'content-type'?: string;\n    'x-tos-grant-full-control'?: string;\n    'x-tos-grant-read'?: string;\n    'x-tos-grant-read-acp'?: string;\n    'x-tos-grant-write-acp'?: string;\n    'x-tos-server-side-encryption-customer-algorithm'?: string;\n    'x-tos-server-side-encryption-customer-key'?: string;\n    'x-tos-server-side-encryption-customer-key-md5'?: string;\n    'x-tos-website-redirect-location'?: string;\n    'x-tos-storage-class'?: string;\n    'x-tos-server-side-encryption'?: string;\n    ['x-tos-forbid-overwrite']?: string;\n  };\n}\n\nexport interface CreateMultipartUploadOutput {\n  UploadId: string;\n  Bucket: string;\n  Key: string;\n  EncodingType?: string;\n}\n\nexport async function createMultipartUpload(\n  this: TOSBase,\n  input: CreateMultipartUploadInput | string\n) {\n  input = this.normalizeObjectInput(input);\n  const headers = normalizeHeadersKey(input.headers);\n  input.headers = headers;\n  fillRequestHeaders(input, [\n    'encodingType',\n    'cacheControl',\n    'contentDisposition',\n    'contentEncoding',\n    'contentLanguage',\n    'contentType',\n    'expires',\n\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWriteAcp',\n\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'serverSideEncryption',\n    'serverSideDataEncryption',\n\n    'meta',\n    'websiteRedirectLocation',\n    'storageClass',\n    'forbidOverwrite',\n  ]);\n\n  this.setObjectContentTypeHeader(input, headers);\n\n  return this._fetchObject<CreateMultipartUploadOutput>(\n    input,\n    'POST',\n    { uploads: '' },\n    headers,\n    ''\n  );\n}\n","import { covertCamelCase2Kebab, makeArrayProp } from '../../../utils';\nimport TOSBase from '../../base';\n\ninterface ListPartInput {\n  bucket?: string;\n  key: string;\n  uploadId: string;\n  maxParts?: number;\n  partNumberMarker?: number;\n  encodingType?: string;\n}\n\ninterface ListPartOutput {\n  Bucket: string;\n  Key: string;\n  UploadId: string;\n  PartNumberMarker: number;\n  NextPartNumberMarker: number;\n  MaxParts: number;\n  IsTruncated: boolean;\n  StorageClass: string;\n  Owner: { ID: string; DisplayName: string };\n  Parts: {\n    PartNumber: number;\n    LastModified: string;\n    ETag: string;\n    Size: number;\n  }[];\n}\n\n// the part except last one must be >= 5 MB\n// the last part is no size limit\nexport const MIN_PART_SIZE_EXCEPT_LAST_ONE = 5 * 1024 * 1024;\nexport const MAX_PART_NUMBER = 10000;\n\nexport const calculateSafePartSize = (\n  totalSize: number,\n  expectPartSize: number,\n  showWarning = false\n) => {\n  let partSize = expectPartSize;\n  if (expectPartSize < MIN_PART_SIZE_EXCEPT_LAST_ONE) {\n    partSize = MIN_PART_SIZE_EXCEPT_LAST_ONE;\n    if (showWarning) {\n      console.warn(\n        `partSize has been set to ${partSize}, because the partSize you provided is less than the minimal size of multipart`\n      );\n    }\n  }\n  const minSize = Math.ceil(totalSize / MAX_PART_NUMBER);\n  if (expectPartSize < minSize) {\n    partSize = minSize;\n    if (showWarning) {\n      console.warn(\n        `partSize has been set to ${partSize}, because the partSize you provided causes the number of part excesses 10,000`\n      );\n    }\n  }\n\n  return partSize;\n};\n\nexport async function listParts(this: TOSBase, input: ListPartInput) {\n  const { bucket, key, uploadId, ...nextQuery } = input;\n  const ret = await this._fetchObject<ListPartOutput>(\n    input,\n    'GET',\n    {\n      uploadId,\n      ...covertCamelCase2Kebab(nextQuery),\n    },\n    {}\n  );\n  const arrayProp = makeArrayProp(ret.data);\n  arrayProp('Parts');\n\n  return ret;\n}\n","// alias with GoSDK\n// refer https://github.com/volcengine/ve-tos-golang-sdk/blob/main/tos/mime.go\nexport const mimeTypes: Record<string, string | undefined> = {\n  '3gp': 'video/3gpp',\n  '7z': 'application/x-7z-compressed',\n  abw: 'application/x-abiword',\n  ai: 'application/postscript',\n  aif: 'audio/x-aiff',\n  aifc: 'audio/x-aiff',\n  aiff: 'audio/x-aiff',\n  alc: 'chemical/x-alchemy',\n  amr: 'audio/amr',\n  anx: 'application/annodex',\n  apk: 'application/vnd.android.package-archive',\n  appcache: 'text/cache-manifest',\n  art: 'image/x-jg',\n  asc: 'text/plain',\n  asf: 'video/x-ms-asf',\n  aso: 'chemical/x-ncbi-asn1-binary',\n  asx: 'video/x-ms-asf',\n  atom: 'application/atom+xml',\n  atomcat: 'application/atomcat+xml',\n  atomsrv: 'application/atomserv+xml',\n  au: 'audio/basic',\n  avi: 'video/x-msvideo',\n  awb: 'audio/amr-wb',\n  axa: 'audio/annodex',\n  axv: 'video/annodex',\n  b: 'chemical/x-molconn-Z',\n  bak: 'application/x-trash',\n  bat: 'application/x-msdos-program',\n  bcpio: 'application/x-bcpio',\n  bib: 'text/x-bibtex',\n  bin: 'application/octet-stream',\n  bmp: 'image/x-ms-bmp',\n  boo: 'text/x-boo',\n  book: 'application/x-maker',\n  brf: 'text/plain',\n  bsd: 'chemical/x-crossfire',\n  c: 'text/x-csrc',\n  'c++': 'text/x-c++src',\n  c3d: 'chemical/x-chem3d',\n  cab: 'application/x-cab',\n  cac: 'chemical/x-cache',\n  cache: 'chemical/x-cache',\n  cap: 'application/vnd.tcpdump.pcap',\n  cascii: 'chemical/x-cactvs-binary',\n  cat: 'application/vnd.ms-pki.seccat',\n  cbin: 'chemical/x-cactvs-binary',\n  cbr: 'application/x-cbr',\n  cbz: 'application/x-cbz',\n  cc: 'text/x-c++src',\n  cda: 'application/x-cdf',\n  cdf: 'application/x-cdf',\n  cdr: 'image/x-coreldraw',\n  cdt: 'image/x-coreldrawtemplate',\n  cdx: 'chemical/x-cdx',\n  cdy: 'application/vnd.cinderella',\n  cef: 'chemical/x-cxf',\n  cer: 'chemical/x-cerius',\n  chm: 'chemical/x-chemdraw',\n  chrt: 'application/x-kchart',\n  cif: 'chemical/x-cif',\n  class: 'application/java-vm',\n  cls: 'text/x-tex',\n  cmdf: 'chemical/x-cmdf',\n  cml: 'chemical/x-cml',\n  cod: 'application/vnd.rim.cod',\n  com: 'application/x-msdos-program',\n  cpa: 'chemical/x-compass',\n  cpio: 'application/x-cpio',\n  cpp: 'text/x-c++src',\n  cpt: 'application/mac-compactpro',\n  cr2: 'image/x-canon-cr2',\n  crl: 'application/x-pkcs7-crl',\n  crt: 'application/x-x509-ca-cert',\n  crw: 'image/x-canon-crw',\n  csd: 'audio/csound',\n  csf: 'chemical/x-cache-csf',\n  csh: 'application/x-csh',\n  csm: 'chemical/x-csml',\n  csml: 'chemical/x-csml',\n  css: 'text/css',\n  csv: 'text/csv',\n  ctab: 'chemical/x-cactvs-binary',\n  ctx: 'chemical/x-ctx',\n  cu: 'application/cu-seeme',\n  cub: 'chemical/x-gaussian-cube',\n  cxf: 'chemical/x-cxf',\n  cxx: 'text/x-c++src',\n  d: 'text/x-dsrc',\n  davmount: 'application/davmount+xml',\n  dcm: 'application/dicom',\n  dcr: 'application/x-director',\n  ddeb: 'application/vnd.debian.binary-package',\n  dif: 'video/dv',\n  diff: 'text/x-diff',\n  dir: 'application/x-director',\n  djv: 'image/vnd.djvu',\n  djvu: 'image/vnd.djvu',\n  dl: 'video/dl',\n  dll: 'application/x-msdos-program',\n  dmg: 'application/x-apple-diskimage',\n  dms: 'application/x-dms',\n  doc: 'application/msword',\n  docm: 'application/vnd.ms-word.document.macroEnabled.12',\n  docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  dot: 'application/msword',\n  dotm: 'application/vnd.ms-word.template.macroEnabled.12',\n  dotx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n  dv: 'video/dv',\n  dvi: 'application/x-dvi',\n  dx: 'chemical/x-jcamp-dx',\n  dxr: 'application/x-director',\n  emb: 'chemical/x-embl-dl-nucleotide',\n  embl: 'chemical/x-embl-dl-nucleotide',\n  eml: 'message/rfc822',\n  eot: 'application/vnd.ms-fontobject',\n  eps: 'application/postscript',\n  eps2: 'application/postscript',\n  eps3: 'application/postscript',\n  epsf: 'application/postscript',\n  epsi: 'application/postscript',\n  erf: 'image/x-epson-erf',\n  es: 'application/ecmascript',\n  etx: 'text/x-setext',\n  exe: 'application/x-msdos-program',\n  ez: 'application/andrew-inset',\n  fb: 'application/x-maker',\n  fbdoc: 'application/x-maker',\n  fch: 'chemical/x-gaussian-checkpoint',\n  fchk: 'chemical/x-gaussian-checkpoint',\n  fig: 'application/x-xfig',\n  flac: 'audio/flac',\n  fli: 'video/fli',\n  flv: 'video/x-flv',\n  fm: 'application/x-maker',\n  frame: 'application/x-maker',\n  frm: 'application/x-maker',\n  gal: 'chemical/x-gaussian-log',\n  gam: 'chemical/x-gamess-input',\n  gamin: 'chemical/x-gamess-input',\n  gan: 'application/x-ganttproject',\n  gau: 'chemical/x-gaussian-input',\n  gcd: 'text/x-pcs-gcd',\n  gcf: 'application/x-graphing-calculator',\n  gcg: 'chemical/x-gcg8-sequence',\n  gen: 'chemical/x-genbank',\n  gf: 'application/x-tex-gf',\n  gif: 'image/gif',\n  gjc: 'chemical/x-gaussian-input',\n  gjf: 'chemical/x-gaussian-input',\n  gl: 'video/gl',\n  gnumeric: 'application/x-gnumeric',\n  gpt: 'chemical/x-mopac-graph',\n  gsf: 'application/x-font',\n  gsm: 'audio/x-gsm',\n  gtar: 'application/x-gtar',\n  gz: 'application/gzip',\n  h: 'text/x-chdr',\n  'h++': 'text/x-c++hdr',\n  hdf: 'application/x-hdf',\n  hh: 'text/x-c++hdr',\n  hin: 'chemical/x-hin',\n  hpp: 'text/x-c++hdr',\n  hqx: 'application/mac-binhex40',\n  hs: 'text/x-haskell',\n  hta: 'application/hta',\n  htc: 'text/x-component',\n  htm: 'text/html',\n  html: 'text/html',\n  hwp: 'application/x-hwp',\n  hxx: 'text/x-c++hdr',\n  ica: 'application/x-ica',\n  ice: 'x-conference/x-cooltalk',\n  ico: 'image/vnd.microsoft.icon',\n  ics: 'text/calendar',\n  icz: 'text/calendar',\n  ief: 'image/ief',\n  iges: 'model/iges',\n  igs: 'model/iges',\n  iii: 'application/x-iphone',\n  info: 'application/x-info',\n  inp: 'chemical/x-gamess-input',\n  ins: 'application/x-internet-signup',\n  iso: 'application/x-iso9660-image',\n  isp: 'application/x-internet-signup',\n  ist: 'chemical/x-isostar',\n  istr: 'chemical/x-isostar',\n  jad: 'text/vnd.sun.j2me.app-descriptor',\n  jam: 'application/x-jam',\n  jar: 'application/java-archive',\n  java: 'text/x-java',\n  jdx: 'chemical/x-jcamp-dx',\n  jmz: 'application/x-jmol',\n  jng: 'image/x-jng',\n  jnlp: 'application/x-java-jnlp-file',\n  jp2: 'image/jp2',\n  jpe: 'image/jpeg',\n  jpeg: 'image/jpeg',\n  jpf: 'image/jpx',\n  jpg: 'image/jpeg',\n  jpg2: 'image/jp2',\n  jpm: 'image/jpm',\n  jpx: 'image/jpx',\n  js: 'application/javascript',\n  json: 'application/json',\n  kar: 'audio/midi',\n  key: 'application/pgp-keys',\n  kil: 'application/x-killustrator',\n  kin: 'chemical/x-kinemage',\n  kml: 'application/vnd.google-earth.kml+xml',\n  kmz: 'application/vnd.google-earth.kmz',\n  kpr: 'application/x-kpresenter',\n  kpt: 'application/x-kpresenter',\n  ksp: 'application/x-kspread',\n  kwd: 'application/x-kword',\n  kwt: 'application/x-kword',\n  latex: 'application/x-latex',\n  lha: 'application/x-lha',\n  lhs: 'text/x-literate-haskell',\n  lin: 'application/bbolin',\n  lsf: 'video/x-la-asf',\n  lsx: 'video/x-la-asf',\n  ltx: 'text/x-tex',\n  ly: 'text/x-lilypond',\n  lyx: 'application/x-lyx',\n  lzh: 'application/x-lzh',\n  lzx: 'application/x-lzx',\n  m3g: 'application/m3g',\n  m3u: 'audio/x-mpegurl',\n  m3u8: 'application/x-mpegURL',\n  m4a: 'audio/mpeg',\n  maker: 'application/x-maker',\n  man: 'application/x-troff-man',\n  mbox: 'application/mbox',\n  mcif: 'chemical/x-mmcif',\n  mcm: 'chemical/x-macmolecule',\n  mdb: 'application/msaccess',\n  me: 'application/x-troff-me',\n  mesh: 'model/mesh',\n  mid: 'audio/midi',\n  midi: 'audio/midi',\n  mif: 'application/x-mif',\n  mkv: 'video/x-matroska',\n  mm: 'application/x-freemind',\n  mmd: 'chemical/x-macromodel-input',\n  mmf: 'application/vnd.smaf',\n  mml: 'text/mathml',\n  mmod: 'chemical/x-macromodel-input',\n  mng: 'video/x-mng',\n  moc: 'text/x-moc',\n  mol: 'chemical/x-mdl-molfile',\n  mol2: 'chemical/x-mol2',\n  moo: 'chemical/x-mopac-out',\n  mop: 'chemical/x-mopac-input',\n  mopcrt: 'chemical/x-mopac-input',\n  mov: 'video/quicktime',\n  movie: 'video/x-sgi-movie',\n  mp2: 'audio/mpeg',\n  mp3: 'audio/mpeg',\n  mp4: 'video/mp4',\n  mpc: 'chemical/x-mopac-input',\n  mpe: 'video/mpeg',\n  mpeg: 'video/mpeg',\n  mpega: 'audio/mpeg',\n  mpg: 'video/mpeg',\n  mpga: 'audio/mpeg',\n  mph: 'application/x-comsol',\n  mpv: 'video/x-matroska',\n  ms: 'application/x-troff-ms',\n  msh: 'model/mesh',\n  msi: 'application/x-msi',\n  mvb: 'chemical/x-mopac-vib',\n  mxf: 'application/mxf',\n  mxu: 'video/vnd.mpegurl',\n  nb: 'application/mathematica',\n  nbp: 'application/mathematica',\n  nc: 'application/x-netcdf',\n  nef: 'image/x-nikon-nef',\n  nwc: 'application/x-nwc',\n  o: 'application/x-object',\n  oda: 'application/oda',\n  odb: 'application/vnd.oasis.opendocument.database',\n  odc: 'application/vnd.oasis.opendocument.chart',\n  odf: 'application/vnd.oasis.opendocument.formula',\n  odg: 'application/vnd.oasis.opendocument.graphics',\n  odi: 'application/vnd.oasis.opendocument.image',\n  odm: 'application/vnd.oasis.opendocument.text-master',\n  odp: 'application/vnd.oasis.opendocument.presentation',\n  ods: 'application/vnd.oasis.opendocument.spreadsheet',\n  odt: 'application/vnd.oasis.opendocument.text',\n  oga: 'audio/ogg',\n  ogg: 'audio/ogg',\n  ogv: 'video/ogg',\n  ogx: 'application/ogg',\n  old: 'application/x-trash',\n  one: 'application/onenote',\n  onepkg: 'application/onenote',\n  onetmp: 'application/onenote',\n  onetoc2: 'application/onenote',\n  opf: 'application/oebps-package+xml',\n  opus: 'audio/ogg',\n  orc: 'audio/csound',\n  orf: 'image/x-olympus-orf',\n  otf: 'application/font-sfnt',\n  otg: 'application/vnd.oasis.opendocument.graphics-template',\n  oth: 'application/vnd.oasis.opendocument.text-web',\n  otp: 'application/vnd.oasis.opendocument.presentation-template',\n  ots: 'application/vnd.oasis.opendocument.spreadsheet-template',\n  ott: 'application/vnd.oasis.opendocument.text-template',\n  oza: 'application/x-oz-application',\n  p: 'text/x-pascal',\n  p7r: 'application/x-pkcs7-certreqresp',\n  pac: 'application/x-ns-proxy-autoconfig',\n  pas: 'text/x-pascal',\n  pat: 'image/x-coreldrawpattern',\n  patch: 'text/x-diff',\n  pbm: 'image/x-portable-bitmap',\n  pcap: 'application/vnd.tcpdump.pcap',\n  pcf: 'application/x-font-pcf',\n  'pcf.Z': 'application/x-font-pcf',\n  pcx: 'image/pcx',\n  pdb: 'chemical/x-pdb',\n  pdf: 'application/pdf',\n  pfa: 'application/x-font',\n  pfb: 'application/x-font',\n  pfr: 'application/font-tdpfr',\n  pgm: 'image/x-portable-graymap',\n  pgn: 'application/x-chess-pgn',\n  pgp: 'application/pgp-encrypted',\n  php: '#application/x-httpd-php',\n  php3: '#application/x-httpd-php3',\n  php3p: '#application/x-httpd-php3-preprocessed',\n  php4: '#application/x-httpd-php4',\n  php5: '#application/x-httpd-php5',\n  phps: '#application/x-httpd-php-source',\n  pht: '#application/x-httpd-php',\n  phtml: '#application/x-httpd-php',\n  pk: 'application/x-tex-pk',\n  pl: 'text/x-perl',\n  pls: 'audio/x-scpls',\n  pm: 'text/x-perl',\n  png: 'image/png',\n  pnm: 'image/x-portable-anymap',\n  pot: 'text/plain',\n  potm: 'application/vnd.ms-powerpoint.template.macroEnabled.12',\n  potx: 'application/vnd.openxmlformats-officedocument.presentationml.template',\n  ppam: 'application/vnd.ms-powerpoint.addin.macroEnabled.12',\n  ppm: 'image/x-portable-pixmap',\n  pps: 'application/vnd.ms-powerpoint',\n  ppsm: 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12',\n  ppsx: 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\n  ppt: 'application/vnd.ms-powerpoint',\n  pptm: 'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\n  pptx: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  prf: 'application/pics-rules',\n  prt: 'chemical/x-ncbi-asn1-ascii',\n  ps: 'application/postscript',\n  psd: 'image/x-photoshop',\n  py: 'text/x-python',\n  pyc: 'application/x-python-code',\n  pyo: 'application/x-python-code',\n  qgs: 'application/x-qgis',\n  qt: 'video/quicktime',\n  qtl: 'application/x-quicktimeplayer',\n  ra: 'audio/x-pn-realaudio',\n  ram: 'audio/x-pn-realaudio',\n  rar: 'application/rar',\n  ras: 'image/x-cmu-raster',\n  rb: 'application/x-ruby',\n  rd: 'chemical/x-mdl-rdfile',\n  rdf: 'application/rdf+xml',\n  rdp: 'application/x-rdp',\n  rgb: 'image/x-rgb',\n  rhtml: '#application/x-httpd-eruby',\n  rm: 'audio/x-pn-realaudio',\n  roff: 'application/x-troff',\n  ros: 'chemical/x-rosdal',\n  rpm: 'application/x-redhat-package-manager',\n  rss: 'application/x-rss+xml',\n  rtf: 'application/rtf',\n  rtx: 'text/richtext',\n  rxn: 'chemical/x-mdl-rxnfile',\n  scala: 'text/x-scala',\n  sce: 'application/x-scilab',\n  sci: 'application/x-scilab',\n  sco: 'audio/csound',\n  scr: 'application/x-silverlight',\n  sct: 'text/scriptlet',\n  sd: 'chemical/x-mdl-sdfile',\n  sd2: 'audio/x-sd2',\n  sda: 'application/vnd.stardivision.draw',\n  sdc: 'application/vnd.stardivision.calc',\n  sdd: 'application/vnd.stardivision.impress',\n  sds: 'application/vnd.stardivision.chart',\n  sdw: 'application/vnd.stardivision.writer',\n  ser: 'application/java-serialized-object',\n  sfd: 'application/vnd.font-fontforge-sfd',\n  sfv: 'text/x-sfv',\n  sgf: 'application/x-go-sgf',\n  sgl: 'application/vnd.stardivision.writer-global',\n  sh: 'application/x-sh',\n  shar: 'application/x-shar',\n  shp: 'application/x-qgis',\n  shtml: 'text/html',\n  shx: 'application/x-qgis',\n  sid: 'audio/prs.sid',\n  sig: 'application/pgp-signature',\n  sik: 'application/x-trash',\n  silo: 'model/mesh',\n  sis: 'application/vnd.symbian.install',\n  sisx: 'x-epoc/x-sisx-app',\n  sit: 'application/x-stuffit',\n  sitx: 'application/x-stuffit',\n  skd: 'application/x-koan',\n  skm: 'application/x-koan',\n  skp: 'application/x-koan',\n  skt: 'application/x-koan',\n  sldm: 'application/vnd.ms-powerpoint.slide.macroEnabled.12',\n  sldx: 'application/vnd.openxmlformats-officedocument.presentationml.slide',\n  smi: 'application/smil+xml',\n  smil: 'application/smil+xml',\n  snd: 'audio/basic',\n  spc: 'chemical/x-galactic-spc',\n  spl: 'application/x-futuresplash',\n  spx: 'audio/ogg',\n  sql: 'application/x-sql',\n  src: 'application/x-wais-source',\n  srt: 'text/plain',\n  stc: 'application/vnd.sun.xml.calc.template',\n  std: 'application/vnd.sun.xml.draw.template',\n  sti: 'application/vnd.sun.xml.impress.template',\n  stw: 'application/vnd.sun.xml.writer.template',\n  sty: 'text/x-tex',\n  sv4cpio: 'application/x-sv4cpio',\n  sv4crc: 'application/x-sv4crc',\n  svg: 'image/svg+xml',\n  svgz: 'image/svg+xml',\n  sw: 'chemical/x-swissprot',\n  swf: 'application/x-shockwave-flash',\n  swfl: 'application/x-shockwave-flash',\n  sxc: 'application/vnd.sun.xml.calc',\n  sxd: 'application/vnd.sun.xml.draw',\n  sxg: 'application/vnd.sun.xml.writer.global',\n  sxi: 'application/vnd.sun.xml.impress',\n  sxm: 'application/vnd.sun.xml.math',\n  sxw: 'application/vnd.sun.xml.writer',\n  t: 'application/x-troff',\n  tar: 'application/x-tar',\n  taz: 'application/x-gtar-compressed',\n  tcl: 'application/x-tcl',\n  tex: 'text/x-tex',\n  texi: 'application/x-texinfo',\n  texinfo: 'application/x-texinfo',\n  text: 'text/plain',\n  tgf: 'chemical/x-mdl-tgf',\n  tgz: 'application/x-gtar-compressed',\n  thmx: 'application/vnd.ms-officetheme',\n  tif: 'image/tiff',\n  tiff: 'image/tiff',\n  tk: 'text/x-tcl',\n  tm: 'text/texmacs',\n  torrent: 'application/x-bittorrent',\n  tr: 'application/x-troff',\n  ts: 'video/MP2T',\n  tsp: 'application/dsptype',\n  tsv: 'text/tab-separated-values',\n  ttf: 'application/font-sfnt',\n  ttl: 'text/turtle',\n  txt: 'text/plain',\n  uls: 'text/iuls',\n  ustar: 'application/x-ustar',\n  val: 'chemical/x-ncbi-asn1-binary',\n  vcard: 'text/vcard',\n  vcd: 'application/x-cdlink',\n  vcf: 'text/vcard',\n  vcs: 'text/x-vcalendar',\n  vmd: 'chemical/x-vmd',\n  vms: 'chemical/x-vamas-iso14976',\n  vrm: 'x-world/x-vrml',\n  vrml: 'model/vrml',\n  vsd: 'application/vnd.visio',\n  vss: 'application/vnd.visio',\n  vst: 'application/vnd.visio',\n  vsw: 'application/vnd.visio',\n  wad: 'application/x-doom',\n  wasm: 'application/wasm',\n  wav: 'audio/wav',\n  wax: 'audio/x-ms-wax',\n  wbmp: 'image/vnd.wap.wbmp',\n  wbxml: 'application/vnd.wap.wbxml',\n  webm: 'video/webm',\n  wk: 'application/x-123',\n  wm: 'video/x-ms-wm',\n  wma: 'audio/x-ms-wma',\n  wmd: 'application/x-ms-wmd',\n  wml: 'text/vnd.wap.wml',\n  wmlc: 'application/vnd.wap.wmlc',\n  wmls: 'text/vnd.wap.wmlscript',\n  wmlsc: 'application/vnd.wap.wmlscriptc',\n  wmv: 'video/x-ms-wmv',\n  wmx: 'video/x-ms-wmx',\n  wmz: 'application/x-ms-wmz',\n  woff: 'application/font-woff',\n  wp5: 'application/vnd.wordperfect5.1',\n  wpd: 'application/vnd.wordperfect',\n  wrl: 'model/vrml',\n  wsc: 'text/scriptlet',\n  wvx: 'video/x-ms-wvx',\n  wz: 'application/x-wingz',\n  x3d: 'model/x3d+xml',\n  x3db: 'model/x3d+binary',\n  x3dv: 'model/x3d+vrml',\n  xbm: 'image/x-xbitmap',\n  xcf: 'application/x-xcf',\n  xcos: 'application/x-scilab-xcos',\n  xht: 'application/xhtml+xml',\n  xhtml: 'application/xhtml+xml',\n  xlam: 'application/vnd.ms-excel.addin.macroEnabled.12',\n  xlb: 'application/vnd.ms-excel',\n  xls: 'application/vnd.ms-excel',\n  xlsb: 'application/vnd.ms-excel.sheet.binary.macroEnabled.12',\n  xlsm: 'application/vnd.ms-excel.sheet.macroEnabled.12',\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  xlt: 'application/vnd.ms-excel',\n  xltm: 'application/vnd.ms-excel.template.macroEnabled.12',\n  xltx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n  xml: 'application/xml',\n  xpi: 'application/x-xpinstall',\n  xpm: 'image/x-xpixmap',\n  xsd: 'application/xml',\n  xsl: 'application/xslt+xml',\n  xslt: 'application/xslt+xml',\n  xspf: 'application/xspf+xml',\n  xtel: 'chemical/x-xtel',\n  xul: 'application/vnd.mozilla.xul+xml',\n  xwd: 'image/x-xwindowdump',\n  xyz: 'chemical/x-xyz',\n  xz: 'application/x-xz',\n  zip: 'application/zip',\n  webp: 'image/webp',\n};\n\nexport default mimeTypes;\n","import { Transform } from 'stream';\nimport { pipeStreamWithErrorHandle } from '../utils';\n\nfunction createReadNCbTransformer(readCb: (n: number) => void) {\n  return new Transform({\n    async transform(chunk, _encoding, callback) {\n      const chunkSize = chunk.length;\n      readCb(chunkSize);\n      this.push(chunk);\n      callback();\n    },\n  });\n}\n\nexport function createReadNReadStream(\n  stream: NodeJS.ReadableStream,\n  readCb: (n: number) => void\n) {\n  const readCbTransformer = createReadNCbTransformer(readCb);\n  return pipeStreamWithErrorHandle(\n    stream,\n    readCbTransformer,\n    'createReadNReadStream'\n  );\n\n  /**\n   * Don't use the below code.\n   *\n   * 1. The readable stream will be flowing mode after adding a 'data' event listener to it.\n   * 2. The stream will be paused after calling `pause()` method.\n   * 3. The stream will not change to flowing mode when adding a 'data' event listener to it.\n   */\n  // stream.on('data', (d) => {\n  //   readCb(d.length);\n  // });\n  // stream.pause();\n}\n","import TosClientError from '../TosClientError';\nimport { crc64 } from 'tos-crc64-js';\nexport { combineCrc64 } from 'tos-crc64-js';\n\nexport class CRC {\n  private value = '0';\n\n  reset() {\n    this.value = '0';\n  }\n\n  async updateBlob(): Promise<string> {\n    throw new TosClientError('Not implemented in node.js environment.');\n  }\n\n  update(value: Buffer): string {\n    this.value = crc64(value, this.value);\n    return this.value;\n  }\n\n  getCrc64(): string {\n    return this.value;\n  }\n}\n","import * as browserCRC from './crc.browser';\nimport * as nodejsCRC from '../nodejs/crc.node';\n\ntype CRCModule = typeof nodejsCRC;\nexport type CRCCls = nodejsCRC.CRC;\nlet crcModule = null as unknown as CRCModule;\n\nif (process.env.TARGET_ENVIRONMENT === 'node') {\n  crcModule = nodejsCRC;\n} else {\n  crcModule = browserCRC as unknown as CRCModule;\n}\n\nconst { CRC, combineCrc64 } = crcModule;\nexport { CRC, combineCrc64 };\n","import { Readable, Transform } from 'stream';\nimport { pipeStreamWithErrorHandle } from '../utils';\nimport { IRateLimiter } from '../interface';\n\nexport interface DefaultRateLimiter {\n  rate: number;\n  capacity: number;\n  currentAmount: number;\n  lastConsumeTime: number;\n}\n\nconst minRate = 1024;\nconst minCapacity = 10 * 1024;\n\n/**\n *\n * @param capacity  minValue 10KB. unit byte\n * @param rate   minValue 1KB. unit byte/s\n * @returns\n */\nexport function createDefaultRateLimiter(\n  capacity: number,\n  rate: number\n): IRateLimiter {\n  const realCapacity = Math.max(minCapacity, capacity);\n  const realRate = Math.max(minRate, rate);\n  const d: DefaultRateLimiter = {\n    rate: realRate,\n    capacity: realCapacity,\n    currentAmount: realCapacity,\n    lastConsumeTime: Date.now(),\n  };\n\n  return {\n    Acquire: async (want) => {\n      if (want > d.capacity) {\n        want = d.capacity;\n      }\n\n      const now = Date.now();\n      const increment = Math.floor(((now - d.lastConsumeTime) / 1000) * d.rate);\n\n      if (increment + d.currentAmount > d.capacity) {\n        d.currentAmount = d.capacity;\n      } else {\n        d.currentAmount += increment;\n      }\n\n      if (want > d.currentAmount) {\n        const timeToWaitSec = (want - d.currentAmount) / d.rate;\n\n        return { ok: false, timeToWait: Math.ceil(timeToWaitSec * 1000) };\n      }\n\n      d.lastConsumeTime = now;\n      d.currentAmount = d.currentAmount - want;\n\n      return {\n        ok: true,\n        timeToWait: 0,\n      };\n    },\n  };\n}\n\nfunction createRateLimiterTransform(rateLimiter: IRateLimiter) {\n  return new Transform({\n    async transform(chunk, _encoding, callback) {\n      try {\n        const chunkSize = chunk.length;\n        let finished = false;\n        while (!finished) {\n          const { ok, timeToWait } = await rateLimiter.Acquire(chunkSize);\n\n          if (!ok) {\n            await wait(timeToWait);\n          }\n          finished = ok;\n        }\n\n        this.push(chunk);\n        callback();\n      } catch (error: any) {\n        callback(error);\n      }\n    },\n  });\n}\n\nexport function createRateLimiterStream(\n  stream: NodeJS.ReadableStream | Readable,\n  rateLimiter: IRateLimiter\n) {\n  const pipeRateLimit = createRateLimiterTransform(rateLimiter);\n\n  return pipeStreamWithErrorHandle(\n    stream,\n    pipeRateLimit,\n    'createRateLimiterStream'\n  );\n}\n\nexport function wait(milliseconds: number) {\n  return new Promise((r) => {\n    setTimeout(() => r(''), milliseconds);\n  });\n}\n","import * as moduleBrowser from './rate-limiter.browser';\nimport * as moduleNode from '../nodejs/rate-limiter';\nimport { IRateLimiter } from '../interface';\n\ninterface RateLimiterModule {\n  createDefaultRateLimiter(capacity: number, rate: number): IRateLimiter;\n  createRateLimiterStream(\n    stream: NodeJS.ReadableStream,\n    rateLimiter: IRateLimiter\n  ): NodeJS.ReadableStream;\n}\n\nlet rateLimiter = null as unknown as RateLimiterModule;\nif (process.env.TARGET_ENVIRONMENT === 'node') {\n  rateLimiter = moduleNode as unknown as RateLimiterModule;\n} else {\n  rateLimiter = moduleBrowser as unknown as RateLimiterModule;\n}\n\nconst { createDefaultRateLimiter, createRateLimiterStream } = rateLimiter;\n\nexport { createDefaultRateLimiter, createRateLimiterStream };\nexport type { IRateLimiter };\n","import { Readable } from 'stream';\n\nexport class Buffer2Stream extends Readable {\n  lastPos = 0;\n\n  constructor(private buf: Buffer) {\n    super();\n  }\n\n  _read(n: number) {\n    const totalSize = this.buf.length;\n    let actualN = Math.min(n, totalSize - this.lastPos);\n\n    if (this.lastPos >= totalSize) {\n      this.push(null);\n      return;\n    }\n\n    this.push(this.buf.slice(this.lastPos, this.lastPos + actualN));\n    this.lastPos += actualN;\n  }\n}\n","import { Transform } from 'stream';\nimport { CRCCls } from '../universal/crc';\nimport { pipeStreamWithErrorHandle } from '../utils';\n\nfunction createReadCbTransformer(readCb: (chunk: Buffer) => void) {\n  return new Transform({\n    async transform(chunk, _encoding, callback) {\n      readCb(chunk);\n      this.push(chunk);\n      callback();\n    },\n  });\n}\n\nexport function createCrcReadStream(\n  stream: NodeJS.ReadableStream,\n  crc: CRCCls\n) {\n  const readCbTransformer = createReadCbTransformer((chunk: Buffer) =>\n    crc.update(chunk)\n  );\n\n  return pipeStreamWithErrorHandle(\n    stream,\n    readCbTransformer,\n    'createCrcReadStream'\n  );\n}\n","import { TierType } from '../../TosExportEnum';\n\nexport interface RestoreInfo {\n  RestoreStatus: RestoreStatus;\n  RestoreParam?: RestoreParam;\n}\n\nexport type RestoreStatus = {\n  OngoingRequest: boolean;\n  ExpiryDate?: string;\n};\n\nexport type RestoreParam = {\n  RequestDate: string;\n  ExpiryDays: number;\n  Tier: TierType;\n};\n\nexport enum TosHeader {\n  HeaderRestore = 'x-tos-restore',\n  HeaderRestoreExpiryDays = 'x-tos-restore-expiry-days',\n  HeaderRestoreRequestDate = 'x-tos-restore-request-date',\n  HeaderRestoreTier = 'x-tos-restore-tier',\n  HeaderProjectName = 'x-tos-project-name',\n  HeaderReplicationStatus = 'x-tos-replication-status',\n}\n\nexport const RestoreOngoingRequestTrueStr = 'ongoing-request=\"true\"';\nexport const RestoreOngoingRequestFalseReg = 'ongoing-request=\"false\"';\n","import TosClientError from '../../TosClientError';\nimport mimeTypes from '../../mime-types';\nimport { Headers, SupportObjectBody } from '../../interface';\nimport { createReadNReadStream } from '../../nodejs/EmitReadStream';\nimport { isBuffer, isBlob, isReadable } from '../../utils';\nimport { CRC, CRCCls } from '../../universal/crc';\nimport {\n  IRateLimiter,\n  createRateLimiterStream,\n} from '../../universal/rate-limiter';\nimport { Buffer2Stream } from '../../nodejs/buffer2Stream';\nimport { createCrcReadStream } from '../../nodejs/CrcReadStream';\nimport {\n  RestoreInfo,\n  RestoreOngoingRequestTrueStr,\n  TosHeader,\n} from './sharedTypes';\nimport { TierType } from '../../TosExportEnum';\n\nexport const getObjectInputKey = (input: string | { key: string }): string => {\n  return typeof input === 'string' ? input : input.key;\n};\n\nexport const DEFAULT_CONTENT_TYPE = 'application/octet-stream';\n\nexport function lookupMimeType(key: string) {\n  const lastDotIndex = key.lastIndexOf('.');\n\n  if (lastDotIndex <= 0) {\n    return undefined;\n  }\n\n  const extName = key.slice(lastDotIndex + 1).toLowerCase();\n\n  return mimeTypes[extName];\n}\n\n// for all object methods\nexport function validateObjectName(input: { key: string } | string) {\n  const key = typeof input === 'string' ? input : input.key;\n  if (key.length < 1) {\n    throw new TosClientError(\n      'invalid object name, the length must be greater than 1'\n    );\n  }\n}\n\nexport function getSize(body: unknown, headers?: Headers) {\n  if (isBuffer(body)) {\n    return body.length;\n  }\n  if (isBlob(body)) {\n    return body.size;\n  }\n  if (headers && headers['content-length']) {\n    const v = +headers['content-length'];\n    if (v >= 0) {\n      return v;\n    }\n  }\n  return null;\n}\n\ninterface GetNewBodyConfigIn<T> {\n  body: T;\n  dataTransferCallback: (n: number) => void;\n  beforeRetry?: () => void;\n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n  enableCRC: boolean;\n  rateLimiter?: IRateLimiter;\n}\ninterface GetNewBodyConfigOut<T> {\n  body: T | NodeJS.ReadableStream;\n  beforeRetry?: () => void;\n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n  crc?: CRCCls;\n}\n\ninterface GetEmitReadBodyConfigIn<T> {\n  body: T;\n  dataTransferCallback: (n: number) => void;\n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n  rateLimiter?: IRateLimiter;\n}\ninterface GetEmitReadBodyConfigOut<T> {\n  body: T | NodeJS.ReadableStream;\n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n}\n\nexport function getEmitReadBodyConfig<T extends SupportObjectBody>({\n  body,\n  dataTransferCallback,\n  makeRetryStream,\n  rateLimiter,\n}: GetEmitReadBodyConfigIn<T>): GetEmitReadBodyConfigOut<T> {\n  let newBody: T | NodeJS.ReadableStream = body;\n\n  const getDefaultRet = () => ({\n    body: newBody,\n    makeRetryStream: undefined,\n  });\n\n  if (process.env.TARGET_ENVIRONMENT !== 'node') {\n    return getDefaultRet();\n  }\n\n  if (isBuffer(newBody)) {\n    const bodyBuf = newBody;\n    makeRetryStream = () => new Buffer2Stream(bodyBuf);\n    newBody = new Buffer2Stream(bodyBuf);\n  }\n\n  if (isReadable(newBody)) {\n    if (rateLimiter && isValidRateLimiter(rateLimiter)) {\n      newBody = createRateLimiterStream(newBody, rateLimiter);\n    }\n    newBody = createReadNReadStream(newBody, dataTransferCallback);\n\n    if (makeRetryStream) {\n      const oriMakeRetryStream = makeRetryStream;\n      return {\n        body: newBody,\n        makeRetryStream: () => {\n          let stream = oriMakeRetryStream();\n          if (!stream) {\n            return stream;\n          }\n\n          if (rateLimiter && isValidRateLimiter(rateLimiter)) {\n            stream = createRateLimiterStream(stream, rateLimiter);\n          }\n          stream = createReadNReadStream(stream, dataTransferCallback);\n          return stream;\n        },\n      };\n    }\n  }\n\n  return getDefaultRet();\n}\n\nexport async function getCRCBodyConfig<T extends SupportObjectBody>({\n  body,\n  beforeRetry,\n  makeRetryStream,\n  enableCRC,\n}: GetNewBodyConfigIn<T>): Promise<GetNewBodyConfigOut<T>> {\n  if (process.env.TARGET_ENVIRONMENT === 'browser' || !enableCRC) {\n    return {\n      body,\n      beforeRetry,\n      makeRetryStream,\n    };\n  }\n\n  let newBody: T | NodeJS.ReadableStream = body;\n  const crc = new CRC();\n  if (isReadable(body)) {\n    newBody = createCrcReadStream(body, crc);\n    if (makeRetryStream) {\n      const oriMakeRetryStream = makeRetryStream;\n      makeRetryStream = () => {\n        const stream = oriMakeRetryStream();\n        if (!stream) {\n          return stream;\n        }\n        return createCrcReadStream(stream, crc);\n      };\n    }\n  }\n\n  return {\n    body: newBody,\n    beforeRetry: () => {\n      crc.reset();\n      beforeRetry?.();\n    },\n    makeRetryStream,\n    crc,\n  };\n}\n\nexport async function getNewBodyConfig<T extends SupportObjectBody>(\n  input: GetNewBodyConfigIn<T>\n): Promise<GetNewBodyConfigOut<T>> {\n  const config1 = getEmitReadBodyConfig(input);\n  input = { ...input, ...config1 } as GetNewBodyConfigIn<T>;\n  const config2 = getCRCBodyConfig(input);\n  return config2;\n}\n\nexport function getCopySourceHeaderValue(srcBucket: string, srcKey: string) {\n  return `/${srcBucket}/${encodeURIComponent(srcKey)}`;\n}\n\nexport function isValidRateLimiter(rateLimiter?: IRateLimiter) {\n  if (!rateLimiter?.Acquire || !(rateLimiter?.Acquire instanceof Function)) {\n    throw new TosClientError(`The rateLimiter is not valid function`);\n  }\n  return true;\n}\n\nexport function validateCheckpoint(cp: undefined | string | Object) {\n  if (process.env.TARGET_ENVIRONMENT === 'node' && typeof cp === 'object') {\n    console.warn(\n      `The \\`checkpoint\\` parameter should be passed as a string in node.js environment, representing a file or directory.` +\n        `Passing a checkpoint object to it will be removed in the future.`\n    );\n  }\n}\n\nexport const getRestoreInfoFromHeaders = (headers: Headers) => {\n  if (!headers) return;\n  const headerStoreValue = headers?.[TosHeader.HeaderRestore];\n\n  if (headerStoreValue) {\n    /**\n     * value example:\n     * X-Tos-Restore: ongoing-request=\"false\", expiry-date=\"Fri, 19 Apr 2024 00:00:00 GMT\"\n     */\n    const ExpiryDate =\n      (headerStoreValue ?? '').split('\",')[1]?.split?.('=')?.[1] ?? '';\n    const OngoingRequest =\n      headerStoreValue?.trim() === RestoreOngoingRequestTrueStr ? true : false;\n    const restoreInfo: RestoreInfo = {\n      RestoreStatus: {\n        OngoingRequest,\n        ExpiryDate,\n      },\n    };\n    if (OngoingRequest) {\n      restoreInfo.RestoreParam = {\n        ExpiryDays: headers[TosHeader.HeaderRestoreExpiryDays]\n          ? Number(headers[TosHeader.HeaderRestoreExpiryDays])\n          : 0,\n        RequestDate: headers[TosHeader.HeaderRestoreRequestDate] ?? '',\n        Tier: headers[TosHeader.HeaderRestoreTier] as TierType,\n      };\n    }\n    return restoreInfo;\n  }\n  return;\n};\n","import { AxiosAdapter } from 'axios';\nimport {\n  ACLType,\n  CannedType,\n  PermissionType,\n  StorageClassType,\n} from './TosExportEnum';\n\nexport type Headers = { [key: string]: string | undefined };\n\nexport interface AclInterface {\n  Owner: { ID: string };\n  Grants: {\n    Grantee: {\n      ID?: string;\n      DisplayName?: string;\n      Type: string;\n      Canned?: CannedType;\n    };\n    Permission: PermissionType;\n  }[];\n  /**\n   * @private unstable property only for bucket ACL\n   */\n  BucketAclDelivered?: boolean;\n  /**\n   * @private unstable property only for object ACL\n   */\n  IsDefault?: boolean;\n}\n\nexport type Acl = ACLType;\nexport type StorageClass = StorageClassType;\n\nexport type ServerSideEncryption = 'AES256';\n\nexport interface DataTransferStatus {\n  /**\n   * has read or wrote bytes\n   */\n  consumedBytes: number;\n\n  /**\n   * totalBytes maybe 0 or -1.\n   * `-1` means unkown totalBytes, for example when starting to download an object\n   */\n  totalBytes: number;\n\n  /**\n   * transferred bytes in this transfer\n   */\n  rwOnceBytes: number;\n\n  type: DataTransferType;\n}\n\nexport enum DataTransferType {\n  Started = 1, // data transfer start\n  Rw = 2, // one transfer\n  Succeed = 3, // data transfer succeed\n  Failed = 4, // data transfer failed\n}\n\nexport type SupportObjectBody =\n  | File\n  | Blob\n  | Buffer\n  | NodeJS.ReadableStream\n  | undefined;\n\nexport type StringKeys<T> = Extract<\n  { [K in keyof T]: T[K] extends string | undefined ? K : never }[keyof T],\n  string\n>;\n\nexport interface IRateLimiter {\n  Acquire: (want: number) => Promise<{\n    ok: boolean;\n    /**\n     * unit: milliseconds\n     */\n    timeToWait: number;\n  }>;\n}\n\nexport interface TosClientCommonOptions {\n  accessKeyId: string;\n  accessKeySecret: string;\n  stsToken?: string;\n  //bucket?: string;\n  endpoint?: string;\n  /**\n   * default value: true\n   * when using proxyHost&proxyPort, it needs to be set to false\n   */\n  secure?: boolean;\n  region: string;\n\n  /**\n   * proxy for web, use it with the middleware of `./proxy`\n   */\n  proxy?:\n    | string\n    | {\n        url: string;\n        needProxyParams?: boolean;\n      };\n  /**\n   * proxy to general http proxy server, this feature doesn't work in browser environment.\n   * only support http proxy server.\n   * proxyHost and proxyPort are required if the proxy function works.\n   * HINT: need set `secure` field false\n   */\n  proxyHost?: string;\n  proxyPort?: number;\n  // username and password don't be supported currently\n  // proxyUsername?: string;\n  // proxyPassword?: string;\n\n  /**\n   * default value: true\n   */\n  enableVerifySSL?: boolean;\n\n  /**\n   * default value: true\n   */\n  //autoRecognizeContentType?: boolean;\n\n  /**\n   * unit: ms\n   * default value: 120s\n   * disable if value <= 0\n   */\n  requestTimeout?: number;\n\n  /**\n   * unit: ms\n   * default value: 10s\n   * disable if value <= 0\n   */\n  connectionTimeout?: number;\n\n  /**\n   * default value: 1024\n   */\n  maxConnections?: number;\n\n  /**\n   * unit: ms\n   * default value: 30s\n   */\n  idleConnectionTime?: number;\n\n  /**\n   * default value: 3\n   *\n   * disable if value <= 0\n   */\n  maxRetryCount?: number;\n\n  // TODO: need more efficient way, 1min for 10M currently\n  /**\n   * default value: false\n   *\n   * CRC executed by js is slow currently, it's default value will be true if it is fast enough.\n   */\n  //enableCRC?: boolean;\n\n  /**\n   * set request adapter to send request.\n   */\n  requestAdapter?: AxiosAdapter;\n\n  /**\n   * default value: false  ${bucket}.${endpoint}\n   * if true request will not combine `${bucket}.${endpoint}`\n   */\n  //isCustomDomain?: boolean;\n\n  /**\n   * @private unstable option: false | true | undefined\n   * default value: undefined\n   * true:\n   * Allow SDK to internally catch server errors for 404 and return default values\n   * Allow SDK to internally change some put methods to delete methods when pass empty value\n   */\n  enableOptimizeMethodBehavior?: boolean;\n  /**\n   * @private unstable option\n   */\n  //forcePathStyle?: boolean;\n\n  userAgentProductName?: string;\n  userAgentSoftName?: string;\n  userAgentSoftVersion?: string;\n  userAgentCustomizedKeyValues?: Record<string, string>;\n}\n","import axios from 'axios';\nimport { Readable } from 'stream';\nimport { safeSync } from './utils';\nimport { SignersV4 } from './signatureV4';\nimport * as log from './log';\n\nexport const retryNamespace = '__retryConfig__';\nexport const retrySignatureNamespace = '__retrySignature__';\n\nexport interface RetryConfig {\n  // \n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n\n  beforeRetry?: () => void;\n}\n\ninterface InnerRetryConfig extends RetryConfig {\n  retryCount?: number;\n}\n\ninterface RetrySignature {\n  signOpt: any;\n  sigInst: SignersV4;\n}\n\ndeclare module 'axios' {\n  interface AxiosRequestConfig {\n    __retryConfig__?: RetryConfig;\n    __retrySignature__?: RetrySignature;\n  }\n}\n\nfunction isNetworkError(error: any) {\n  // no response or no requestId, ignore no network(error.code is undefined)\n  return (\n    (!error.response && Boolean(error.code)) ||\n    (error.response && !error.response.headers?.['x-tos-request-id'])\n  );\n}\n\nfunction isCanRetryStatusCode(error: any) {\n  if (!error.response) {\n    return false;\n  }\n\n  const { status } = error.response;\n  if (status === 429 || status === 408 || status >= 500) {\n    return true;\n  }\n  return false;\n}\n\nconst BROWSER_NEED_DELETE_HEADERS = ['content-length', 'user-agent', 'host'];\n\nexport const makeAxiosInst = (maxRetryCount: number) => {\n  const axiosInst = axios.create();\n  // set `axiosInst` default values to avoid being affected by the global default values of axios\n  axiosInst.defaults.auth = undefined;\n  axiosInst.defaults.responseType = 'json';\n  axiosInst.defaults.params = undefined;\n  axiosInst.defaults.headers = {};\n  axiosInst.defaults.withCredentials = false;\n  axiosInst.defaults.maxContentLength = -1;\n  axiosInst.defaults.maxBodyLength = -1;\n  axiosInst.defaults.maxRedirects = 0;\n  axiosInst.defaults.validateStatus = function (status) {\n    return status >= 200 && status < 300; // default\n  };\n  axiosInst.defaults.decompress = false;\n  axiosInst.defaults.transitional = {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false,\n  };\n\n  // delete browser headers\n  if (process.env.TARGET_ENVIRONMENT === 'browser') {\n    axiosInst.interceptors.request.use((config) => {\n      if (!config.headers) {\n        return config;\n      }\n\n      Object.keys(config.headers).forEach((key) => {\n        if (BROWSER_NEED_DELETE_HEADERS.includes(key.toLowerCase())) {\n          delete config.headers[key];\n        }\n      });\n\n      return config;\n    });\n  }\n\n  // headers\n  const ensureHeaders = (v: any) => {\n    v.headers = v.headers || v.header || v?.response?.headers || {};\n    return v;\n  };\n  axiosInst.interceptors.response.use(ensureHeaders, (error) => {\n    ensureHeaders(error);\n    return Promise.reject(error);\n  });\n\n  // decode header. Encode headers' value by encodeHeadersValue method before calling axios\n  function handleResponseHeader(headers: Record<string, string>) {\n    Object.entries(headers).forEach(([key, value]) => {\n      const [err, decodedValue] = safeSync(() => decodeURI(value));\n      if (err || decodedValue == null || decodedValue === value) {\n        return;\n      }\n      let sArr = [];\n      const valueArr = `${value}`.match(/./gu)!;\n      const decodedValueArr = decodedValue.match(/./gu)!;\n      for (let i = 0, j = 0; i < decodedValueArr.length; ) {\n        const ch = decodedValueArr[i];\n        if (ch === valueArr[j]) {\n          sArr.push(ch);\n          ++i;\n          ++j;\n          continue;\n        }\n\n        const encodedCh = encodeURIComponent(ch);\n        if (ch.length > 1 || ch.charCodeAt(0) >= 128) {\n          sArr.push(ch);\n        } else {\n          sArr.push(encodedCh);\n        }\n        ++i;\n        j += encodedCh.length;\n      }\n      headers[key] = sArr.join('');\n    });\n  }\n  axiosInst.interceptors.response.use(\n    (res) => {\n      if (!res.headers) {\n        return res;\n      }\n      handleResponseHeader(res.headers);\n      return res;\n    },\n    async (error) => {\n      if (!axios.isAxiosError(error)) {\n        return Promise.reject(error);\n      }\n\n      const headers = error.response?.headers;\n      if (!headers) {\n        return Promise.reject(error);\n      }\n      handleResponseHeader(headers);\n      return Promise.reject(error);\n    }\n  );\n\n  // retry\n  axiosInst.interceptors.response.use(undefined, async (error) => {\n    const { config } = error;\n    if (!config) {\n      return Promise.reject(error);\n    }\n\n    if (!config[retryNamespace]) {\n      config[retryNamespace] = {};\n    }\n    const retryConfig: InnerRetryConfig = config[retryNamespace];\n    const retryCount = retryConfig.retryCount ?? 0;\n\n    let newData = config.data;\n    const canRetryData = (() => {\n      if (process.env.TARGET_ENVIRONMENT === 'node') {\n        if (config.data && config.data instanceof Readable) {\n          const v = retryConfig.makeRetryStream?.();\n          if (!v) {\n            return false;\n          }\n          newData = v;\n        }\n      }\n      return true;\n    })();\n\n    const canRetry =\n      (isNetworkError(error) || isCanRetryStatusCode(error)) &&\n      retryCount < maxRetryCount &&\n      canRetryData;\n\n    if (!canRetry) {\n      return Promise.reject(error);\n    }\n\n    const retrySignature = config[retrySignatureNamespace] as RetrySignature;\n    if (retrySignature) {\n      const { signOpt, sigInst } = retrySignature;\n      const signatureHeaders = sigInst.signatureHeader(signOpt);\n      signatureHeaders.forEach((value, key) => {\n        config.headers[key] = value;\n      });\n    }\n\n    //console.log('config: ', config)\n    log.TOS('retryConfig: ', config);\n    const nextConfig = {\n      ...config,\n      data: newData,\n      [retryNamespace]: {\n        ...retryConfig,\n        retryCount: retryCount + 1,\n      },\n    };\n\n    retryConfig.beforeRetry?.();\n    return axiosInst(nextConfig);\n  });\n\n  return axiosInst;\n};\n","import cryptoHmacSha256 from 'crypto-js/hmac-sha256';\nimport cryptoHashSha256 from 'crypto-js/sha256';\nimport cryptoHashMd5 from 'crypto-js/md5';\nimport cryptoEncBase64 from 'crypto-js/enc-base64';\nimport cryptoEncHex from 'crypto-js/enc-hex';\nimport cryptoEncUtf8 from 'crypto-js/enc-utf8';\nimport TosClientError from '../TosClientError';\nimport { isBuffer } from '../utils';\n\nfunction getEnc(coding: 'utf-8' | 'base64' | 'hex') {\n  switch (coding) {\n    case 'utf-8':\n      return cryptoEncUtf8;\n    case 'base64':\n      return cryptoEncBase64;\n    case 'hex':\n      return cryptoEncHex;\n    default:\n      throw new TosClientError('The coding is not supported');\n  }\n}\n\nfunction decode(v: any, decoding?: 'base64' | 'hex'): string {\n  if (!decoding) {\n    return v;\n  }\n\n  return v.toString(getEnc(decoding));\n}\n\nexport const hmacSha256 = function hmacSha256(\n  key: string,\n  message: string,\n  decoding?: 'base64' | 'hex'\n) {\n  return decode(cryptoHmacSha256(message, key), decoding);\n};\n\nexport const hashSha256 = function hashSha256(\n  message: string,\n  decoding?: 'base64' | 'hex'\n) {\n  return decode(cryptoHashSha256(message), decoding);\n};\n\nexport const hashMd5 = function hashMd5(\n  message: string | Buffer,\n  decoding?: 'base64' | 'hex'\n) {\n  if (isBuffer(message)) {\n    throw new TosClientError('not support buffer in browser environment');\n  }\n\n  return decode(cryptoHashMd5(message), decoding);\n};\n\nexport const parse = function parse(\n  str: string,\n  encoding: 'utf-8' | 'base64' | 'hex'\n) {\n  return getEnc(encoding).parse(str);\n};\n\nexport const stringify = function stringify(\n  str: CryptoJS.lib.WordArray,\n  decoding: 'utf-8' | 'base64' | 'hex'\n) {\n  return getEnc(decoding).stringify(str);\n};\n","import crypto from 'crypto';\n\nfunction digest(v: any, decoding?: 'base64' | 'hex'): string {\n  if (!decoding) {\n    return v.digest();\n  }\n  return v.digest(decoding);\n}\n\nexport const hmacSha256 = function hmacSha256(\n  key: string,\n  message: string,\n  decoding?: 'base64' | 'hex'\n) {\n  return digest(crypto.createHmac('sha256', key).update(message), decoding);\n};\n\nexport const hashSha256 = function hashSha256(\n  message: string,\n  decoding?: 'base64' | 'hex'\n) {\n  return digest(crypto.createHash('sha256').update(message), decoding);\n};\n\nexport const hashMd5 = function hashMd5(\n  message: string | Buffer,\n  decoding?: 'base64' | 'hex'\n) {\n  return digest(crypto.createHash('md5').update(message), decoding);\n};\n\nexport const parse = function parse(\n  str: string,\n  encoding: 'utf-8' | 'base64' | 'hex'\n) {\n  return Buffer.from(str, encoding);\n};\n\nexport const stringify = function stringify(\n  str: Buffer,\n  decoding: 'utf-8' | 'base64' | 'hex'\n) {\n  return str.toString(decoding);\n};\n","import * as cryptoBrowser from './crypto.browser';\nimport * as cryptoNode from '../nodejs/crypto.nodejs';\n\ninterface CryptoModule {\n  hmacSha256: (\n    key: string,\n    message: string,\n    decoding?: 'base64' | 'hex'\n  ) => string;\n  hashSha256: (message: string, decoding?: 'base64' | 'hex') => string;\n  hashMd5: (message: string | Buffer, decoding?: 'base64' | 'hex') => string;\n  parse: (str: string, encoding: 'utf-8' | 'base64' | 'hex') => string;\n  stringify: (str: string, decoding: 'utf-8' | 'base64' | 'hex') => string;\n}\n\nlet crypto = null as unknown as CryptoModule;\nif (process.env.TARGET_ENVIRONMENT === 'node') {\n  crypto = cryptoNode as unknown as CryptoModule;\n} else {\n  crypto = cryptoBrowser as unknown as CryptoModule;\n}\n\nconst { hmacSha256, hashSha256, hashMd5, parse, stringify } = crypto;\n\nexport { hmacSha256, hashSha256, hashMd5, parse, stringify };\n","import { getNewBodyConfig, getSize } from '../utils';\nimport TOSBase from '../../base';\nimport TosClientError from '../../../TosClientError';\nimport { ReadStream, Stats } from 'fs';\nimport * as fsp from '../../../nodejs/fs-promises';\nimport { DataTransferStatus, DataTransferType } from '../../../interface';\nimport {\n  checkCRC64WithHeaders,\n  fillRequestHeaders,\n  isReadable,\n  makeRetryStreamAutoClose,\n  normalizeHeadersKey,\n  safeAwait,\n  tryDestroy,\n} from '../../../utils';\nimport { retryNamespace } from '../../../axios';\nimport { hashMd5 } from '../../../universal/crypto';\nimport { IRateLimiter } from '../../../universal/rate-limiter';\n\nexport interface UploadPartInput {\n  body: Blob | Buffer | NodeJS.ReadableStream;\n  bucket?: string;\n  key: string;\n  partNumber: number;\n  uploadId: string;\n  dataTransferStatusChange?: (status: DataTransferStatus) => void;\n  /**\n   * the simple progress feature\n   * percent is [0, 1].\n   *\n   * since uploadPart is stateless, so if `uploadPart` fail and you retry it,\n   * `percent` will start from 0 again rather than from the previous value.\n   */\n  progress?: (percent: number) => void;\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n  /**\n   * only works for nodejs environment\n   */\n  rateLimiter?: IRateLimiter;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'content-length'?: string;\n    'content-md5'?: string;\n    'x-tos-server-side-encryption-customer-algorithm'?: string;\n    'x-tos-server-side-encryption-customer-key'?: string;\n    'x-tos-server-side-encryption-customer-key-MD5'?: string;\n  };\n}\n\nexport interface UploadPartInputInner extends UploadPartInput {\n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n  beforeRetry?: () => void;\n  /**\n   * default: false\n   */\n  enableContentMD5?: boolean;\n}\n\nexport interface UploadPartOutput {\n  partNumber: number;\n  ETag: string;\n  ssecAlgorithm?: string;\n  ssecKeyMD5?: string;\n  hashCrc64ecma: string;\n  serverSideEncryption?: string;\n  serverSideEncryptionKeyId?: string;\n  /** @private unstable */\n  serverSideDataEncryption?: string;\n}\n\nexport async function _uploadPart(this: TOSBase, input: UploadPartInputInner) {\n  const { uploadId, partNumber, body, enableContentMD5 = false } = input;\n  const headers = normalizeHeadersKey(input.headers);\n  input.headers = headers;\n  fillRequestHeaders(input, [\n    'trafficLimit',\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n  ]);\n\n  const size = getSize(body);\n  if (size && headers['content-length'] == null) {\n    headers['content-length'] = size.toFixed(0);\n  }\n  if (enableContentMD5 && headers['content-md5'] == null) {\n    // current only support in nodejs\n    if (\n      process.env.TARGET_ENVIRONMENT === 'node' &&\n      isReadable(body) &&\n      input.makeRetryStream\n    ) {\n      const newStream = input.makeRetryStream();\n      if (newStream) {\n        let allContent = Buffer.from([]);\n        for await (const chunk of newStream) {\n          allContent = Buffer.concat([\n            allContent,\n            typeof chunk === 'string' ? Buffer.from(chunk) : chunk,\n          ]);\n        }\n        const md5 = hashMd5(allContent, 'base64');\n        headers['content-md5'] = md5;\n      }\n    } else {\n      console.warn(`current not support enableMD5Checksum`);\n    }\n  }\n\n  const totalSize = getSize(input.body, headers);\n  const totalSizeValid = totalSize != null;\n  if (!totalSizeValid && (input.dataTransferStatusChange || input.progress)) {\n    console.warn(\n      `Don't get totalSize of uploadPart's body, the \\`dataTransferStatusChange\\` callback will not trigger. You can use \\`uploadPartFromFile\\` instead`\n    );\n  }\n\n  let consumedBytes = 0;\n  const { dataTransferStatusChange, progress } = input;\n  const triggerDataTransfer = (\n    type: DataTransferType,\n    rwOnceBytes: number = 0\n  ) => {\n    // request cancel will make rwOnceBytes < 0 in browser\n    if (!totalSizeValid || rwOnceBytes < 0) {\n      return;\n    }\n    if (!dataTransferStatusChange && !progress) {\n      return;\n    }\n    consumedBytes += rwOnceBytes;\n\n    dataTransferStatusChange?.({\n      type,\n      rwOnceBytes,\n      consumedBytes,\n      totalBytes: totalSize,\n    });\n\n    const progressValue = (() => {\n      if (totalSize === 0) {\n        if (type === DataTransferType.Succeed) {\n          return 1;\n        }\n        return 0;\n      }\n      return consumedBytes / totalSize;\n    })();\n    if (progressValue === 1) {\n      if (type === DataTransferType.Succeed) {\n        progress?.(progressValue);\n      } else {\n        // not exec progress\n      }\n    } else {\n      progress?.(progressValue);\n    }\n  };\n  const bodyConfig = await getNewBodyConfig({\n    body: input.body,\n    dataTransferCallback: (n) => triggerDataTransfer(DataTransferType.Rw, n),\n    beforeRetry: input.beforeRetry,\n    makeRetryStream: input.makeRetryStream,\n    enableCRC: this.opts.enableCRC,\n    rateLimiter: input.rateLimiter,\n  });\n\n  triggerDataTransfer(DataTransferType.Started);\n  const task = async () => {\n    const res = await this._fetchObject<UploadPartOutput>(\n      input,\n      'PUT',\n      { partNumber, uploadId },\n      headers,\n      bodyConfig.body,\n      {\n        handleResponse: (res) => ({\n          partNumber,\n          ETag: res.headers.etag,\n          serverSideEncryption: res.headers['x-tos-server-side-encryption'],\n          serverSideDataEncryption:\n            res.headers['x-tos-server-side-data-encryption'],\n          serverSideEncryptionKeyId:\n            res.headers['x-tos-server-side-encryption-kms-key-id'],\n          ssecAlgorithm:\n            res.headers['x-tos-server-side-encryption-customer-algorithm'],\n          ssecKeyMD5:\n            res.headers['x-tos-server-side-encryption-customer-key-MD5'],\n          hashCrc64ecma: res.headers['x-tos-hash-crc64ecma'],\n        }),\n        axiosOpts: {\n          [retryNamespace]: {\n            beforeRetry: () => {\n              consumedBytes = 0;\n              bodyConfig.beforeRetry?.();\n            },\n            makeRetryStream: bodyConfig.makeRetryStream,\n          },\n          onUploadProgress: (event) => {\n            triggerDataTransfer(\n              DataTransferType.Rw,\n              event.loaded - consumedBytes\n            );\n          },\n        },\n      }\n    );\n    if (this.opts.enableCRC && bodyConfig.crc) {\n      checkCRC64WithHeaders(bodyConfig.crc, res.headers);\n    }\n    return res;\n  };\n  const [err, res] = await safeAwait(task());\n\n  // FAQ: no etag\n  if (process.env.TARGET_ENVIRONMENT === 'browser') {\n    if (res && !res.data.ETag) {\n      throw new TosClientError(\n        \"No ETag in uploadPart's response headers, please see https://www.volcengine.com/docs/6349/127737 to fix CORS problem\"\n      );\n    }\n  }\n\n  if (err || !res) {\n    triggerDataTransfer(DataTransferType.Failed);\n    throw err;\n  }\n\n  triggerDataTransfer(DataTransferType.Succeed);\n  return res;\n}\n\nexport async function uploadPart(this: TOSBase, input: UploadPartInput) {\n  return _uploadPart.call(this, input);\n}\n\ninterface UploadPartFromFileInput extends Omit<UploadPartInput, 'body'> {\n  filePath: string;\n  /**\n   * default: 0\n   */\n  offset?: number;\n\n  /**\n   * default: file size\n   */\n  partSize?: number;\n}\nexport async function uploadPartFromFile(\n  this: TOSBase,\n  input: UploadPartFromFileInput\n) {\n  if (process.env.TARGET_ENVIRONMENT !== 'node') {\n    throw new TosClientError(\n      \"uploadPartFromFile doesn't support in browser environment\"\n    );\n  }\n\n  const stats: Stats = await fsp.stat(input.filePath);\n  const start = input.offset ?? 0;\n  const end = Math.min(stats.size, start + (input.partSize ?? stats.size));\n  const makeRetryStream = makeRetryStreamAutoClose(() =>\n    fsp.createReadStream(input.filePath, {\n      start,\n      end: end - 1,\n    })\n  );\n\n  try {\n    return await _uploadPart.call(this, {\n      ...input,\n      body: makeRetryStream.make(),\n      headers: {\n        ...(input.headers || {}),\n        ['content-length']: `${end - start}`,\n      },\n      makeRetryStream: makeRetryStream.make,\n    });\n  } catch (err) {\n    tryDestroy(makeRetryStream.getLastStream(), err);\n    throw err;\n  }\n}\n","import TosClientError from '../../../TosClientError';\nimport { fillRequestHeaders } from '../../../utils';\nimport TOSBase from '../../base';\n\nexport interface CompleteMultipartUploadInput {\n  bucket?: string;\n  key: string;\n  uploadId: string;\n  parts: {\n    eTag: string;\n    partNumber: number;\n  }[];\n  /**\n   * when true `parts` param need to be empty array\n   */\n  completeAll?: boolean;\n\n  callback?: string;\n  callbackVar?: string;\n  forbidOverwrite?: boolean;\n\n  headers?: {\n    ['x-tos-forbid-overwrite']?: string;\n  };\n}\n\nexport type UploadedPart = {\n  PartNumber: number;\n  ETag: string;\n};\n\nexport interface CompleteMultipartUploadOutput {\n  Bucket: string;\n  Key: string;\n  ETag: string;\n  Location: string;\n  VersionID?: string;\n  HashCrc64ecma?: string;\n  /** the field has a value when completeAll is true\n   * when specify callback, the field will not has a value\n   */\n  CompletedParts?: UploadedPart[];\n  CallbackResult?: string;\n}\n\nexport async function completeMultipartUpload(\n  this: TOSBase,\n  input: CompleteMultipartUploadInput\n) {\n  input.headers = input.headers ?? {};\n  fillRequestHeaders(input, ['callback', 'callbackVar', 'forbidOverwrite']);\n\n  const handleResponse = (response: {\n    headers: { [x: string]: any };\n    data: CompleteMultipartUploadOutput;\n  }) => {\n    const bucket = input.bucket || this.opts.bucket || '';\n    const headers = response.headers;\n    const result: CompleteMultipartUploadOutput = {\n      ...{\n        VersionID: headers['x-tos-version-id'],\n        ETag: headers['etag'],\n        Bucket: bucket,\n        Location: headers['location'],\n        HashCrc64ecma: headers['x-tos-hash-crc64ecma'],\n        Key: input.key,\n      },\n      ...response.data,\n    };\n    if (input.callback) {\n      result.CallbackResult = `${JSON.stringify(response.data)}`;\n    }\n    return result;\n  };\n  if (input.completeAll) {\n    if (input.parts?.length > 0) {\n      throw new TosClientError(\n        `Should not specify both 'completeAll' and 'parts' params.`\n      );\n    }\n    return this._fetchObject<CompleteMultipartUploadOutput>(\n      input,\n      'POST',\n      {\n        uploadId: input.uploadId,\n      },\n      {\n        ...input.headers,\n        'x-tos-complete-all': 'yes',\n      },\n      undefined,\n      {\n        handleResponse,\n      }\n    );\n  }\n\n  return this._fetchObject<CompleteMultipartUploadOutput>(\n    input,\n    'POST',\n    {\n      uploadId: input.uploadId,\n    },\n    {\n      ...input.headers,\n    },\n    {\n      Parts: input.parts.map((it) => ({\n        ETag: it.eTag,\n        PartNumber: it.partNumber,\n      })),\n    },\n    {\n      handleResponse,\n    }\n  );\n}\n","import { Readable } from 'stream';\n\nexport class EmptyReadStream extends Readable {\n  _read(): void {\n    this.push(null);\n  }\n}\n","import TOSBase, { TosResponse } from '../../base';\nimport {\n  createMultipartUpload,\n  CreateMultipartUploadInput,\n} from './createMultipartUpload';\n\nimport { calculateSafePartSize } from './listParts';\nimport { Stats } from 'fs';\nimport { UploadPartOutput, _uploadPart } from './uploadPart';\nimport TosServerError from '../../../TosServerError';\nimport {\n  completeMultipartUpload,\n  CompleteMultipartUploadOutput,\n} from './completeMultipartUpload';\nimport { CancelToken } from 'axios';\nimport * as fsp from '../../../nodejs/fs-promises';\nimport path from 'path';\nimport TosClientError from '../../../TosClientError';\nimport { DataTransferStatus, DataTransferType } from '../../../interface';\nimport {\n  safeAwait,\n  isBlob,\n  isBuffer,\n  DEFAULT_PART_SIZE,\n  normalizeHeadersKey,\n  fillRequestHeaders,\n  makeSerialAsyncTask,\n  safeParseCheckpointFile,\n  makeRetryStreamAutoClose,\n  tryDestroy,\n} from '../../../utils';\nimport { EmptyReadStream } from '../../../nodejs/EmptyReadStream';\nimport { CancelError } from '../../../CancelError';\nimport { hashMd5 } from '../../../universal/crypto';\nimport { IRateLimiter } from '../../../interface';\nimport { validateCheckpoint } from '../utils';\nimport { combineCrc64 } from '../../../universal/crc';\nimport * as log from '../../../log';\n\nexport interface UploadFileInput extends CreateMultipartUploadInput {\n  /**\n   * if the type of `file` is string,\n   * `file` represents the file path that will be uploaded\n   */\n  file: string | File | Blob | Buffer;\n\n  /**\n   * default is 20 MB\n   *\n   * unit: B\n   */\n  partSize?: number;\n\n  /**\n   * the number of request to parallel upload partdefault value is 1\n   */\n  taskNum?: number;\n\n  // TODO: default file name is not aligned.\n  /**\n   * if checkpoint is a string and point to a exist file,\n   * the checkpoint record will recover from this file.\n   *\n   * if checkpoint is a string and point to a directory,\n   * the checkpoint will be auto generated,\n   * and its name is `{bucketName}_{objectName}.{uploadId}`.\n   */\n  checkpoint?: string | CheckpointRecord;\n\n  dataTransferStatusChange?: (status: DataTransferStatus) => void;\n\n  /**\n   * the feature of pause and continue uploading\n   */\n  uploadEventChange?: (event: UploadEvent) => void;\n\n  /**\n   * the simple progress feature\n   * percent is [0, 1]\n   */\n  progress?: (percent: number, checkpoint: CheckpointRecord) => void;\n\n  /**\n   * cancel this upload progress\n   */\n  cancelToken?: CancelToken;\n\n  /**\n   * enable md5 checksum to uploadPart method\n   *\n   * default: false\n   */\n  enableContentMD5?: boolean;\n\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n\n  /**\n   * only works for nodejs environment\n   */\n  rateLimiter?: IRateLimiter;\n}\n\nexport interface UploadFileOutput extends CompleteMultipartUploadOutput {}\n\nexport enum UploadEventType {\n  CreateMultipartUploadSucceed = 1,\n  CreateMultipartUploadFailed = 2,\n  UploadPartSucceed = 3,\n  UploadPartFailed = 4,\n  UploadPartAborted = 5,\n  CompleteMultipartUploadSucceed = 6,\n  CompleteMultipartUploadFailed = 7,\n}\n\nexport interface UploadPartInfo {\n  partNumber: number;\n  partSize: number;\n  offset: number;\n\n  // has value when upload part succeed\n  etag?: string;\n\n  // not support\n  // hashCrc64ecma?: number;\n}\n\nexport interface UploadEvent {\n  type: UploadEventType;\n\n  /**\n   * has value when event is failed or aborted\n   */\n  err?: Error;\n\n  bucket: string;\n  key: string;\n  uploadId: string;\n  checkpointFile?: string;\n  uploadPartInfo?: UploadPartInfo;\n}\n\nexport interface CheckpointRecord {\n  bucket: string;\n  key: string;\n  part_size: number;\n  upload_id: string;\n  parts_info?: CheckpointRecordPart[];\n  // Information about the file to be uploaded\n  file_info?: {\n    last_modified: number;\n    file_size: number;\n  };\n\n  // TODO: Not support the fields below\n  // ssec_algorithm?: string;\n  // ssec_key_md5?: string;\n  // encoding_type?: string;\n}\n\ninterface CheckpointRecordPart {\n  part_number: number;\n  part_size: number;\n  offset: number;\n  etag: string;\n  hash_crc64ecma: string;\n  is_completed: boolean;\n}\n\ninterface CheckpointRichInfo {\n  filePath?: string | undefined;\n\n  filePathIsPlaceholder?: boolean;\n\n  record?: CheckpointRecord;\n}\n\ninterface Task {\n  partSize: number;\n  offset: number;\n  partNumber: number;\n}\n\nconst CHECKPOINT_FILE_NAME_PLACEHOLDER = '@@checkpoint-file-placeholder@@';\nconst FILE_PARAM_CHECK_MSG = '`file` must be string, Buffer, File or Blob';\nconst ABORT_ERROR_STATUS_CODE = [403, 404, 405];\n\nexport async function uploadFile(\n  this: TOSBase,\n  input: UploadFileInput\n): Promise<TosResponse<UploadFileOutput>> {\n  const { cancelToken, enableContentMD5 = false } = input;\n  const headers = normalizeHeadersKey(input.headers);\n  input.headers = headers;\n  fillRequestHeaders(input, [\n    'encodingType',\n    'cacheControl',\n    'contentDisposition',\n    'contentEncoding',\n    'contentLanguage',\n    'contentType',\n    'expires',\n\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWriteAcp',\n\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'serverSideEncryption',\n    'serverSideDataEncryption',\n    'meta',\n    'websiteRedirectLocation',\n    'storageClass',\n  ]);\n\n  const isCancel = () => cancelToken && !!cancelToken.reason;\n  validateCheckpoint(input.checkpoint);\n\n  const fileStats: Stats | null = await (async () => {\n    if (\n      process.env.TARGET_ENVIRONMENT === 'node' &&\n      typeof input.file === 'string'\n    ) {\n      return fsp.stat(input.file);\n    }\n    return null;\n  })();\n\n  const fileSize = await (async () => {\n    const { file } = input;\n    if (fileStats) {\n      return fileStats.size;\n    }\n    if (isBuffer(file)) {\n      return file.length;\n    }\n    if (isBlob(file)) {\n      return file.size;\n    }\n    throw new TosClientError(FILE_PARAM_CHECK_MSG);\n  })();\n\n  const checkpointRichInfo = await (async (): Promise<CheckpointRichInfo> => {\n    if (process.env.TARGET_ENVIRONMENT === 'node') {\n      if (typeof input.checkpoint === 'string') {\n        const { checkpoint } = input;\n        // file doesn't exist when stat is null\n        let checkpointStat: Stats | null = null;\n        try {\n          checkpointStat = await fsp.stat(checkpoint);\n        } catch (_err) {\n          // TODO: remove any\n          const err = _err as any;\n          if (err.code === 'ENOENT') {\n            // file doesn't exist\n          } else {\n            throw err;\n          }\n        }\n\n        const isDirectory = (() => {\n          if (checkpointStat) {\n            return checkpointStat.isDirectory();\n          }\n          return checkpoint.endsWith('/');\n        })();\n\n        // TODO: this is not a right decision\n        // filePath will generated by uploadId, use placeholder temporarily\n        const filePath = isDirectory\n          ? path.resolve(checkpoint, CHECKPOINT_FILE_NAME_PLACEHOLDER)\n          : // ensure relative path require\n            path.resolve(checkpoint);\n        const dirPath = path.dirname(filePath);\n        // ensure directory exist\n        await fsp.safeMkdirRecursive(dirPath);\n\n        if (isDirectory) {\n          return {\n            filePath,\n            filePathIsPlaceholder: true,\n          };\n        }\n\n        try {\n          const record = checkpointStat\n            ? await safeParseCheckpointFile(filePath)\n            : undefined;\n          return {\n            filePath,\n            filePathIsPlaceholder: false,\n            // filePath is json file\n            // TODO: validate json schema\n            record,\n          };\n        } catch (error) {\n          console.warn(\n            'the checkpoint file is invalid JSON format. please check checkpoint file'\n          );\n          throw error;\n        }\n      }\n    }\n\n    if (typeof input.checkpoint === 'object') {\n      return {\n        record: input.checkpoint,\n      };\n    }\n\n    return {};\n  })();\n\n  // check if file info is matched\n  await (async () => {\n    if (fileStats && checkpointRichInfo.record?.file_info) {\n      const { last_modified, file_size } = checkpointRichInfo.record?.file_info;\n      if (fileStats.mtimeMs !== last_modified || fileStats.size !== file_size) {\n        console.warn(\n          `The file has been modified since ${new Date(\n            last_modified\n          )}, so the checkpoint file is invalid, and specified file will be uploaded again.`\n        );\n        delete checkpointRichInfo.record;\n      }\n    }\n  })();\n\n  const partSize = calculateSafePartSize(\n    fileSize,\n    input.partSize || checkpointRichInfo.record?.part_size || DEFAULT_PART_SIZE,\n    true\n  );\n\n  // check partSize is matched\n  if (\n    checkpointRichInfo.record &&\n    checkpointRichInfo.record.part_size !== partSize\n  ) {\n    console.warn(\n      'The partSize param does not equal the partSize in checkpoint file, ' +\n        'so the checkpoint file is invalid, and specified file will be uploaded again.'\n    );\n    delete checkpointRichInfo.record;\n  }\n\n  let bucket = input.bucket || this.opts.bucket || '';\n  const key = input.key;\n  let uploadId = '';\n  let tasks: Task[] = [];\n  const allTasks: Task[] = getAllTasks(fileSize, partSize);\n  const initConsumedBytes = (checkpointRichInfo.record?.parts_info || [])\n    .filter((it) => it.is_completed)\n    .reduce((prev, it) => prev + it.part_size, 0);\n  let consumedBytesForProgress = initConsumedBytes;\n\n  // recorded tasks\n  const recordedTasks = checkpointRichInfo.record?.parts_info || [];\n  const recordedTaskMap: Map<number, CheckpointRecordPart> = new Map();\n  recordedTasks.forEach((it) => recordedTaskMap.set(it.part_number, it));\n\n  const getCheckpointContent = () => {\n    const checkpointContent: CheckpointRecord = {\n      bucket,\n      key,\n      part_size: partSize,\n      upload_id: uploadId,\n      parts_info: recordedTasks,\n    };\n    if (fileStats) {\n      checkpointContent.file_info = {\n        last_modified: fileStats.mtimeMs,\n        file_size: fileStats.size,\n      };\n    }\n    return checkpointContent;\n  };\n  const triggerUploadEvent = (\n    e: Omit<UploadEvent, 'bucket' | 'uploadId' | 'key' | 'checkpointFile'>\n  ) => {\n    if (!input.uploadEventChange) {\n      return;\n    }\n\n    const event: UploadEvent = {\n      bucket,\n      uploadId,\n      key,\n      ...e,\n    };\n    if (checkpointRichInfo.filePath) {\n      event.checkpointFile = checkpointRichInfo.filePath;\n    }\n\n    input.uploadEventChange(event);\n  };\n  enum TriggerProgressEventType {\n    start = 1,\n    uploadPartSucceed = 2,\n    completeMultipartUploadSucceed = 3,\n  }\n  const triggerProgressEvent = (type: TriggerProgressEventType) => {\n    if (!input.progress) {\n      return;\n    }\n\n    const percent = (() => {\n      if (type === TriggerProgressEventType.start && fileSize === 0) {\n        return 0;\n      }\n      return !fileSize ? 1 : consumedBytesForProgress / fileSize;\n    })();\n\n    if (\n      consumedBytesForProgress === fileSize &&\n      type === TriggerProgressEventType.uploadPartSucceed\n    ) {\n      // 100%  complete  100% \n    } else {\n      input.progress(percent, getCheckpointContent());\n    }\n  };\n  let consumedBytes = initConsumedBytes;\n  const { dataTransferStatusChange } = input;\n  const triggerDataTransfer = (\n    type: DataTransferType,\n    rwOnceBytes: number = 0\n  ) => {\n    if (!dataTransferStatusChange) {\n      return;\n    }\n    consumedBytes += rwOnceBytes;\n\n    dataTransferStatusChange?.({\n      type,\n      rwOnceBytes,\n      consumedBytes,\n      totalBytes: fileSize,\n    });\n  };\n  const writeCheckpointFile = makeSerialAsyncTask(async () => {\n    if (\n      process.env.TARGET_ENVIRONMENT === 'node' &&\n      checkpointRichInfo.filePath\n    ) {\n      const content = JSON.stringify(getCheckpointContent(), null, 2);\n      const dirPath = path.dirname(checkpointRichInfo.filePath); // ensure directory exist\n      await fsp.safeMkdirRecursive(dirPath);\n      await fsp.writeFile(checkpointRichInfo.filePath, content, 'utf-8');\n    }\n  });\n  const rmCheckpointFile = async () => {\n    if (\n      process.env.TARGET_ENVIRONMENT === 'node' &&\n      checkpointRichInfo.filePath\n    ) {\n      await fsp.rm(checkpointRichInfo.filePath).catch((err: any) => {\n        // eat err\n        console.warn(\n          'remove checkpoint file failure, you can remove it by hand.\\n',\n          `checkpoint file path: ${checkpointRichInfo.filePath}\\n`,\n          err.message\n        );\n      });\n    }\n  };\n\n  /**\n   *\n   * @param task one part task\n   * @param uploadPartRes upload part failed if `uploadPartRes` is Error\n   */\n  const updateAfterUploadPart = async (\n    task: Task,\n    uploadPartRes:\n      | {\n          res: UploadPartOutput;\n          err?: null;\n        }\n      | {\n          err: Error;\n        }\n  ) => {\n    let existRecordTask = recordedTaskMap.get(task.partNumber);\n    if (!existRecordTask) {\n      existRecordTask = {\n        part_number: task.partNumber,\n        offset: task.offset,\n        part_size: task.partSize,\n        is_completed: false,\n        etag: '',\n        hash_crc64ecma: '',\n      };\n      recordedTasks.push(existRecordTask);\n      recordedTaskMap.set(existRecordTask.part_number, existRecordTask);\n    }\n\n    if (!uploadPartRes.err) {\n      existRecordTask.is_completed = true;\n      existRecordTask.etag = uploadPartRes.res.ETag;\n      existRecordTask.hash_crc64ecma = uploadPartRes.res.hashCrc64ecma;\n    }\n\n    await writeCheckpointFile();\n    const uploadPartInfo: UploadPartInfo = {\n      partNumber: existRecordTask.part_number,\n      partSize: existRecordTask.part_size,\n      offset: existRecordTask.offset,\n    };\n\n    if (uploadPartRes.err) {\n      const err = uploadPartRes.err;\n      let type: UploadEventType = UploadEventType.UploadPartFailed;\n\n      if (err instanceof TosServerError) {\n        if (ABORT_ERROR_STATUS_CODE.includes(err.statusCode)) {\n          type = UploadEventType.UploadPartAborted;\n        }\n      }\n\n      triggerUploadEvent({\n        type,\n        err,\n        uploadPartInfo,\n      });\n      return;\n    }\n\n    uploadPartInfo.etag = uploadPartRes.res.ETag;\n    consumedBytesForProgress += uploadPartInfo.partSize;\n\n    triggerUploadEvent({\n      type: UploadEventType.UploadPartSucceed,\n      uploadPartInfo,\n    });\n    triggerProgressEvent(TriggerProgressEventType.uploadPartSucceed);\n  };\n\n  if (checkpointRichInfo.record) {\n    bucket = checkpointRichInfo.record.bucket;\n    uploadId = checkpointRichInfo.record.upload_id;\n\n    // checkpoint info exists, so need to calculate remain tasks\n    const uploadedPartSet: Set<number> = new Set(\n      (checkpointRichInfo.record.parts_info || [])\n        .filter((it) => it.is_completed)\n        .map((it) => it.part_number)\n    );\n    tasks = allTasks.filter((it) => !uploadedPartSet.has(it.partNumber));\n  } else {\n    // createMultipartUpload will check bucket\n    try {\n      const { data: multipartRes } = await createMultipartUpload.call(\n        this,\n        input\n      );\n      if (isCancel()) {\n        throw new CancelError('cancel uploadFile');\n      }\n\n      bucket = multipartRes.Bucket;\n      uploadId = multipartRes.UploadId;\n      if (checkpointRichInfo.filePathIsPlaceholder) {\n        checkpointRichInfo.filePath = checkpointRichInfo.filePath?.replace(\n          `${CHECKPOINT_FILE_NAME_PLACEHOLDER}`,\n          getDefaultCheckpointFilePath(bucket, key)\n        );\n      }\n\n      triggerUploadEvent({\n        type: UploadEventType.CreateMultipartUploadSucceed,\n      });\n    } catch (_err) {\n      const err = _err as Error;\n      triggerUploadEvent({\n        type: UploadEventType.CreateMultipartUploadFailed,\n        err,\n      });\n      throw err;\n    }\n\n    tasks = allTasks;\n  }\n\n  triggerProgressEvent(TriggerProgressEventType.start);\n  const handleTasks = async () => {\n    let firstErr: Error | null = null;\n    const isCancelOrFirstError = () => isCancel() || !!firstErr;\n    let index = 0;\n\n    // TODO: how to test parallel does work, measure time is not right\n    await Promise.all(\n      Array.from({ length: input.taskNum || 1 }).map(async () => {\n        let makeRetryStream: ReturnType<typeof getMakeRetryStream> = undefined;\n        let consumedBytesThisTask = 0;\n        let curTask: Task | null = null;\n        let curErr: any = null;\n\n        try {\n          while (true) {\n            const currentIndex = index++;\n            if (currentIndex >= tasks.length) {\n              return;\n            }\n\n            curTask = tasks[currentIndex];\n            makeRetryStream = getMakeRetryStream(input.file, curTask);\n            function getBody(file: UploadFileInput['file'], task: Task) {\n              const { offset: start, partSize } = task;\n              const end = start + partSize;\n\n              if (makeRetryStream) {\n                return makeRetryStream.make();\n              }\n\n              if (isBlob(file)) {\n                return file.slice(start, end);\n              }\n              if (isBuffer(file)) {\n                return file.slice(start, end);\n              }\n              throw new TosClientError(FILE_PARAM_CHECK_MSG);\n            }\n\n            const { data: uploadPartRes } = await _uploadPart.call(this, {\n              bucket,\n              key,\n              uploadId,\n              body: getBody(input.file, curTask),\n              enableContentMD5,\n              makeRetryStream: makeRetryStream?.make,\n              beforeRetry: () => {\n                consumedBytes -= consumedBytesThisTask;\n                consumedBytesThisTask = 0;\n              },\n              partNumber: curTask.partNumber,\n              headers: {\n                ['content-length']: `${curTask.partSize}`,\n                ['x-tos-server-side-encryption-customer-algorithm']:\n                  headers['x-tos-server-side-encryption-customer-algorithm'],\n                ['x-tos-server-side-encryption-customer-key']:\n                  headers['x-tos-server-side-encryption-customer-key'],\n                ['x-tos-server-side-encryption-customer-key-md5']:\n                  headers['x-tos-server-side-encryption-customer-key-md5'],\n              },\n              dataTransferStatusChange(status) {\n                if (status.type !== DataTransferType.Rw) {\n                  return;\n                }\n                if (isCancelOrFirstError()) {\n                  return;\n                }\n                consumedBytesThisTask += status.rwOnceBytes;\n                triggerDataTransfer(status.type, status.rwOnceBytes);\n              },\n              trafficLimit: input.trafficLimit,\n              rateLimiter: input.rateLimiter,\n            });\n\n            if (isCancel()) {\n              throw new CancelError('cancel uploadFile');\n            }\n            if (firstErr) {\n              // this error is only internal\n              throw new CancelError(\n                'cancel uploadFile by internal error(`firstErr`)'\n              );\n            }\n\n            await updateAfterUploadPart(curTask, { res: uploadPartRes });\n          }\n        } catch (_err) {\n          curErr = _err as any;\n          if (!firstErr) {\n            firstErr = curErr;\n          }\n        }\n\n        try {\n          if (curErr) {\n            if (curTask) {\n              await updateAfterUploadPart(curTask, { err: curErr });\n            }\n          } else {\n            tryDestroy(makeRetryStream?.getLastStream(), curErr);\n            consumedBytes -= consumedBytesThisTask;\n            consumedBytesThisTask = 0;\n          }\n        } catch (err) {\n          log.TOS(\n            'error while clearing resources of `uploadFile` task, err:',\n            err\n          );\n        }\n      })\n    );\n\n    if (firstErr) {\n      throw firstErr;\n    }\n\n    const parts = (getCheckpointContent().parts_info || []).map((it) => ({\n      eTag: it.etag,\n      partNumber: it.part_number,\n    }));\n\n    const [err, res] = await safeAwait(\n      completeMultipartUpload.call(this, {\n        bucket,\n        key,\n        uploadId,\n        parts,\n      })\n    );\n\n    if (err || !res) {\n      triggerUploadEvent({\n        type: UploadEventType.CompleteMultipartUploadFailed,\n      });\n      throw err;\n    }\n\n    triggerUploadEvent({\n      type: UploadEventType.CompleteMultipartUploadSucceed,\n    });\n    triggerProgressEvent(\n      TriggerProgressEventType.completeMultipartUploadSucceed\n    );\n    await rmCheckpointFile();\n\n    if (\n      this.opts.enableCRC &&\n      res.data.HashCrc64ecma &&\n      combineCRCInParts(getCheckpointContent()) !== res.data.HashCrc64ecma\n    ) {\n      throw new TosClientError('crc of entire file mismatch.');\n    }\n\n    return res;\n  };\n\n  triggerDataTransfer(DataTransferType.Started);\n  const [err, res] = await safeAwait(handleTasks());\n  if (err || !res) {\n    triggerDataTransfer(DataTransferType.Failed);\n    throw err;\n  }\n  triggerDataTransfer(DataTransferType.Succeed);\n  return res;\n}\n\nexport default uploadFile;\n\n/**\n *  totalSize  0 Part Server  read request body failed\n */\nfunction getAllTasks(totalSize: number, partSize: number) {\n  const tasks: Task[] = [];\n  for (let i = 0; ; ++i) {\n    const offset = i * partSize;\n    const currPartSize = Math.min(partSize, totalSize - offset);\n\n    tasks.push({\n      offset,\n      partSize: currPartSize,\n      partNumber: i + 1,\n    });\n\n    if ((i + 1) * partSize >= totalSize) {\n      break;\n    }\n  }\n\n  return tasks;\n}\n\nfunction getMakeRetryStream(file: UploadFileInput['file'], task: Task) {\n  const { offset: start, partSize } = task;\n  const end = start + partSize;\n\n  if (process.env.TARGET_ENVIRONMENT === 'node' && typeof file === 'string') {\n    return makeRetryStreamAutoClose(() => {\n      if (!partSize) {\n        return new EmptyReadStream();\n      }\n      return fsp.createReadStream(file, {\n        start,\n        end: end - 1,\n      });\n    });\n  }\n\n  return undefined;\n}\n\nfunction getDefaultCheckpointFilePath(bucket: string, key: string) {\n  const originPath = `${key}.${hashMd5(`${bucket}.${key}`, 'hex')}.upload`;\n  const normalizePath = originPath.replace(/[\\\\/]/g, '');\n  return normalizePath;\n}\n\nfunction combineCRCInParts(cp: CheckpointRecord) {\n  const size = cp.file_info?.file_size || 0;\n  let res = '0';\n  const sortedPartsInfo =\n    cp.parts_info?.sort?.((a, b) => a.part_number - b.part_number) ?? [];\n  for (const part of sortedPartsInfo) {\n    res = combineCrc64(\n      res,\n      part.hash_crc64ecma,\n      Math.min(part.part_size, size - part.offset)\n    );\n  }\n  return res;\n}\n","export enum ACLType {\n  ACLPrivate = 'private',\n  ACLPublicRead = 'public-read',\n  ACLPublicReadWrite = 'public-read-write',\n  ACLAuthenticatedRead = 'authenticated-read',\n  ACLBucketOwnerRead = 'bucket-owner-read',\n  ACLBucketOwnerFullControl = 'bucket-owner-full-control',\n  // only works for object ACL\n  ACLBucketOwnerEntrusted = 'bucket-owner-entrusted',\n  /**\n   * @private unstable value for object ACL\n   */\n  ACLDefault = 'default',\n}\n\nexport enum StorageClassType {\n  // storage-class will inherit from bucket if uploading object without `x-tos-storage-class` header\n  StorageClassStandard = 'STANDARD',\n  StorageClassIa = 'IA',\n  StorageClassArchiveFr = 'ARCHIVE_FR',\n  StorageClassColdArchive = 'COLD_ARCHIVE',\n  StorageClassIntelligentTiering = 'INTELLIGENT_TIERING',\n  StorageClassArchive = 'ARCHIVE',\n  StorageClassDeepColdArchive = 'DEEP_COLD_ARCHIVE',\n}\n\nexport enum MetadataDirectiveType {\n  MetadataDirectiveCopy = 'COPY',\n  MetadataDirectiveReplace = 'REPLACE',\n}\n\nexport enum AzRedundancyType {\n  AzRedundancySingleAz = 'single-az',\n  AzRedundancyMultiAz = 'multi-az',\n}\n\nexport enum PermissionType {\n  PermissionRead = 'READ',\n  PermissionWrite = 'WRITE',\n  PermissionReadAcp = 'READ_ACP',\n  PermissionWriteAcp = 'WRITE_ACP',\n  PermissionFullControl = 'FULL_CONTROL',\n  /**\n   * @private unstable value for ACL\n   */\n  PermissionReadNONLIST = 'READ_NON_LIST',\n}\n\nexport enum GranteeType {\n  GranteeGroup = 'Group',\n  GranteeUser = 'CanonicalUser',\n}\n\nexport enum CannedType {\n  CannedAllUsers = 'AllUsers',\n  CannedAuthenticatedUsers = 'AuthenticatedUsers',\n}\n\nexport enum HttpMethodType {\n  HttpMethodGet = 'GET',\n  HttpMethodPut = 'PUT',\n  HttpMethodPost = 'POST',\n  HttpMethodDelete = 'DELETE',\n  HttpMethodHead = 'HEAD',\n}\n\nexport enum StorageClassInheritDirectiveType {\n  StorageClassInheritDirectiveDestinationBucket = 'DESTINATION_BUCKET',\n  StorageClassInheritDirectiveSourceObject = 'SOURCE_OBJECT',\n}\n\nexport enum ReplicationStatusType {\n  Complete = 'COMPLETE',\n  Pending = 'PENDING',\n  Failed = 'FAILED',\n  Replica = 'REPLICA',\n}\n\nexport enum LifecycleStatusType {\n  Enabled = 'Enabled',\n  Disabled = 'Disabled',\n}\n\nexport enum RedirectType {\n  Mirror = 'Mirror',\n  Async = 'Async',\n}\n\nexport enum StatusType {\n  Enabled = 'Enabled',\n  Disabled = 'Disabled',\n}\n\nexport enum TierType {\n  TierStandard = 'Standard',\n  TierExpedited = 'Expedited',\n  TierBulk = 'Bulk',\n}\n\nexport enum VersioningStatusType {\n  Enabled = 'Enabled',\n  Suspended = 'Suspended',\n  NotSet = '',\n\n  /**\n   * @deprecated use `Enabled` instead\n   */\n  Enable = 'Enabled',\n  /**\n   * @deprecated use `NotSet` instead\n   */\n  Disable = '',\n}\n\n/**\n * @private unstable\n */\nexport enum AccessPointStatusType {\n  Ready = 'READY',\n  Creating = 'CREATING',\n  Created = 'CREATED',\n  Deleting = 'DELETING',\n}\n\n/**\n * @private unstable\n */\nexport enum TransferAccelerationStatusType {\n  Activating = 'AccelerationActivating',\n  Activated = 'AccelerationActivated',\n  Terminated = 'AccelerationTerminated',\n}\n\n/**\n * @private unstable\n */\nexport enum MRAPMirrorBackRedirectPolicyType {\n  ClosestFirst = 'Closest-First',\n  LatestFirst = 'Latest-First',\n}\n\n/**\n * @private unstable\n */\nexport enum WorkflowExecutionStateType {\n  Success = 'Success',\n  Running = 'Running',\n  Submitted = 'Submitted',\n  Failed = 'Failed',\n}\n\n/** @private unstable */\nexport enum FileCompressFlatten {\n  /** Preserve directory structure */\n  KeepStructure = 0,\n  /** Flatten all directory structures */\n  FlattenAll = 1,\n  /** Create directory based on Prefix (Prefix mode only) */\n  PrefixAsDirectory = 2,\n  /** Only package contents under Prefix (Prefix mode only) */\n  PrefixContentsOnly = 3,\n}\n\n/**\n * @private unstable\n */\nexport enum FileUncompressPrefixReplaced {\n  /** No extra prefix added */\n  NoExtraPrefix = 0,\n  /** Use the archive name as the prefix */\n  WithArchiveName = 1,\n  /** Preserve the full archive path */\n  FullArchivePath = 2,\n}\n\n/**\n * @private unstable\n */\nexport enum AccessPointStatus {\n  Enable = 'enable',\n  Disable = 'disable',\n  Creating = 'creating',\n  Deleting = 'deleting',\n}\n\n/**\n * @private unstable\n */\nexport enum AcceleratorPrefetchJobStatus {\n  Null = 'NULL',\n  Idle = 'IDLE',\n  Running = 'RUNNING',\n  Stopping = 'STOPPING',\n  Complete = 'COMPLETE',\n}\n\n/**\n * @private unstable\n */\nexport enum AuditJobStateType {\n  Submitted = 'Submitted',\n  Running = 'Running',\n  Success = 'Success',\n  Failed = 'Failed',\n  Paused = 'Paused',\n  Canceled = 'Canceled',\n}\n\n/**\n * @private unstable\n */\nexport enum AuditScanType {\n  Manifest = 'Manifest',\n  Scan = 'Scan',\n}\n\n/**\n * @private unstable\n */\nexport enum AuditType {\n  Image = 'image',\n  Video = 'video',\n  Audio = 'audio',\n}\n\n/**\n * @private unstable\n */\nexport enum CallbackTriggerModeType {\n  Freeze = 'freeze',\n  Sensitive = 'sensitive',\n  Failure = 'failure',\n}\n\n/**\n * @private unstable\n */\nexport enum FreezeModeType {\n  Archive = 'archive',\n  Private = 'private',\n}\n\n/**\n * @private unstable\n */\nexport enum TemplateTagType {\n  AudioConvert = 'AudioConvert',\n  Transcode = 'Transcode',\n}\n\n/**\n * @private unstable\n */\nexport enum AudioContainerFormatType {\n  Wav = 'wav',\n  Mp3 = 'mp3',\n  Aac = 'aac',\n  Flac = 'flac',\n  Oga = 'oga',\n  Ac3 = 'ac3',\n  Opus = 'opus',\n}\n\n/**\n * @private unstable\n */\nexport enum ContainerFormatType {\n  Mp4 = 'mp4',\n  Ts = 'ts',\n}\n\n/**\n * @private unstable\n */\nexport enum SampleFormatType {\n  Fltp = 'fltp',\n  S16p = 's16p',\n  S32p = 's32p',\n  S16 = 's16',\n  S32 = 's32',\n}\n\nexport enum DataType {\n  DataTypeFloat32 = 'float32',\n}\n\nexport enum DistanceMetricType {\n  DistanceMetricEuclidean = 'euclidean',\n  DistanceMetricCosine = 'cosine',\n}\n","import { StorageClass } from '../../interface';\nimport { fillRequestHeaders, normalizeHeadersKey } from '../../utils';\nimport TOSBase from '../base';\nimport { ReplicationStatusType } from '../../TosExportEnum';\nimport { RestoreInfo, TosHeader } from './sharedTypes';\nimport { getRestoreInfoFromHeaders } from './utils';\n\nexport interface HeadObjectInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n\n  ifMatch?: string;\n  ifModifiedSince?: string;\n  ifNoneMatch?: string;\n  ifUnmodifiedSince?: string;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'If-Match'?: string;\n    'If-Modified-Since'?: string;\n    'If-None-Match'?: string;\n    'If-Unmodified-Since'?: string;\n    'x-tos-server-side-encryption-customer-algorithm'?: string;\n    'x-tos-server-side-encryption-customer-key'?: string;\n    'x-tos-server-side-encryption-customer-key-md5'?: string;\n  };\n}\n\nexport interface HeadObjectOutput {\n  [key: string]: string | undefined | object;\n  'content-length': string;\n  'last-modified': string;\n  'content-md5': string;\n  etag: string;\n  'x-tos-object-type'?: 'Appendable' | 'Symlink';\n  'x-tos-delete-marker'?: string;\n  'x-tos-server-side-encryption-customer-algorithm'?: string;\n  'x-tos-server-side-encryption-customer-key-md5'?: string;\n  'x-tos-version-id'?: string;\n  'x-tos-website-redirect-location'?: string;\n  'x-tos-hash-crc64ecma'?: string;\n  'x-tos-storage-class': StorageClass;\n  'x-tos-server-side-encryption'?: string;\n  'x-tos-replication-status'?: ReplicationStatusType;\n  'x-tos-symlink-target-size'?: string;\n  RestoreInfo?: RestoreInfo;\n  ReplicationStatus?: ReplicationStatusType;\n}\n\nexport async function headObject(\n  this: TOSBase,\n  input: HeadObjectInput | string\n) {\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const headers = normalizeHeadersKey(normalizedInput.headers);\n  normalizedInput.headers = headers;\n\n  const query: Record<string, any> = {};\n  if (normalizedInput.versionId) {\n    query.versionId = normalizedInput.versionId;\n  }\n\n  fillRequestHeaders(normalizedInput, [\n    'ifMatch',\n    'ifModifiedSince',\n    'ifNoneMatch',\n    'ifUnmodifiedSince',\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n  ]);\n\n  return this._fetchObject<HeadObjectOutput>(\n    input,\n    'HEAD',\n    query,\n    normalizedInput?.headers || {},\n    undefined,\n    {\n      handleResponse: (res) => {\n        const result = {\n          ...res.headers,\n          ReplicationStatus: res.headers[TosHeader.HeaderReplicationStatus],\n        };\n        const info = getRestoreInfoFromHeaders(res.headers);\n\n        if (info) {\n          result.RestoreInfo = info;\n        }\n        return result;\n      },\n    }\n  );\n}\n\nexport default headObject;\n","import {\n  fillRequestHeaders,\n  safeAwait,\n  normalizeHeadersKey,\n  requestHeadersMap,\n} from '../../../utils';\nimport TOSBase from '../../base';\nimport { getCopySourceHeaderValue } from '../utils';\n\nexport interface UploadPartCopyInput {\n  bucket?: string;\n  key: string;\n  partNumber: number;\n  uploadId: string;\n\n  srcBucket?: string;\n  srcKey?: string;\n  srcVersionID?: string;\n  copySourceRange?: string;\n  copySourceRangeStart?: number;\n  copySourceRangeEnd?: number;\n  copySourceSSECAlgorithm?: string;\n  copySourceSSECKey?: string;\n  copySourceSSECKeyMD5?: string;\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n  headers?: {\n    [key: string]: string | undefined;\n    'x-tos-copy-source'?: string;\n    'x-tos-copy-source-range'?: string;\n    'x-tos-copy-source-if-match'?: string;\n    'x-tos-copy-source-if-modified-since'?: string;\n    'x-tos-copy-source-if-none-match'?: string;\n    'x-tos-copy-source-if-unmodified-since'?: string;\n    'x-tos-copy-source-server-side-encryption-customer-algorithm'?: string;\n    'x-tos-copy-source-server-side-encryption-customer-key'?: string;\n    'x-tos-copy-source-server-side-encryption-customer-key-MD5'?: string;\n  };\n}\n\nexport interface UploadPartCopyOutput {\n  ETag: string;\n  LastModified: string;\n  SSECAlgorithm: string;\n  SSECKeyMD5: string;\n}\n\nexport async function uploadPartCopy(\n  this: TOSBase,\n  input: UploadPartCopyInput\n) {\n  const { uploadId, partNumber } = input;\n  const headers = normalizeHeadersKey(input.headers);\n  input.headers = headers;\n  fillRequestHeaders(input, [\n    'copySourceRange',\n    'copySourceSSECAlgorithm',\n    'copySourceSSECKey',\n    'copySourceSSECKeyMD5',\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'trafficLimit',\n  ]);\n  if (input.srcBucket && input.srcKey) {\n    let copySource = getCopySourceHeaderValue(input.srcBucket, input.srcKey);\n    if (input.srcVersionID) {\n      copySource += `?versionId=${input.srcVersionID}`;\n    }\n    headers['x-tos-copy-source'] = headers['x-tos-copy-source'] ?? copySource;\n  }\n\n  if (\n    input.copySourceRange == null &&\n    (input.copySourceRangeStart != null || input.copySourceRangeEnd != null)\n  ) {\n    const start =\n      input.copySourceRangeStart != null ? `${input.copySourceRangeStart}` : '';\n    const end =\n      input.copySourceRangeEnd != null ? `${input.copySourceRangeEnd}` : '';\n    const copyRange = `bytes=${start}-${end}`;\n    headers['x-tos-copy-source-range'] =\n      headers['x-tos-copy-source-range'] ?? copyRange;\n  }\n\n  const [err, res] = await safeAwait(\n    this._fetchObject<UploadPartCopyOutput>(\n      input,\n      'PUT',\n      { partNumber, uploadId },\n      headers,\n      undefined,\n      {\n        handleResponse(response) {\n          return {\n            ...response.data,\n            SSECAlgorithm:\n              response.headers[requestHeadersMap['ssecAlgorithm'] as string],\n            SSECKeyMD5:\n              response.headers[requestHeadersMap['ssecKeyMD5'] as string],\n          };\n        },\n      }\n    )\n  );\n\n  if (err || !res || !res.data.ETag) {\n    // TODO: throw TosServerErr\n    throw err;\n  }\n\n  return res;\n}\n","import {\n  safeAwait,\n  normalizeHeadersKey,\n  fillRequestHeaders,\n} from '../../utils';\nimport { StorageClass, ServerSideEncryption, Acl } from '../../interface';\nimport TOSBase, { TosResponse } from '../base';\nimport { StorageClassType } from '../../TosExportEnum';\nimport { getCopySourceHeaderValue } from './utils';\n\nexport interface CopyObjectInput {\n  bucket?: string;\n  key: string;\n\n  srcBucket?: string;\n  srcKey?: string;\n  srcVersionID?: string;\n  cacheControl?: string;\n  contentDisposition?: string;\n  contentEncoding?: string;\n  contentLanguage?: string;\n  contentType?: string;\n  expires?: Date;\n\n  copySourceIfMatch?: string;\n  copySourceIfModifiedSince?: string | Date;\n  copySourceIfNoneMatch?: string;\n  copySourceIfUnmodifiedSince?: string;\n  copySourceSSECAlgorithm?: string;\n  copySourceSSECKey?: string;\n  copySourceSSECKeyMD5?: string;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n  serverSideEncryption?: string;\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWriteAcp?: string;\n\n  metadataDirective?: string;\n  meta?: Record<string, string>;\n  websiteRedirectLocation?: string;\n  storageClass?: StorageClassType;\n  ifMatch?: string;\n  forbidOverwrite?: boolean;\n\n  headers?: {\n    [key: string]: string | undefined;\n    ['x-tos-copy-source']?: string;\n    ['x-tos-acl']?: string;\n    ['x-tos-copy-source-if-match']?: string;\n    ['x-tos-copy-source-if-modified-since']?: string;\n    ['x-tos-copy-source-if-none-match']?: string;\n    ['x-tos-copy-source-if-unmodified-since']?: string;\n    ['x-tos-copy-source-server-side-encryption-customer-algorithm']?: string;\n    ['x-tos-copy-source-server-side-encryption-customer-key']?: string;\n    ['x-tos-copy-source-server-side-encryption-customer-key-MD5']?: string;\n    ['x-tos-grant-full-control']?: string;\n    ['x-tos-grant-read']?: string;\n    ['x-tos-grant-read-acp']?: string;\n    ['x-tos-metadata-directive']?: string;\n    ['x-tos-website-redirect-location']?: string;\n    ['x-tos-storage-class']?: StorageClass;\n    ['x-tos-server-side-encryption']?: ServerSideEncryption;\n    ['x-tos-forbid-overwrite']?: string;\n    'If-Match'?: string;\n  };\n}\n\ninterface CopyObjectBody {\n  ETag: string;\n}\n\nexport interface CopyObjectOutput extends CopyObjectBody {}\n\nexport async function copyObject(\n  this: TOSBase,\n  input: CopyObjectInput\n): Promise<TosResponse<CopyObjectOutput>> {\n  const headers = normalizeHeadersKey(input.headers);\n  input.headers = headers;\n  fillRequestHeaders(input, [\n    'cacheControl',\n    'contentDisposition',\n    'contentEncoding',\n    'contentLanguage',\n    'contentType',\n    'expires',\n\n    'copySourceIfMatch',\n    'copySourceIfModifiedSince',\n    'copySourceIfNoneMatch',\n    'copySourceIfUnmodifiedSince',\n    'copySourceSSECAlgorithm',\n    'copySourceSSECKey',\n    'copySourceSSECKeyMD5',\n\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWriteAcp',\n\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'serverSideEncryption',\n\n    'metadataDirective',\n    'meta',\n    'websiteRedirectLocation',\n    'storageClass',\n    'trafficLimit',\n    'forbidOverwrite',\n    'ifMatch',\n  ]);\n  if (input.srcBucket && input.srcKey) {\n    let copySource = getCopySourceHeaderValue(input.srcBucket, input.srcKey);\n    if (input.srcVersionID) {\n      copySource += `?versionId=${input.srcVersionID}`;\n    }\n    headers['x-tos-copy-source'] = headers['x-tos-copy-source'] ?? copySource;\n  }\n\n  const [err, res] = await safeAwait(\n    this._fetchObject<CopyObjectBody>(input, 'PUT', {}, headers)\n  );\n\n  if (err || !res || !res.data.ETag) {\n    // TODO: throw TosServerErr\n    throw err;\n  }\n  return res;\n}\n\nexport default copyObject;\n","import TOSBase, { TosResponse } from '../../base';\nimport {\n  createMultipartUpload,\n  CreateMultipartUploadInput,\n} from './createMultipartUpload';\n\nimport { calculateSafePartSize } from './listParts';\nimport { Stats } from 'fs';\nimport { UploadPartOutput, _uploadPart } from './uploadPart';\nimport TosServerError from '../../../TosServerError';\nimport {\n  completeMultipartUpload,\n  CompleteMultipartUploadOutput,\n} from './completeMultipartUpload';\nimport { CancelToken } from 'axios';\nimport * as fsp from '../../../nodejs/fs-promises';\nimport path from 'path';\nimport {\n  makeSerialAsyncTask,\n  safeAwait,\n  safeParseCheckpointFile,\n} from '../../../utils';\nimport { CancelError } from '../../../CancelError';\nimport headObject from '../headObject';\nimport { uploadPartCopy, UploadPartCopyOutput } from './uploadPartCopy';\nimport { Headers } from '../../../interface';\nimport copyObject from '../copyObject';\nimport { getCopySourceHeaderValue, validateCheckpoint } from '../utils';\nimport cloneDeep from 'lodash/cloneDeep';\nimport TosClientError from '../../../TosClientError';\n\nexport interface ResumableCopyObjectInput extends CreateMultipartUploadInput {\n  srcBucket: string;\n  srcKey: string;\n  srcVersionId?: string;\n\n  /**\n   * default is 20 MB\n   */\n  partSize?: number;\n\n  /**\n   * the number of request to parallel upload partdefault value is 1\n   */\n  taskNum?: number;\n\n  /**\n   * if checkpoint is a string and point to a exist file,\n   * the checkpoint record will recover from this file.\n   *\n   * if checkpoint is a string and point to a directory,\n   * the checkpoint will be auto generated,\n   * and its name is\n   * `{srcBucketName}.{srcObjectName}.{srcVersionId}.{bucketName}.{objectName}.copy`.\n   */\n  checkpoint?: string | ResumableCopyCheckpointRecord;\n\n  /**\n   * the callback of copy event\n   */\n  copyEventListener?: (event: ResumableCopyEvent) => void;\n\n  /**\n   * the simple progress feature\n   * percent is [0, 1]\n   */\n  progress?: (\n    percent: number,\n    checkpoint: ResumableCopyCheckpointRecord\n  ) => void;\n\n  /**\n   * is axios CancelToken\n   */\n  cancelToken?: CancelToken;\n\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n}\n\nexport interface UploadFileOutput extends CompleteMultipartUploadOutput {}\n\nexport enum ResumableCopyEventType {\n  CreateMultipartUploadSucceed = 1,\n  CreateMultipartUploadFailed = 2,\n  UploadPartCopySucceed = 3,\n  UploadPartCopyFailed = 4,\n  UploadPartCopyAborted = 5,\n  CompleteMultipartUploadSucceed = 6,\n  CompleteMultipartUploadFailed = 7,\n}\n\nexport interface CopyPartInfo {\n  partNumber: number;\n  copySourceRangeStart: number;\n  copySourceRangeEnd: number;\n\n  // has value when upload part succeed\n  etag?: string;\n}\n\nexport interface ResumableCopyEvent {\n  type: ResumableCopyEventType;\n\n  /**\n   * has value when event is failed or aborted\n   */\n  err?: Error;\n\n  bucket: string;\n  key: string;\n  uploadId?: string;\n  checkpointFile?: string;\n  copyPartInfo?: CopyPartInfo;\n}\n\nexport interface ResumableCopyCheckpointRecord {\n  bucket: string;\n  key: string;\n  part_size: number;\n  upload_id: string;\n  parts_info?: ResumableCopyCheckpointRecordPart[];\n  // Information about the file to be uploaded\n  copy_source_object_info: {\n    etag: string;\n    hash_crc64ecma: string;\n    last_modified: string;\n    object_size: number;\n  };\n  // TODO: more information\n}\n\ninterface ResumableCopyCheckpointRecordPart {\n  part_number: number;\n  copy_source_range_start: number;\n  copy_source_range_end: number;\n  etag: string;\n  is_completed: boolean;\n}\n\ninterface CheckpointRichInfo {\n  filePath?: string | undefined;\n\n  filePathIsPlaceholder?: boolean;\n\n  record?: ResumableCopyCheckpointRecord;\n}\n\ninterface Task {\n  partSize: number;\n  offset: number;\n  partNumber: number;\n}\n\nconst CHECKPOINT_FILE_NAME_PLACEHOLDER = '@@checkpoint-file-placeholder@@';\nconst ABORT_ERROR_STATUS_CODE = [403, 404, 405];\nexport const DEFAULT_PART_SIZE = 20 * 1024 * 1024; // 20 MB\n\nexport async function resumableCopyObject(\n  this: TOSBase,\n  input: ResumableCopyObjectInput\n): Promise<TosResponse<UploadFileOutput>> {\n  const { cancelToken } = input;\n  const isCancel = () => cancelToken && !!cancelToken.reason;\n  validateCheckpoint(input.checkpoint);\n\n  const { data: objectStats } = await headObject.call(this, {\n    bucket: input.srcBucket,\n    key: input.srcKey,\n    versionId: input.srcVersionId,\n  });\n  const etag = objectStats['etag'];\n  const objectSize = +objectStats['content-length'];\n\n  const checkpointRichInfo = await (async (): Promise<CheckpointRichInfo> => {\n    if (process.env.TARGET_ENVIRONMENT === 'node') {\n      if (typeof input.checkpoint === 'string') {\n        const { checkpoint } = input;\n        // file doesn't exist when stat is null\n        let checkpointStat: Stats | null = null;\n        try {\n          checkpointStat = await fsp.stat(checkpoint);\n        } catch (_err) {\n          // TODO: remove any\n          const err = _err as any;\n          if (err.code === 'ENOENT') {\n            // file doesn't exist\n          } else {\n            throw err;\n          }\n        }\n\n        const isDirectory = (() => {\n          if (checkpointStat) {\n            return checkpointStat.isDirectory();\n          }\n          return checkpoint.endsWith('/');\n        })();\n\n        // filePath will generated by uploadId, use placeholder temporarily\n        const filePath = isDirectory\n          ? path.resolve(checkpoint, CHECKPOINT_FILE_NAME_PLACEHOLDER)\n          : path.resolve(checkpoint);\n        const dirPath = path.dirname(filePath);\n        // ensure directory exist\n        await fsp.safeMkdirRecursive(dirPath);\n\n        if (isDirectory) {\n          return {\n            filePath,\n            filePathIsPlaceholder: true,\n          };\n        }\n\n        return {\n          filePath,\n          filePathIsPlaceholder: false,\n          // filePath is json file\n          // TODO: validate json schema\n          record: checkpointStat\n            ? await safeParseCheckpointFile(filePath)\n            : undefined,\n        };\n      }\n    }\n\n    if (typeof input.checkpoint === 'object') {\n      return {\n        record: input.checkpoint,\n      };\n    }\n\n    return {};\n  })();\n\n  // check if file info is matched\n  await (async () => {\n    if (checkpointRichInfo.record?.copy_source_object_info) {\n      const { last_modified, object_size } =\n        checkpointRichInfo.record?.copy_source_object_info;\n      if (\n        // TODO: `last-modified` aligns to number\n        objectStats['last-modified'] !== last_modified ||\n        +objectStats['content-length'] !== object_size\n      ) {\n        console.warn(\n          `The file has been modified since ${new Date(\n            last_modified\n          )}, so the checkpoint file is invalid, and specified file will be uploaded again.`\n        );\n        delete checkpointRichInfo.record;\n      }\n    }\n  })();\n\n  const partSize = calculateSafePartSize(\n    objectSize,\n    input.partSize || checkpointRichInfo.record?.part_size || DEFAULT_PART_SIZE,\n    true\n  );\n\n  // check partSize is matched\n  if (\n    checkpointRichInfo.record &&\n    checkpointRichInfo.record.part_size !== partSize\n  ) {\n    console.warn(\n      'The partSize param does not equal the partSize in checkpoint file, ' +\n        'so the checkpoint file is invalid, and specified file will be uploaded again.'\n    );\n    delete checkpointRichInfo.record;\n  }\n\n  let bucket = input.bucket || this.opts.bucket || '';\n  const key = input.key;\n  let uploadId = '';\n  let tasks: Task[] = [];\n  const allTasks: Task[] = getAllTasks(objectSize, partSize);\n  const initConsumedBytes = (checkpointRichInfo.record?.parts_info || [])\n    .filter((it) => it.is_completed)\n    .reduce(\n      (prev, it) =>\n        prev + it.copy_source_range_end - it.copy_source_range_start + 1,\n      0\n    );\n  let consumedBytesForProgress = initConsumedBytes;\n\n  // recorded tasks\n  const recordedTasks = checkpointRichInfo.record?.parts_info || [];\n  const recordedTaskMap: Map<number, ResumableCopyCheckpointRecordPart> =\n    new Map();\n  recordedTasks.forEach((it) => recordedTaskMap.set(it.part_number, it));\n\n  const getCheckpointContent = () => {\n    const checkpointContent: ResumableCopyCheckpointRecord = {\n      bucket,\n      key,\n      part_size: partSize,\n      upload_id: uploadId,\n      parts_info: recordedTasks,\n      copy_source_object_info: {\n        last_modified: objectStats['last-modified'],\n        etag: objectStats.etag,\n        hash_crc64ecma: objectStats['x-tos-hash-crc64ecma'] || '',\n        object_size: +objectStats['content-length'],\n      },\n    };\n    return checkpointContent;\n  };\n  const triggerUploadEvent = (\n    e: Omit<\n      ResumableCopyEvent,\n      'bucket' | 'uploadId' | 'key' | 'checkpointFile'\n    >\n  ) => {\n    if (!input.copyEventListener) {\n      return;\n    }\n\n    const event: ResumableCopyEvent = {\n      bucket,\n      uploadId,\n      key,\n      ...e,\n    };\n    if (checkpointRichInfo.filePath) {\n      event.checkpointFile = checkpointRichInfo.filePath;\n    }\n\n    input.copyEventListener(event);\n  };\n  enum TriggerProgressEventType {\n    start = 1,\n    uploadPartSucceed = 2,\n    completeMultipartUploadSucceed = 3,\n  }\n  const triggerProgressEvent = (type: TriggerProgressEventType) => {\n    if (!input.progress) {\n      return;\n    }\n\n    const percent = (() => {\n      if (type === TriggerProgressEventType.start && objectSize === 0) {\n        return 0;\n      }\n      return !objectSize ? 1 : consumedBytesForProgress / objectSize;\n    })();\n\n    if (\n      consumedBytesForProgress === objectSize &&\n      type === TriggerProgressEventType.uploadPartSucceed\n    ) {\n      // 100%  complete  100% \n    } else {\n      input.progress(percent, getCheckpointContent());\n    }\n  };\n\n  const writeCheckpointFile = makeSerialAsyncTask(async () => {\n    if (\n      process.env.TARGET_ENVIRONMENT === 'node' &&\n      checkpointRichInfo.filePath\n    ) {\n      const content = JSON.stringify(getCheckpointContent(), null, 2);\n      const dirPath = path.dirname(checkpointRichInfo.filePath); // ensure directory exist\n      await fsp.safeMkdirRecursive(dirPath);\n      await fsp.writeFile(checkpointRichInfo.filePath, content, 'utf-8');\n    }\n  });\n  const rmCheckpointFile = async () => {\n    if (\n      process.env.TARGET_ENVIRONMENT === 'node' &&\n      checkpointRichInfo.filePath\n    ) {\n      await fsp.rm(checkpointRichInfo.filePath).catch((err: any) => {\n        // eat err\n        console.warn(\n          'remove checkpoint file failure, you can remove it by hand.\\n',\n          `checkpoint file path: ${checkpointRichInfo.filePath}\\n`,\n          err.message\n        );\n      });\n    }\n  };\n\n  /**\n   *\n   * @param task one part task\n   * @param uploadPartRes upload part failed if `uploadPartRes` is Error\n   */\n  const updateAfterUploadPart = async (\n    task: Task,\n    uploadPartRes:\n      | {\n          res: UploadPartCopyOutput;\n          err?: null;\n        }\n      | {\n          err: Error;\n        }\n  ) => {\n    let existRecordTask = recordedTaskMap.get(task.partNumber);\n    const rangeStart = task.offset;\n    const rangeEnd = Math.min(task.offset + partSize - 1, objectSize - 1);\n    if (!existRecordTask) {\n      existRecordTask = {\n        part_number: task.partNumber,\n        copy_source_range_start: rangeStart,\n        copy_source_range_end: rangeEnd,\n        is_completed: false,\n        etag: '',\n      };\n      recordedTasks.push(existRecordTask);\n      recordedTaskMap.set(existRecordTask.part_number, existRecordTask);\n    }\n\n    if (!uploadPartRes.err) {\n      existRecordTask.is_completed = true;\n      existRecordTask.etag = uploadPartRes.res.ETag;\n    }\n\n    await writeCheckpointFile();\n    const copyPartInfo: CopyPartInfo = {\n      partNumber: existRecordTask.part_number,\n      copySourceRangeEnd: existRecordTask.copy_source_range_end,\n      copySourceRangeStart: existRecordTask.copy_source_range_start,\n    };\n\n    if (uploadPartRes.err) {\n      const err = uploadPartRes.err;\n      let type: ResumableCopyEventType =\n        ResumableCopyEventType.UploadPartCopyFailed;\n\n      if (err instanceof TosServerError) {\n        if (ABORT_ERROR_STATUS_CODE.includes(err.statusCode)) {\n          type = ResumableCopyEventType.UploadPartCopyAborted;\n        }\n      }\n\n      triggerUploadEvent({\n        type,\n        err,\n        copyPartInfo,\n      });\n      return;\n    }\n\n    copyPartInfo.etag = uploadPartRes.res.ETag;\n    consumedBytesForProgress +=\n      copyPartInfo.copySourceRangeEnd - copyPartInfo.copySourceRangeStart + 1;\n\n    triggerUploadEvent({\n      type: ResumableCopyEventType.UploadPartCopySucceed,\n      copyPartInfo,\n    });\n    triggerProgressEvent(TriggerProgressEventType.uploadPartSucceed);\n  };\n\n  if (checkpointRichInfo.record) {\n    bucket = checkpointRichInfo.record.bucket;\n    uploadId = checkpointRichInfo.record.upload_id;\n\n    // checkpoint info exists, so need to calculate remain tasks\n    const uploadedPartSet: Set<number> = new Set(\n      (checkpointRichInfo.record.parts_info || [])\n        .filter((it) => it.is_completed)\n        .map((it) => it.part_number)\n    );\n    tasks = allTasks.filter((it) => !uploadedPartSet.has(it.partNumber));\n  } else {\n    // createMultipartUpload will check bucket\n    try {\n      const { data: multipartRes } = await createMultipartUpload.call(\n        this,\n        cloneDeep(input)\n      );\n      if (isCancel()) {\n        throw new CancelError('cancel uploadFile');\n      }\n\n      bucket = multipartRes.Bucket;\n      uploadId = multipartRes.UploadId;\n      if (checkpointRichInfo.filePathIsPlaceholder) {\n        checkpointRichInfo.filePath = checkpointRichInfo.filePath?.replace(\n          `${CHECKPOINT_FILE_NAME_PLACEHOLDER}`,\n          getDefaultCheckpointFilePath({\n            ...input,\n            bucket,\n          })\n        );\n      }\n\n      triggerUploadEvent({\n        type: ResumableCopyEventType.CreateMultipartUploadSucceed,\n      });\n    } catch (_err) {\n      const err = _err as Error;\n      triggerUploadEvent({\n        type: ResumableCopyEventType.CreateMultipartUploadFailed,\n        err,\n      });\n      throw err;\n    }\n\n    tasks = allTasks;\n  }\n\n  const handleTasks = async () => {\n    let firstErr: Error | null = null;\n    let index = 0;\n\n    // TODO: how to test parallel does work, measure time is not right\n    await Promise.all(\n      Array.from({ length: input.taskNum || 1 }).map(async () => {\n        while (true) {\n          const currentIndex = index++;\n          if (currentIndex >= tasks.length) {\n            return;\n          }\n\n          const curTask = tasks[currentIndex];\n          try {\n            let copySource = getCopySourceHeaderValue(\n              input.srcBucket,\n              input.srcKey\n            );\n            if (input.srcVersionId) {\n              copySource += `?versionId=${input.srcVersionId}`;\n            }\n            const copyRange = `bytes=${curTask.offset}-${\n              curTask.offset + curTask.partSize - 1\n            }`;\n            const headers: Headers = {\n              ...input.headers,\n              ['x-tos-copy-source']: copySource,\n              ['x-tos-copy-source-if-match']: etag,\n              ['x-tos-copy-source-range']: copyRange,\n            };\n\n            if (!curTask.partSize) {\n              delete headers['x-tos-copy-source-range'];\n            }\n            const { data: uploadPartRes } = await uploadPartCopy.call(this, {\n              bucket,\n              key,\n              uploadId,\n              partNumber: curTask.partNumber,\n              headers,\n              trafficLimit: input.trafficLimit,\n            });\n\n            if (isCancel()) {\n              throw new CancelError('cancel resumableCopyObject');\n            }\n\n            await updateAfterUploadPart(curTask, { res: uploadPartRes });\n          } catch (_err) {\n            const err = _err as any;\n\n            if (isCancelError(err)) {\n              throw err;\n            }\n\n            if (isCancel()) {\n              throw new CancelError('cancel resumableCopyObject');\n            }\n\n            if (!firstErr) {\n              firstErr = err;\n            }\n            await updateAfterUploadPart(curTask, { err });\n          }\n        }\n      })\n    );\n\n    if (firstErr) {\n      throw firstErr;\n    }\n\n    const parts = (getCheckpointContent().parts_info || []).map((it) => ({\n      eTag: it.etag,\n      partNumber: it.part_number,\n    }));\n\n    const [err, res] = await safeAwait(\n      completeMultipartUpload.call(this, {\n        bucket,\n        key,\n        uploadId,\n        parts,\n      })\n    );\n\n    if (err || !res) {\n      triggerUploadEvent({\n        type: ResumableCopyEventType.CompleteMultipartUploadFailed,\n      });\n      throw err;\n    }\n\n    triggerUploadEvent({\n      type: ResumableCopyEventType.CompleteMultipartUploadSucceed,\n    });\n    triggerProgressEvent(\n      TriggerProgressEventType.completeMultipartUploadSucceed\n    );\n\n    const sourceCRC64 =\n      getCheckpointContent().copy_source_object_info.hash_crc64ecma;\n    const actualCrc64 = res.data.HashCrc64ecma;\n    if (\n      this.opts.enableCRC &&\n      sourceCRC64 &&\n      actualCrc64 &&\n      sourceCRC64 !== actualCrc64\n    ) {\n      throw new TosClientError(\n        `validate file crc64 failed. Expect crc64 ${sourceCRC64}, actual crc64 ${actualCrc64}. Please try again.`\n      );\n    }\n\n    await rmCheckpointFile();\n\n    return res;\n  };\n\n  const handleEmptyObj = async (): Promise<TosResponse<UploadFileOutput>> => {\n    let copySource = getCopySourceHeaderValue(input.srcBucket, input.srcKey);\n    if (input.srcVersionId) {\n      copySource += `?versionId=${input.srcVersionId}`;\n    }\n    const headers: Headers = {\n      ...input.headers,\n      ['x-tos-copy-source']: copySource,\n      ['x-tos-copy-source-if-match']: etag,\n    };\n\n    const [err, res] = await safeAwait(\n      copyObject.call(this, {\n        bucket: input.bucket,\n        key: input.key,\n        headers,\n        trafficLimit: input.trafficLimit,\n      })\n    );\n    if (err || !res) {\n      triggerUploadEvent({\n        type: ResumableCopyEventType.UploadPartCopyFailed,\n      });\n      throw err;\n    }\n\n    triggerProgressEvent(\n      TriggerProgressEventType.completeMultipartUploadSucceed\n    );\n    triggerUploadEvent({\n      type: ResumableCopyEventType.UploadPartCopySucceed,\n      copyPartInfo: {\n        partNumber: 0,\n        copySourceRangeStart: 0,\n        copySourceRangeEnd: 0,\n      },\n    });\n    triggerUploadEvent({\n      type: ResumableCopyEventType.CompleteMultipartUploadSucceed,\n    });\n\n    return {\n      ...res,\n      data: {\n        ETag: res.headers['etag'] || '',\n        Bucket: bucket,\n        Key: key,\n        Location: `http${this.opts.secure ? 's' : ''}://${bucket}.${\n          this.opts.endpoint\n        }/${key}`,\n        VersionID: res.headers['x-tos-version-id'],\n        HashCrc64ecma: res.headers['x-tos-hash-crc64ecma'],\n      },\n    };\n  };\n\n  triggerProgressEvent(TriggerProgressEventType.start);\n  return objectSize === 0 ? handleEmptyObj() : handleTasks();\n}\n\nexport function isCancelError(err: any) {\n  return err instanceof CancelError;\n}\n\nexport default resumableCopyObject;\n\n/**\n *  totalSize  0 Part Server  read request body failed\n */\nfunction getAllTasks(totalSize: number, partSize: number) {\n  const tasks: Task[] = [];\n  for (let i = 0; ; ++i) {\n    const offset = i * partSize;\n    const currPartSize = Math.min(partSize, totalSize - offset);\n\n    tasks.push({\n      offset,\n      partSize: currPartSize,\n      partNumber: i + 1,\n    });\n\n    if ((i + 1) * partSize >= totalSize) {\n      break;\n    }\n  }\n\n  return tasks;\n}\n\nfunction getDefaultCheckpointFilePath(\n  opts: Pick<\n    ResumableCopyObjectInput,\n    'srcBucket' | 'srcKey' | 'srcVersionId' | 'key'\n  > & {\n    bucket: string;\n  }\n) {\n  const originPath = [\n    opts.srcBucket,\n    opts.srcKey,\n    opts.srcVersionId,\n    opts.bucket,\n    opts.key,\n    'copy',\n  ]\n    .filter(Boolean)\n    .join('.');\n\n  const normalizePath = originPath.replace(/[\\\\/]/g, '');\n  return normalizePath;\n}\n","import { createWriteStream } from '../../nodejs/fs-promises';\nimport TosClientError from '../../TosClientError';\nimport { DataTransferStatus, DataTransferType, Headers } from '../../interface';\nimport {\n  fillRequestHeaders,\n  fillRequestQuery,\n  streamToBuf,\n  isReadable,\n  normalizeHeadersKey,\n  safeAwait,\n} from '../../utils';\nimport TOSBase, { TosResponse } from '../base';\nimport {\n  IRateLimiter,\n  createRateLimiterStream,\n} from '../../universal/rate-limiter';\nimport { getRestoreInfoFromHeaders, isValidRateLimiter } from './utils';\nimport { createReadNReadStream } from '../../nodejs/EmitReadStream';\nimport { RestoreInfo, TosHeader } from './sharedTypes';\nimport { ReplicationStatusType } from '../../TosExportEnum';\n\nexport interface GetObjectInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'If-Modified-Since'?: string;\n    'If-Unmodified-Since'?: string;\n    'If-Match'?: string;\n    'If-None-Match'?: string;\n    'x-tos-server-side-encryption-customer-key'?: string;\n    'x-tos-server-side-encryption-customer-key-md5'?: string;\n    'x-tos-server-side-encryption-customer-algorithm'?: string;\n    Range?: string;\n  };\n  response?: Headers & {\n    'cache-control'?: string;\n    'content-disposition'?: string;\n    'content-encoding'?: string;\n    'content-language'?: string;\n    'content-type'?: string;\n    expires?: string;\n  };\n}\n\n/**\n * @deprecated use getObjectV2 instead\n * @returns arraybuffer\n */\nexport async function getObject(this: TOSBase, input: GetObjectInput | string) {\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const query: Record<string, any> = {};\n  if (normalizedInput.versionId) {\n    query.versionId = normalizedInput.versionId;\n  }\n  const headers: Headers = normalizeHeadersKey(normalizedInput?.headers);\n  const response: Partial<Headers> = normalizedInput?.response || {};\n  Object.keys(response).forEach((key: string) => {\n    const v = response[key];\n    if (v != null) {\n      query[`response-${key}`] = v;\n    }\n  });\n\n  // TODO: maybe need to return response's headers\n  return this._fetchObject<Buffer>(input, 'GET', query, headers, undefined, {\n    axiosOpts: { responseType: 'arraybuffer' },\n  });\n}\n\ntype DataType = 'stream' | 'buffer' | 'blob';\nexport interface GetObjectV2Input {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n\n  /**\n   * The type of return value, 'stream' | 'blob'\n   * default: 'stream'\n   *\n   * nodejs environment can use 'stream' and 'buffer'\n   * browser environment can use 'blob'\n   */\n  dataType?: DataType;\n\n  ifMatch?: string;\n  ifModifiedSince?: string | Date;\n  ifNoneMatch?: string;\n  ifUnmodifiedSince?: string | Date;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n  /**\n   * only works for nodejs environment\n   */\n  rateLimiter?: IRateLimiter;\n\n  range?: string;\n  rangeStart?: number;\n  rangeEnd?: number;\n\n  process?: string;\n  // need base64url encode\n  saveBucket?: string;\n  // need base64url encode\n  saveObject?: string;\n\n  responseCacheControl?: string;\n  responseContentDisposition?: string;\n  responseContentEncoding?: string;\n  responseContentLanguage?: string;\n  responseContentType?: string;\n  responseExpires?: Date;\n\n  dataTransferStatusChange?: (status: DataTransferStatus) => void;\n  /**\n   * the simple progress feature\n   * percent is [0, 1].\n   */\n  progress?: (percent: number) => void;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'If-Modified-Since'?: string;\n    'If-Unmodified-Since'?: string;\n    'If-Match'?: string;\n    'If-None-Match'?: string;\n    'x-tos-server-side-encryption-customer-key'?: string;\n    'x-tos-server-side-encryption-customer-key-md5'?: string;\n    'x-tos-server-side-encryption-customer-algorithm'?: string;\n    range?: string;\n  };\n  /**\n   * @deprecated use responseXxx options instead\n   */\n  response?: Headers & {\n    'cache-control'?: string;\n    'content-disposition'?: string;\n    'content-encoding'?: string;\n    'content-language'?: string;\n    'content-type'?: string;\n    expires?: string;\n  };\n}\nexport interface GetObjectV2Output {\n  content: NodeJS.ReadableStream | Buffer | Blob;\n  etag: string;\n  lastModified: string;\n\n  // object created before tos server supports crc, hashCrc64ecma will be empty string\n  hashCrc64ecma: string;\n  RestoreInfo?: RestoreInfo;\n  ReplicationStatus?: ReplicationStatusType;\n}\n\nexport interface GetObjectV2OutputStream\n  extends Omit<GetObjectV2Output, 'content'> {\n  content: NodeJS.ReadableStream;\n}\nexport interface GetObjectV2InputBuffer\n  extends Omit<GetObjectV2Input, 'dataType'> {\n  dataType: 'buffer';\n}\nexport interface GetObjectV2OutputBuffer\n  extends Omit<GetObjectV2Output, 'content'> {\n  content: Buffer;\n}\nexport interface GetObjectV2InputBlob\n  extends Omit<GetObjectV2Input, 'dataType'> {\n  dataType: 'blob';\n}\nexport interface GetObjectV2OutputBlob\n  extends Omit<GetObjectV2Output, 'content'> {\n  content: Blob;\n}\n\nconst NODEJS_DATATYPE: DataType[] = ['stream', 'buffer'];\nconst BROWSER_DATATYPE: DataType[] = ['blob'];\n\nfunction checkSupportDataType(dataType: DataType) {\n  let environment: 'node' | 'browser' = 'node';\n  let supportDataTypes: DataType[] = [];\n  if (process.env.TARGET_ENVIRONMENT === 'node') {\n    environment = 'node';\n    supportDataTypes = NODEJS_DATATYPE;\n  } else {\n    environment = 'browser';\n    supportDataTypes = BROWSER_DATATYPE;\n  }\n  if (!supportDataTypes.includes(dataType)) {\n    throw new TosClientError(\n      `The value of \\`dataType\\` only supports \\`${supportDataTypes.join(\n        ' | '\n      )}\\` in ${environment} environment`\n    );\n  }\n}\n\n/**\n * `getObjectV2` default returns stream, using `dataType` param to return other type(eg: buffer, blob)\n */\nasync function getObjectV2(\n  this: TOSBase,\n  input: GetObjectV2InputBlob\n): Promise<TosResponse<GetObjectV2OutputBlob>>;\nasync function getObjectV2(\n  this: TOSBase,\n  input: GetObjectV2InputBuffer\n): Promise<TosResponse<GetObjectV2OutputBuffer>>;\nasync function getObjectV2(\n  this: TOSBase,\n  input: GetObjectV2Input | string\n): Promise<TosResponse<GetObjectV2OutputStream>>;\nasync function getObjectV2(\n  this: TOSBase,\n  input: GetObjectV2Input | string\n): Promise<TosResponse<GetObjectV2Output>> {\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const headers = normalizeHeadersKey(normalizedInput.headers);\n  normalizedInput.headers = headers;\n  const dataType = normalizedInput.dataType || 'stream';\n  normalizedInput.dataType = dataType;\n\n  checkSupportDataType(dataType);\n\n  const query: Record<string, unknown> = {};\n  const response: Partial<Headers> = normalizedInput?.response || {};\n  Object.keys(response).forEach((key: string) => {\n    const v = response[key];\n    if (v != null) {\n      query[`response-${key}`] = v;\n    }\n  });\n  fillRequestQuery(normalizedInput, query, [\n    'versionId',\n    'process',\n    'saveBucket',\n    'saveObject',\n    'responseCacheControl',\n    'responseContentDisposition',\n    'responseContentEncoding',\n    'responseContentLanguage',\n    'responseContentType',\n    'responseExpires',\n  ]);\n\n  fillRequestHeaders(normalizedInput, [\n    'ifMatch',\n    'ifModifiedSince',\n    'ifNoneMatch',\n    'ifUnmodifiedSince',\n\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n\n    'range',\n    'trafficLimit',\n  ]);\n\n  if (\n    normalizedInput.range == null &&\n    (normalizedInput.rangeStart != null || normalizedInput.rangeEnd != null)\n  ) {\n    const start =\n      normalizedInput.rangeStart != null ? `${normalizedInput.rangeStart}` : '';\n    const end =\n      normalizedInput.rangeEnd != null ? `${normalizedInput.rangeEnd}` : '';\n    const range = `bytes=${start}-${end}`;\n    headers['range'] = headers['range'] ?? range;\n  }\n\n  const responseType = (() => {\n    if (process.env.TARGET_ENVIRONMENT === 'node') {\n      return 'stream';\n    }\n    return 'arraybuffer';\n  })();\n\n  let consumedBytes = 0;\n  // totalSize is unknown when start download\n  let totalSize = -1;\n  const { dataTransferStatusChange, progress } = normalizedInput;\n  const triggerDataTransfer = (\n    type: DataTransferType,\n    rwOnceBytes: number = 0\n  ) => {\n    // request cancel will make rwOnceBytes < 0 in browser\n    if (rwOnceBytes < 0) {\n      return;\n    }\n    if (!dataTransferStatusChange && !progress) {\n      return;\n    }\n    consumedBytes += rwOnceBytes;\n    dataTransferStatusChange?.({\n      type,\n      rwOnceBytes,\n      consumedBytes,\n      totalBytes: totalSize,\n    });\n    const progressValue = (() => {\n      // `totalSize` is unknown if it's in start or fail\n      if (totalSize < 0) {\n        return 0;\n      }\n\n      if (totalSize === 0) {\n        if (type === DataTransferType.Succeed) {\n          return 1;\n        }\n        return 0;\n      }\n      return consumedBytes / totalSize;\n    })();\n    if (progressValue === 1) {\n      if (type === DataTransferType.Succeed) {\n        progress?.(progressValue);\n      } else {\n        // not exec progress\n      }\n    } else {\n      progress?.(progressValue);\n    }\n  };\n\n  triggerDataTransfer(DataTransferType.Started);\n  const [err, res] = await safeAwait(\n    this._fetchObject<any>(input, 'GET', query, headers, undefined, {\n      axiosOpts: {\n        responseType,\n        onDownloadProgress: (event) => {\n          totalSize = event.total;\n          triggerDataTransfer(\n            DataTransferType.Rw,\n            event.loaded - consumedBytes\n          );\n        },\n      },\n    })\n  );\n  if (err || !res) {\n    triggerDataTransfer(DataTransferType.Failed);\n    throw err;\n  }\n\n  let resHeaders = res.headers;\n  let newData: NodeJS.ReadableStream | Blob | Buffer = res.data;\n  totalSize = +(resHeaders['content-length'] || 0);\n\n  if (process.env.TARGET_ENVIRONMENT === 'node') {\n    // res.data must be a stream in nodejs environment\n    if (isReadable(newData)) {\n      if (\n        normalizedInput.rateLimiter &&\n        isValidRateLimiter(normalizedInput.rateLimiter)\n      ) {\n        newData = createRateLimiterStream(\n          newData as NodeJS.ReadableStream,\n          normalizedInput.rateLimiter\n        );\n      }\n\n      newData = createReadNReadStream(newData, (n) =>\n        triggerDataTransfer(DataTransferType.Rw, n)\n      );\n      newData.on('end', () => triggerDataTransfer(DataTransferType.Succeed));\n\n      if (dataType === 'buffer') {\n        // consume stream after `createRateLimiterStream`\n        newData = await streamToBuf(newData);\n      }\n    } else {\n      // should not enter this branch\n    }\n  } else {\n    // \n    if (dataType === 'blob') {\n      newData = new Blob([res.data], {\n        type: resHeaders['content-type'],\n      });\n    }\n    triggerDataTransfer(DataTransferType.Succeed);\n  }\n\n  const actualRes: TosResponse<GetObjectV2Output> = {\n    ...res,\n    data: {\n      content: newData,\n      etag: resHeaders['etag'] || '',\n      lastModified: resHeaders['last-modified'] || '',\n      hashCrc64ecma: resHeaders['x-tos-hash-crc64ecma'] || '',\n      ReplicationStatus: resHeaders[TosHeader.HeaderReplicationStatus] as\n        | ReplicationStatusType\n        | undefined,\n    },\n  };\n\n  const info = getRestoreInfoFromHeaders(resHeaders);\n  if (info) {\n    actualRes.data.RestoreInfo = info;\n  }\n  return actualRes;\n}\n\ninterface GetObjectToFileInput extends Omit<GetObjectV2Input, 'dataType'> {\n  filePath: string;\n}\ninterface GetObjectToFileOutput extends Omit<GetObjectV2Output, 'content'> {}\n\nexport async function getObjectToFile(\n  this: TOSBase,\n  input: GetObjectToFileInput\n): Promise<TosResponse<GetObjectToFileOutput>> {\n  if (process.env.TARGET_ENVIRONMENT !== 'node') {\n    throw new TosClientError(\n      \"getObjectToFile doesn't support in browser environment\"\n    );\n  }\n\n  return new Promise(async (resolve, reject) => {\n    const getObjectRes = await getObjectV2.call(this, input);\n    const stream = getObjectRes.data.content;\n\n    const fsWriteStream = createWriteStream(input.filePath);\n    stream.pipe(fsWriteStream);\n    stream.on('error', (err) => fsWriteStream.destroy(err));\n    fsWriteStream.on('error', (err) => reject(err));\n    fsWriteStream.on('finish', () => {\n      const newData: any = { ...getObjectRes.data };\n      delete newData.content;\n      resolve({ ...getObjectRes, data: { ...newData } });\n    });\n  });\n}\n\nexport { getObjectV2 };\n","import TOSBase, { TosResponse } from '../base';\nimport {\n  DEFAULT_PART_SIZE,\n  isCancelError,\n  makeSerialAsyncTask,\n  safeParseCheckpointFile,\n} from '../../utils';\nimport * as fsp from '../../nodejs/fs-promises';\nimport { DataTransferStatus, DataTransferType } from '../../interface';\nimport headObject, { HeadObjectInput, HeadObjectOutput } from './headObject';\nimport { CancelToken } from 'axios';\nimport { Stats } from 'fs';\nimport path from 'path';\nimport TosClientError from '../../TosClientError';\nimport { getObjectV2, GetObjectV2Output } from './getObject';\nimport TosServerError from '../../TosServerError';\nimport { CancelError } from '../../CancelError';\nimport { IRateLimiter } from '../../universal/rate-limiter';\nimport { validateCheckpoint } from './utils';\nimport { createCrcReadStream } from '../../nodejs/CrcReadStream';\nimport { CRC } from '../../universal/crc';\nimport { combineCrc64 } from '../../universal/crc';\n\nexport interface DownloadFileCheckpointRecord {\n  bucket: string;\n  key: string;\n  version_id?: string;\n  part_size: number;\n\n  object_info: {\n    etag: string;\n    hash_crc64ecma: string;\n    object_size: number;\n    last_modified: string;\n  };\n\n  file_info: {\n    file_path: string;\n    temp_file_path: string;\n  };\n\n  parts_info: DownloadFileCheckpointRecordPartInfo[];\n}\n\nexport interface DownloadFileCheckpointRecordPartInfo {\n  part_number: number;\n  range_start: number;\n  range_end: number;\n  hash_crc64ecma: string;\n  is_completed: boolean;\n}\n\nexport interface DownloadFileInput extends HeadObjectInput {\n  filePath: string;\n  /**\n   * @private unstable tempFilePath\n   */\n  tempFilePath?: string;\n\n  /**\n   * default is 20 MB\n   *\n   * unit: B\n   */\n  partSize?: number;\n\n  /**\n   * the number of request to parallel upload partdefault value is 1\n   */\n  taskNum?: number;\n\n  /**\n   * if checkpoint is a string and point to a exist file,\n   * the checkpoint record will recover from this file.\n   *\n   * if checkpoint is a string and point to a directory,\n   * the checkpoint will be auto generated,\n   * and its name is `{bucketName}_{objectName}.{uploadId}`.\n   */\n  checkpoint?: string | DownloadFileCheckpointRecord;\n\n  dataTransferStatusChange?: (status: DataTransferStatus) => void;\n\n  /**\n   * the simple progress feature\n   * percent is [0, 1]\n   */\n  progress?: (\n    percent: number,\n    checkpoint: DownloadFileCheckpointRecord\n  ) => void;\n\n  /**\n   * the feature of pause and continue downloading\n   */\n  downloadEventChange?: (event: DownloadEvent) => void;\n\n  /**\n   * cancel this upload progress\n   */\n  cancelToken?: CancelToken;\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n  /**\n   * only works for nodejs environment\n   */\n  rateLimiter?: IRateLimiter;\n\n  /**\n   * @private unstable\n   * custom rename file to support not overwrite file\n   */\n  customRenameFileAfterDownloadCompleted?: (\n    tempFilePath: string,\n    filePath: string\n  ) => void;\n\n  /**\n   * @private unstable\n   * enable sparse file when object size is greater than part size\n   * only works on nodejs environment & windows platform\n   * mac & linux os  support sparse file by default\n   */\n  enableSparseFile?: boolean;\n\n  /**\n   * @private unstable\n   * write stream watermark\n   * only works on nodejs environment\n   * unit: byte\n   */\n  writeStreamHighWaterMark?: number;\n}\nexport interface DownloadFileOutput extends HeadObjectOutput {}\n\nexport interface DownloadEvent {\n  type: DownloadEventType;\n  err?: Error;\n\n  bucket: string;\n  key: string;\n  versionId?: string;\n  filePath: string;\n  checkpointFile?: string;\n  downloadPartInfo?: DownloadPartInfo;\n}\n\nexport interface DownloadPartInfo {\n  partNumber: number;\n  rangeStart: number;\n  rangeEnd: number;\n}\n\nexport enum DownloadEventType {\n  CreateTempFileSucceed = 1,\n  CreateTempFileFailed,\n  DownloadPartSucceed,\n  DownloadPartFailed,\n  DownloadPartAborted,\n  RenameTempFileSucceed,\n  RenameTempFileFailed,\n}\n\ninterface CheckpointRichInfo {\n  filePath?: string | undefined;\n\n  filePathIsPlaceholder?: boolean;\n\n  record?: DownloadFileCheckpointRecord;\n}\n\ninterface Task {\n  partSize: number;\n  offset: number;\n  partNumber: number;\n}\n\nconst CHECKPOINT_FILE_NAME_PLACEHOLDER = '@@checkpoint-file-placeholder@@';\nconst ABORT_ERROR_STATUS_CODE = [403, 404, 405];\n\nexport async function downloadFile(\n  this: TOSBase,\n  input: DownloadFileInput\n): Promise<TosResponse<DownloadFileOutput>> {\n  if (process.env.TARGET_ENVIRONMENT === 'browser') {\n    throw new TosClientError(\n      '`downloadFile` is not supported in browser environment'\n    );\n  }\n  const { cancelToken, versionId, enableSparseFile, writeStreamHighWaterMark } = input;\n  const isCancel = () => cancelToken && !!cancelToken.reason;\n  validateCheckpoint(input.checkpoint);\n\n  const headObjectRes = await headObject.call(this, {\n    bucket: input.bucket,\n    key: input.key,\n    versionId,\n  });\n  const { data: objectStats } = headObjectRes;\n  const etag = objectStats['etag'];\n  const symlinkTargetSize = objectStats['x-tos-symlink-target-size'] ?? 0;\n  const objectSize =\n    objectStats['x-tos-object-type'] === 'Symlink'\n      ? +symlinkTargetSize\n      : +objectStats['content-length'];\n\n  const checkpointRichInfo = await (async (): Promise<CheckpointRichInfo> => {\n    if (process.env.TARGET_ENVIRONMENT === 'node') {\n      if (typeof input.checkpoint === 'string') {\n        const { checkpoint } = input;\n        // file doesn't exist when stat is null\n        let checkpointStat: Stats | null = null;\n        try {\n          checkpointStat = await fsp.stat(checkpoint);\n        } catch (_err) {\n          // TODO: remove any\n          const err = _err as any;\n          if (err.code === 'ENOENT') {\n            // file doesn't exist\n          } else {\n            throw err;\n          }\n        }\n\n        const isDirectory = (() => {\n          if (checkpointStat) {\n            return checkpointStat.isDirectory();\n          }\n          return checkpoint.endsWith('/');\n        })();\n\n        // filePath will generated by uploadId, use placeholder temporarily\n        const filePath = isDirectory\n          ? path.resolve(checkpoint, CHECKPOINT_FILE_NAME_PLACEHOLDER)\n          : checkpoint;\n        const dirPath = path.dirname(filePath);\n        // ensure directory exist\n        await fsp.safeMkdirRecursive(dirPath);\n\n        if (isDirectory) {\n          return {\n            filePath,\n            filePathIsPlaceholder: true,\n          };\n        }\n\n        return {\n          filePath,\n          filePathIsPlaceholder: false,\n          // filePath is json file\n          // TODO: validate json schema\n          record: checkpointStat\n            ? await safeParseCheckpointFile(filePath)\n            : undefined,\n        };\n      }\n    }\n\n    if (typeof input.checkpoint === 'object') {\n      return {\n        record: input.checkpoint,\n      };\n    }\n\n    return {};\n  })();\n\n  // check if file info is matched\n  await (async () => {\n    if (checkpointRichInfo.record?.object_info) {\n      const { last_modified, object_size } =\n        checkpointRichInfo.record?.object_info;\n      if (\n        // TODO: `last-modified` aligns to number\n        objectStats['last-modified'] !== last_modified ||\n        objectSize !== object_size\n      ) {\n        console.warn(\n          `The file has been modified since ${new Date(\n            last_modified\n          )}, so the checkpoint file is invalid, and specified object will be downloaded again.`\n        );\n        delete checkpointRichInfo.record;\n      }\n    }\n  })();\n\n  const partSize =\n    input.partSize || checkpointRichInfo.record?.part_size || DEFAULT_PART_SIZE;\n\n  // check partSize is matched\n  if (\n    checkpointRichInfo.record &&\n    checkpointRichInfo.record.part_size !== partSize\n  ) {\n    console.warn(\n      'The partSize param does not equal the partSize in checkpoint file, ' +\n        'so the checkpoint file is invalid, and specified object will be downloaded again.'\n    );\n    delete checkpointRichInfo.record;\n  }\n\n  let bucket = input.bucket || this.opts.bucket || '';\n  const key = input.key;\n  const filePath = await (async () => {\n    let filePathStats: Stats | null = null;\n    try {\n      filePathStats = await fsp.stat(input.filePath);\n    } catch (_err) {\n      const err = _err as any;\n      if (err.code === 'ENOENT') {\n        // file doesn't exist\n      } else {\n        throw err;\n      }\n    }\n\n    const isDirectory = (() => {\n      if (filePathStats) {\n        return filePathStats.isDirectory();\n      }\n      return input.filePath.endsWith('/');\n    })();\n    const filePath = isDirectory\n      ? path.resolve(input.filePath, key)\n      : input.filePath;\n\n    const dirPath = path.dirname(filePath);\n    await fsp.safeMkdirRecursive(dirPath);\n\n    return filePath;\n  })();\n  const [tempFilePath, isExist] = await (async () => {\n    const tempFilePath = input.tempFilePath\n      ? input.tempFilePath\n      : filePath + '.temp';\n    let isExist = true;\n    try {\n      await fsp.stat(tempFilePath);\n    } catch (_err) {\n      const err = _err as any;\n      if (err.code === 'ENOENT') {\n        isExist = false;\n        // file doesn't exist\n      } else {\n        throw err;\n      }\n    }\n    return [tempFilePath, isExist];\n  })();\n  if (checkpointRichInfo.record) {\n    if (!isExist) {\n      console.warn(\n        \"The temp file doesn't not exist \" +\n          'so the checkpoint file is invalid, and specified object will be downloaded again.'\n      );\n      delete checkpointRichInfo.record;\n    }\n  }\n\n  let tasks: Task[] = [];\n  const allTasks: Task[] = getAllTasks(objectSize, partSize);\n  const initConsumedBytes = (checkpointRichInfo.record?.parts_info || [])\n    .filter((it) => it.is_completed)\n    .reduce((prev, it) => prev + (it.range_end - it.range_start + 1), 0);\n\n  // recorded tasks\n  const recordedTasks = checkpointRichInfo.record?.parts_info || [];\n  const recordedTaskMap: Map<number, DownloadFileCheckpointRecordPartInfo> =\n    new Map();\n  recordedTasks.forEach((it) => recordedTaskMap.set(it.part_number, it));\n\n  const nextEnsureCloseFd = async () => {\n    const getCheckpointContent = () => {\n      const checkpointContent: DownloadFileCheckpointRecord = {\n        bucket,\n        key,\n        version_id: versionId,\n        part_size: partSize,\n        parts_info: recordedTasks,\n        file_info: {\n          file_path: filePath,\n          temp_file_path: tempFilePath,\n        },\n        object_info: {\n          last_modified: objectStats['last-modified'],\n          etag: etag,\n          hash_crc64ecma: objectStats['x-tos-hash-crc64ecma'] || '',\n          object_size: objectSize,\n        },\n      };\n      return checkpointContent;\n    };\n    const triggerDownloadEvent = (\n      e: Omit<\n        DownloadEvent,\n        'bucket' | 'versionId' | 'key' | 'checkpointFile' | 'filePath'\n      >\n    ) => {\n      if (!input.downloadEventChange) {\n        return;\n      }\n\n      const event: DownloadEvent = {\n        bucket,\n        versionId,\n        key,\n        filePath,\n        ...e,\n      };\n      if (checkpointRichInfo.filePath) {\n        event.checkpointFile = checkpointRichInfo.filePath;\n      }\n\n      input.downloadEventChange(event);\n    };\n\n    let consumedBytesForProgress = initConsumedBytes;\n    enum TriggerProgressEventType {\n      start = 0,\n      downloadPartSucceed = 1,\n      renameTempFileSucceed = 2,\n    }\n    const triggerProgressEvent = (type: TriggerProgressEventType) => {\n      if (!input.progress) {\n        return;\n      }\n\n      const percent = (() => {\n        if (type === TriggerProgressEventType.start && objectSize === 0) {\n          return 0;\n        }\n        return !objectSize ? 1 : consumedBytesForProgress / objectSize;\n      })();\n\n      if (\n        consumedBytesForProgress === objectSize &&\n        type === TriggerProgressEventType.downloadPartSucceed\n      ) {\n        // 100%  complete  100% \n      } else {\n        input.progress(percent, getCheckpointContent());\n      }\n    };\n    let consumedBytes = initConsumedBytes;\n    const { dataTransferStatusChange } = input;\n    const triggerDataTransfer = (\n      type: DataTransferType,\n      rwOnceBytes: number = 0\n    ) => {\n      if (!dataTransferStatusChange) {\n        return;\n      }\n      consumedBytes += rwOnceBytes;\n\n      dataTransferStatusChange?.({\n        type,\n        rwOnceBytes,\n        consumedBytes,\n        totalBytes: objectSize,\n      });\n    };\n    const writeCheckpointFile = makeSerialAsyncTask(async () => {\n      if (\n        process.env.TARGET_ENVIRONMENT === 'node' &&\n        checkpointRichInfo.filePath\n      ) {\n        const content = JSON.stringify(getCheckpointContent(), null, 2);\n        const dirPath = path.dirname(checkpointRichInfo.filePath); // ensure directory exist\n\n        await fsp.safeMkdirRecursive(dirPath);\n        await fsp.writeFile(checkpointRichInfo.filePath, content, 'utf-8');\n      }\n    });\n    const rmCheckpointFile = async () => {\n      if (\n        process.env.TARGET_ENVIRONMENT === 'node' &&\n        checkpointRichInfo.filePath\n      ) {\n        await fsp.rm(checkpointRichInfo.filePath).catch((err: any) => {\n          // eat err\n          console.warn(\n            'remove checkpoint file failure, you can remove it by hand.\\n',\n            `checkpoint file path: ${checkpointRichInfo.filePath}\\n`,\n            err.message\n          );\n        });\n      }\n    };\n\n    /**\n     *\n     * @param task one part task\n     * @param downloadPartRes upload part failed if `downloadPartRes` is Error\n     */\n    const updateAfterDownloadPart = async (\n      task: Task,\n      downloadPartRes:\n        | {\n            res: GetObjectV2Output & { rangeHashCrc64ecma: string };\n            err?: null;\n          }\n        | {\n            err: Error;\n          }\n    ) => {\n      let existRecordTask = recordedTaskMap.get(task.partNumber);\n      const rangeStart = task.offset;\n      const rangeEnd = Math.min(task.offset + partSize - 1, objectSize - 1);\n      if (!existRecordTask) {\n        existRecordTask = {\n          part_number: task.partNumber,\n          range_start: rangeStart,\n          range_end: rangeEnd,\n          hash_crc64ecma: '',\n          is_completed: false,\n        };\n        recordedTasks.push(existRecordTask);\n        recordedTaskMap.set(existRecordTask.part_number, existRecordTask);\n      }\n\n      if (!downloadPartRes.err) {\n        existRecordTask.is_completed = true;\n        existRecordTask.hash_crc64ecma = downloadPartRes.res.rangeHashCrc64ecma;\n      }\n\n      await writeCheckpointFile();\n      const downloadPartInfo: DownloadPartInfo = {\n        partNumber: existRecordTask.part_number,\n        rangeStart,\n        rangeEnd,\n      };\n\n      if (downloadPartRes.err) {\n        const err = downloadPartRes.err;\n        let type: DownloadEventType = DownloadEventType.DownloadPartFailed;\n\n        if (err instanceof TosServerError) {\n          if (ABORT_ERROR_STATUS_CODE.includes(err.statusCode)) {\n            type = DownloadEventType.DownloadPartAborted;\n          }\n        }\n\n        triggerDownloadEvent({\n          type,\n          err,\n          downloadPartInfo: downloadPartInfo,\n        });\n        return;\n      }\n\n      consumedBytesForProgress +=\n        downloadPartInfo.rangeEnd - downloadPartInfo.rangeStart + 1;\n\n      triggerDownloadEvent({\n        type: DownloadEventType.DownloadPartSucceed,\n        downloadPartInfo: downloadPartInfo,\n      });\n      triggerProgressEvent(TriggerProgressEventType.downloadPartSucceed);\n    };\n\n    if (checkpointRichInfo.record) {\n      bucket = checkpointRichInfo.record.bucket;\n\n      // checkpoint info exists, so need to calculate remain tasks\n      const uploadedPartSet: Set<number> = new Set(\n        (checkpointRichInfo.record.parts_info || [])\n          .filter((it) => it.is_completed)\n          .map((it) => it.part_number)\n      );\n      tasks = allTasks.filter((it) => !uploadedPartSet.has(it.partNumber));\n    } else {\n      try {\n        // create temp file\n        await fsp.writeFile(tempFilePath, '', {\n          flag: 'w+',\n        });\n        if (process.env.TARGET_ENVIRONMENT === 'node') {\n          // 3. [ Windows] \n          if (\n            process.platform === 'win32' &&\n            enableSparseFile &&\n            objectSize > partSize\n          ) {\n            const { execFile } = require('child_process');\n            await new Promise((resolve) => {\n              execFile(\n                'fsutil',\n                ['sparse', 'setflag', tempFilePath],\n                (err: any, _stdout: any, stderr: any) => {\n                  if (err) {\n                    console.warn(\n                      ':',\n                      tempFilePath,\n                      err,\n                      stderr\n                    );\n                    // \n                  } else {\n                    console.warn(':', tempFilePath);\n                  }\n                  resolve('');\n                }\n              );\n            });\n          }\n        }\n      } catch (_err) {\n        const err = _err as any;\n        triggerDownloadEvent({\n          type: DownloadEventType.CreateTempFileFailed,\n          err,\n        });\n        throw err;\n      }\n\n      if (checkpointRichInfo.filePathIsPlaceholder) {\n        checkpointRichInfo.filePath = checkpointRichInfo.filePath?.replace(\n          `${CHECKPOINT_FILE_NAME_PLACEHOLDER}`,\n          getDefaultCheckpointFilePath(bucket, key, versionId)\n        );\n      }\n\n      triggerDownloadEvent({\n        type: DownloadEventType.CreateTempFileSucceed,\n      });\n      triggerDataTransfer(DataTransferType.Started);\n      tasks = allTasks;\n    }\n\n    const handleTasks = async () => {\n      let firstErr: Error | null = null;\n      let index = 0;\n\n      // TODO: how to test parallel does work, measure time is not right\n      await Promise.all(\n        Array.from({ length: input.taskNum || 1 }).map(async () => {\n          while (true) {\n            const currentIndex = index++;\n            if (currentIndex >= tasks.length) {\n              return;\n            }\n\n            const curTask = tasks[currentIndex];\n            let consumedBytesThisTask = 0;\n            try {\n              const res = await getObjectV2.call(this, {\n                bucket,\n                key,\n                versionId,\n                headers: {\n                  'if-match': etag,\n                  range: `bytes=${curTask.offset}-${Math.min(\n                    curTask.offset + curTask.partSize - 1,\n                    objectSize - 1\n                  )}`,\n                },\n                trafficLimit: input.trafficLimit,\n                rateLimiter: input.rateLimiter,\n                dataTransferStatusChange(status) {\n                  if (status.type !== DataTransferType.Rw) {\n                    return;\n                  }\n                  if (isCancel()) {\n                    return;\n                  }\n                  consumedBytesThisTask += status.rwOnceBytes;\n                  triggerDataTransfer(DataTransferType.Rw, status.rwOnceBytes);\n                },\n              });\n\n              // need to handle stream's error event before throw a error\n              // if (isCancel()) {\n              //   throw new CancelError('cancel downloadFile');\n              // }\n\n              let dataStream = res.data.content;\n              const crcInst = new CRC();\n              if (\n                process.env.TARGET_ENVIRONMENT === 'node' &&\n                this.opts.enableCRC\n              ) {\n                dataStream = createCrcReadStream(dataStream, crcInst);\n              }\n              await new Promise((resolve, reject) => {\n                const writeStream = fsp.createWriteStream(tempFilePath, {\n                  start: curTask.offset,\n                  flags: 'r+',\n                  highWaterMark: writeStreamHighWaterMark,\n                });\n\n                let isErr = false;\n                let err: any = null;\n                writeStream.on('close', () => {\n                  if (isErr) {\n                    reject(err);\n                  } else {\n                    resolve(undefined);\n                  }\n                });\n\n                writeStream.on('error', (_err) => {\n                  isErr = true;\n                  err = _err;\n                });\n\n                dataStream.pipe(writeStream);\n                dataStream.on('error', (err) => writeStream.destroy(err));\n                function handleOnceCancel() {\n                  if (isCancel()) {\n                    reject(new CancelError('cancel downloadFile'));\n                    // fix windows\n                    writeStream.end();\n                    dataStream.unpipe(writeStream);\n                    dataStream.off('data', handleOnceCancel);\n                  }\n                }\n                dataStream.on('data', handleOnceCancel);\n              });\n\n              if (isCancel()) {\n                throw new CancelError('cancel downloadFile');\n              }\n\n              await updateAfterDownloadPart(curTask, {\n                res: { ...res.data, rangeHashCrc64ecma: crcInst.getCrc64() },\n              });\n            } catch (_err) {\n              const err = _err as any;\n              consumedBytes -= consumedBytesThisTask;\n              consumedBytesThisTask = 0;\n\n              if (isCancelError(err)) {\n                throw err;\n              }\n\n              if (isCancel()) {\n                throw new CancelError('cancel downloadFile');\n              }\n\n              if (!firstErr) {\n                firstErr = err;\n              }\n              await updateAfterDownloadPart(curTask, { err });\n            }\n          }\n        })\n      );\n\n      if (firstErr) {\n        throw firstErr;\n      }\n\n      const serverCRC64 = headObjectRes.data['x-tos-hash-crc64ecma'];\n      if (this.opts.enableCRC && serverCRC64) {\n        const actualCrc64 = combineCRCInParts(getCheckpointContent());\n        if (actualCrc64 !== serverCRC64) {\n          throw new TosClientError(\n            `validate file crc64 failed. Expect crc64 ${serverCRC64}, actual crc64 ${actualCrc64}. Please try again.`\n          );\n        }\n      }\n    };\n\n    const handleEmptyObj = async () => {};\n\n    triggerProgressEvent(TriggerProgressEventType.start);\n    objectSize === 0 ? await handleEmptyObj() : await handleTasks();\n\n    try {\n      if (typeof input.customRenameFileAfterDownloadCompleted === 'function') {\n        await input.customRenameFileAfterDownloadCompleted(\n          tempFilePath,\n          filePath\n        );\n      } else {\n        await fsp.rename(tempFilePath, filePath);\n      }\n    } catch (_err) {\n      const err = _err as any;\n      triggerDownloadEvent({\n        type: DownloadEventType.RenameTempFileFailed,\n        err,\n      });\n      triggerDataTransfer(DataTransferType.Failed);\n      throw err;\n    }\n\n    triggerDownloadEvent({\n      type: DownloadEventType.RenameTempFileSucceed,\n    });\n    triggerProgressEvent(TriggerProgressEventType.renameTempFileSucceed);\n    triggerDataTransfer(DataTransferType.Succeed);\n    await rmCheckpointFile();\n\n    return headObjectRes;\n  };\n\n  try {\n    return await nextEnsureCloseFd();\n  } finally {\n    // there is no global fd, don't need to close fd\n  }\n}\n\nexport default downloadFile;\n\n/**\n *  totalSize  0 Part Server  read request body failed\n */\nfunction getAllTasks(totalSize: number, partSize: number) {\n  const tasks: Task[] = [];\n  for (let i = 0; ; ++i) {\n    const offset = i * partSize;\n    const currPartSize = Math.min(partSize, totalSize - offset);\n\n    tasks.push({\n      offset,\n      partSize: currPartSize,\n      partNumber: i + 1,\n    });\n\n    if ((i + 1) * partSize >= totalSize) {\n      break;\n    }\n  }\n\n  return tasks;\n}\n\nfunction getDefaultCheckpointFilePath(\n  bucket: string,\n  key: string,\n  versionId?: string\n) {\n  const originPath = `${bucket}_${key}.${versionId}.json`;\n  const normalizePath = originPath.replace(/[\\\\/]/g, '');\n  return normalizePath;\n}\n\nfunction combineCRCInParts(cp: DownloadFileCheckpointRecord) {\n  let res = '0';\n  const sortedPartsInfo =\n    cp.parts_info?.sort?.((a, b) => a.part_number - b.part_number) ?? [];\n  for (const part of sortedPartsInfo) {\n    res = combineCrc64(\n      res,\n      part.hash_crc64ecma,\n      part.range_end - part.range_start + 1\n    );\n  }\n  return res;\n}\n","// @ts-nocheck\nimport { hashSha256, hmacSha256, stringify, parse } from './universal/crypto';\nimport { getSortedQueryString } from './utils';\n\nexport interface ISign {\n  signature(\n    opt: ISigOptions,\n    expiredAt: number,\n    credentials?: ISigCredentials\n  ): string;\n  signatureHeader(\n    opt: ISigOptions,\n    expiredAt?: number,\n    credentials?: ISigCredentials\n  ): Map<string, string>;\n  gnrCopySig(\n    opt: ISigOptions,\n    credentials: ISigCredentials\n  ): { key: string; value: string };\n  getSignatureQuery(\n    opt: ISigOptions,\n    expiredAt: number\n  ): { [key: string]: any };\n  getSignature(\n    reqOpts: ISigOptions,\n    expiredAt: number\n  ): { key: string; value: string };\n}\n\nexport interface ISigCredentials {\n  GetSecretKey(): string;\n  GetAccessKey(): string;\n}\n\nexport interface ISigPolicyQuery {\n  policy: {\n    conditions: (string[] | { bucket: string } | { key: string })[];\n  };\n}\n\nexport interface ISigOptions {\n  sigName?: string;\n  endpoints?: string;\n  bucket?: string;\n  headers?: { [key: string]: string | undefined };\n  region?: string;\n  serviceName?: string;\n  algorithm?: string;\n  path: string;\n  method: string;\n  query?: string;\n  datetime?: string;\n  host?: string;\n  port?: number;\n}\n\nexport interface ISigQueryOptions extends Omit<ISigOptions, 'query'> {\n  query?: Record<string, any>;\n}\n\nexport const SIG_QUERY = {\n  algorithm: 'tos-algorithm',\n  expiration: 'tos-expiration',\n  signame: 'tos-signame',\n  signature: 'tos-signature',\n\n  v4_algorithm: 'X-Tos-Algorithm',\n  v4_credential: 'X-Tos-Credential',\n  v4_date: 'X-Tos-Date',\n  v4_expires: 'X-Tos-Expires',\n  v4_signedHeaders: 'X-Tos-SignedHeaders',\n  v4_security_token: 'X-Tos-Security-Token',\n  v4_signature: 'X-Tos-Signature',\n  v4_content_sha: 'X-Tos-Content-Sha256',\n  v4_policy: 'X-Tos-Policy',\n\n\n};\n\nexport function isDefaultPort(port?: number) {\n  if (port && port !== 80 && port !== 443) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * @api private\n */\nconst v4Identifier = 'request';\n\ninterface ISignV4Opt {\n  algorithm?: string;\n  region?: string;\n  serviceName?: string;\n  securityToken?: string;\n  bucket: string;\n}\n/**\n * @api private\n */\nexport class SignersV4 implements ISign {\n  private options: ISignV4Opt;\n  private credentials: ISigCredentials;\n  constructor(opt: ISignV4Opt, credentials: ISigCredentials) {\n    this.options = opt;\n    this.credentials = credentials;\n  }\n\n  /*\n   * normal v4 signature\n   * */\n  public signature = (\n    opt: ISigOptions,\n    expiredAt: number,\n    credentials?: ISigCredentials\n  ) => {\n    if (!credentials) {\n      credentials = this.credentials;\n    }\n    const parts: string[] = [];\n    const datatime = opt.datetime as string;\n    const credString = this.credentialString(datatime);\n    parts.push(\n      this.options.algorithm +\n        ' Credential=' +\n        credentials.GetAccessKey() +\n        '/' +\n        credString\n    );\n\n    // console.log(this.algorithm + ' Credential=' +\n    //   credentials.accessKeyId + '/' + credString)\n\n    parts.push('SignedHeaders=' + this.signedHeaders(opt));\n    parts.push('Signature=' + this.authorization(opt, credentials, 0));\n    return parts.join(', ');\n  };\n\n  public signatureHeader = (\n    opt: ISigOptions,\n    expiredAt?: number,\n    credentials?: ISigCredentials\n  ): Map<string, string> => {\n    // const datetime = (new Date(new Date().toUTCString())).Format(\"yyyyMMddTHHmmssZ\")\n    opt.datetime = this.getDateTime();\n    const header = new Map<string, string>();\n    /* istanbul ignore if */\n    if (!opt.headers) {\n      const h: { [key: string]: string } = {};\n      opt.headers = h;\n    }\n\n    opt.headers.host = `${opt.host}`;\n    /* istanbul ignore if */\n    if (!isDefaultPort(opt.port)) {\n      opt.headers.host += ':' + opt.port;\n    }\n    /* istanbul ignore if */\n    if (opt.endpoints) {\n      opt.headers.host = `${this.options.bucket}.${opt.endpoints}`;\n    }\n\n    header.set('host', opt.headers.host); // opt.endpoints as string)\n    header.set('x-tos-date', opt.datetime); // opt.datetime)\n    /* istanbul ignore if\n      if (opt.endpoints) {\n          let bucket = this.options.bucket;\n          if (opt.bucket) {\n              bucket = opt.bucket;\n          }\n          if (!opt.path || opt.path === '/' || opt.path === `/${bucket}`) {\n              opt.path = '/' + bucket;\n          } else {\n              opt.path = '/' + bucket + opt.path;\n          }\n      }\n      */\n    header.set('x-tos-content-sha256', this.hexEncodedBodyHash());\n    if (this.options.securityToken) {\n      header.set('x-tos-security-token', this.options.securityToken);\n    }\n    // x-tos- must to be signatured\n    header.forEach((value, key) => {\n      if (key.startsWith('x-tos')) {\n        opt.headers[key] = value;\n      }\n    });\n    opt.path = this.getEncodePath(opt.path);\n    const sign = this.signature(opt, 0, credentials);\n    header.set('authorization', sign);\n\n    return header;\n  };\n\n  public gnrCopySig = (\n    opt: ISigOptions,\n    credentials: ISigCredentials\n  ): { key: string; value: string } => {\n    return { key: '', value: '' };\n  };\n\n  public getSignature = (\n    opt: ISigOptions,\n    expiredAt: number\n  ): { key: ''; value: '' } => {\n    return { key: '', value: '' };\n  };\n\n  public getSignatureQuery = (\n    opt: ISigQueryOptions,\n    expiredAt: number\n  ): { [key: string]: any } => {\n    opt.datetime = this.getDateTime();\n    if (!opt.headers) {\n      const h: { [key: string]: string } = {};\n      opt.headers = h;\n    }\n\n    opt.headers.host = `${opt.host}`;\n    if (!isDefaultPort(opt.port)) {\n      opt.headers.host += ':' + opt.port;\n    }\n\n    opt.path = this.getEncodePath(opt.path);\n    if (opt.endpoints) {\n      opt.headers.host = `${this.options.bucket}.${opt.endpoints}`;\n      // opt.path = `${opt.path}`;\n    }\n\n    opt.headers[SIG_QUERY.v4_date] = opt.datetime;\n    const credString = this.credentialString(opt.datetime as string);\n    const res = {\n      ...(opt.query || {}),\n      [SIG_QUERY.v4_algorithm]: this.options.algorithm,\n      [SIG_QUERY.v4_content_sha]: this.hexEncodedBodyHash(),\n      [SIG_QUERY.v4_credential]:\n        this.credentials.GetAccessKey() + '/' + credString,\n      [SIG_QUERY.v4_date]: opt.datetime,\n      [SIG_QUERY.v4_expires]: '' + expiredAt,\n      [SIG_QUERY.v4_signedHeaders]: this.signedHeaders(opt),\n    };\n    if (this.options.securityToken) {\n      res[SIG_QUERY.v4_security_token] = this.options.securityToken;\n    }\n    opt.query = getSortedQueryString(res);\n\n    res[SIG_QUERY.v4_signature] = this.authorization(\n      opt,\n      this.credentials,\n      expiredAt\n    );\n    return res;\n  };\n\n  public getSignaturePolicyQuery = (\n    opt: ISigPolicyQuery,\n    expiredAt: number\n  ): { [key: string]: any } => {\n    opt.datetime = this.getDateTime();\n\n    const credString = this.credentialString(opt.datetime as string);\n    const res = {\n      [SIG_QUERY.v4_algorithm]: this.options.algorithm,\n      [SIG_QUERY.v4_credential]:\n        this.credentials.GetAccessKey() + '/' + credString,\n      [SIG_QUERY.v4_date]: opt.datetime,\n      [SIG_QUERY.v4_expires]: '' + expiredAt,\n      [SIG_QUERY.v4_policy]: stringify(\n        parse(JSON.stringify(opt.policy), 'utf-8'),\n        'base64'\n      ),\n    };\n    if (this.options.securityToken) {\n      res[SIG_QUERY.v4_security_token] = this.options.securityToken;\n    }\n    opt.query = getSortedQueryString(res);\n\n    res[SIG_QUERY.v4_signature] = this.authorization(\n      opt,\n      this.credentials,\n      expiredAt\n    );\n    return res;\n  };\n\n  private hexEncodedBodyHash = () => {\n    return 'UNSIGNED-PAYLOAD';\n    // return this.hexEncodedHash('');\n  };\n\n  private authorization = (\n    opt: ISigOptions,\n    credentials: ISigCredentials,\n    expiredAt: number\n  ) => {\n    /* istanbul ignore if */\n    if (!opt.datetime) {\n      return '';\n    }\n\n    const signingKey = this.getSigningKey(\n      credentials,\n      opt.datetime.substr(0, 8)\n    );\n    // console.log(\n    // 'signingKey:',\n    //  signingKey,\n    //  'sign:',\n    //  this.stringToSign(opt.datetime, opt)\n    //  );\n    return hmacSha256(signingKey, this.stringToSign(opt.datetime, opt), 'hex');\n  };\n\n  private getDateTime = () => {\n    const date = new Date(new Date().toUTCString());\n    const datetime =\n      date\n        .toISOString()\n        .replace(/\\..+/, '')\n        .replace(/-/g, '')\n        .replace(/:/g, '') + 'Z';\n    return datetime;\n  };\n  private credentialString = (datetime: string) => {\n    return this.createScope(\n      datetime.substr(0, 8),\n      this.options.region,\n      this.options.serviceName\n    );\n  };\n\n  private createScope = (date, region, serviceName) => {\n    return [date.substr(0, 8), region, serviceName, v4Identifier].join('/');\n  };\n\n  private getSigningKey = (credentials: ISigCredentials, date) => {\n    const kDate = hmacSha256(credentials.GetSecretKey(), date);\n    const kRegion = hmacSha256(kDate, this.options.region as string);\n    const kService = hmacSha256(kRegion, this.options.serviceName as string);\n    const signingKey = hmacSha256(kService, v4Identifier);\n\n    return signingKey;\n  };\n\n  private stringToSign = (datetime: string, opt: ISigOptions) => {\n    /* istanbul ignore if */\n    if (!this.options.algorithm) {\n      return '';\n    }\n\n    const parts: string[] = [];\n    parts.push(this.options.algorithm);\n    parts.push(datetime);\n    parts.push(this.credentialString(datetime));\n    const canonicalString =\n      'policy' in opt\n        ? this.canonicalStringPolicy(opt)\n        : this.canonicalString(opt);\n    // console.log('canonicalString',this.canonicalString(opt),' code:',this.hexEncodedHash(this.canonicalString(opt)));\n    parts.push(this.hexEncodedHash(canonicalString));\n    return parts.join('\\n');\n  };\n\n  private hexEncodedHash = string => {\n    return hashSha256(string, 'hex');\n  };\n\n  private canonicalString = (opt: ISigOptions) => {\n    const parts: any[] = [];\n    parts.push(opt.method);\n    parts.push(opt.path);\n    parts.push(this.getEncodePath(opt.query as string, false));\n    parts.push(this.canonicalHeaders(opt) + '\\n');\n    parts.push(this.signedHeaders(opt));\n    parts.push(this.hexEncodedBodyHash());\n    return parts.join('\\n');\n  };\n\n  private canonicalStringPolicy = (opt: ISigOptions) => {\n    const parts: any[] = [];\n    parts.push(this.getEncodePath(opt.query as string, false));\n    parts.push(this.hexEncodedBodyHash());\n    return parts.join('\\n');\n  };\n\n  private canonicalHeaders = (opt: ISigOptions) => {\n    const parts: string[] = [];\n    const needSignHeaders = getNeedSignedHeaders(opt.headers);\n\n    for (let key of needSignHeaders) {\n      const value = opt.headers[key];\n      key = key.toLowerCase();\n      parts.push(key + ':' + this.canonicalHeaderValues(value.toString()));\n    }\n\n    return parts.join('\\n');\n  };\n\n  private canonicalHeaderValues = (values: string) => {\n    return values.replace(/\\s+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n  };\n\n  private signedHeaders = (opt: ISigOptions) => {\n    const keys: string[] = [];\n    const needSignHeaders = getNeedSignedHeaders(opt.headers);\n\n    for (let key of needSignHeaders) {\n      key = key.toLowerCase();\n      keys.push(key);\n    }\n\n    return keys.sort().join(';');\n  };\n\n  /**\n   * ! * ' () aren't transformed by encodeUrl, so they need be handled\n   */\n  private getEncodePath(path: string, encodeAll: boolean = true): string {\n    if (!path) {\n      return '';\n    }\n\n    let tmpPath = path;\n    if (encodeAll) {\n      tmpPath = path.replace(/%2F/g, '/');\n    }\n    tmpPath = tmpPath.replace(/\\(/g, '%28');\n    tmpPath = tmpPath.replace(/\\)/g, '%29');\n    tmpPath = tmpPath.replace(/!/g, '%21');\n    tmpPath = tmpPath.replace(/\\*/g, '%2A');\n    tmpPath = tmpPath.replace(/\\'/g, '%27');\n    return tmpPath;\n  }\n}\n\nexport class ISigV4Credentials implements ISigCredentials {\n  public securityToken: string;\n  public secretAccessKey: string;\n  public accessKeyId: string;\n\n  constructor(\n    securityToken?: string,\n    secretAccessKey?: string,\n    accessKeyId?: string\n  ) {\n    this.accessKeyId = accessKeyId as string;\n    this.secretAccessKey = secretAccessKey as string;\n    this.securityToken = securityToken as string;\n  }\n\n  public GetAccessKey(): string {\n    return this.accessKeyId;\n  }\n\n  public GetSecretKey(): string {\n    return this.secretAccessKey;\n  }\n}\n\nfunction getNeedSignedHeaders(headers: Record<string, unknown> | undefined) {\n  const needSignHeaders: string[] = [];\n  Object.keys(headers || {}).forEach((key: string) => {\n    if (key === 'host' || key.startsWith('x-tos-')) {\n      if (headers[key] != null) {\n        needSignHeaders.push(key);\n      }\n    }\n  });\n  return needSignHeaders.sort();\n}\n","// auto generated by scripts/build.js\nexport default '2.9.0';\n","import http from 'http';\nimport https from 'https';\nimport { Socket } from 'net';\n\n// add missing type\ndeclare module 'http' {\n  interface AgentOptions {\n    // reference:\n    // https://stackoverflow.com/questions/51363855/how-to-configure-axios-to-use-ssl-certificate\n    rejectUnauthorized?: boolean;\n  }\n\n  interface Agent {\n    createConnection(...opts: unknown[]): Socket;\n  }\n}\n\ninterface TosAgentOptions extends http.AgentOptions {\n  tosOpts: {\n    enableVerifySSL: boolean;\n    connectionTimeout: number;\n    maxConnections: number;\n    idleConnectionTime: number;\n    isHttps: boolean;\n  };\n}\n\n// not use class grammar, because Agent is dynamic\nexport function TosAgent(opts: TosAgentOptions) {\n  const { tosOpts, ...agentOpts } = opts;\n  const Agent = tosOpts.isHttps ? https.Agent : http.Agent;\n  const agent = new Agent({\n    ...agentOpts,\n    keepAlive: true,\n    rejectUnauthorized: tosOpts.enableVerifySSL,\n    timeout: tosOpts.idleConnectionTime,\n  });\n\n  agent.maxFreeSockets = Infinity;\n  agent.maxTotalSockets = tosOpts.maxConnections;\n\n  const oriCreateConnection = agent.createConnection;\n  agent.createConnection = function (...args) {\n    const socket = oriCreateConnection.call(this, ...args);\n    let isTimeout = false;\n    let isConnected = false;\n    let connectTimer: NodeJS.Timeout | null = null;\n\n    // Place `setTimeout` in `process.nextTick` to avoid to\n    // trigger \"Connect timeout\" when debug\n    process.nextTick(() => {\n      if (isConnected) {\n        return;\n      }\n\n      connectTimer = setTimeout(() => {\n        isTimeout = true;\n      }, tosOpts.connectionTimeout);\n    });\n\n    socket.on('connect', () => {\n      isConnected = true;\n      if (connectTimer) {\n        clearTimeout(connectTimer);\n      }\n\n      if (isTimeout) {\n        socket.destroy(new Error('Connect timeout'));\n      }\n    });\n\n    return socket;\n  };\n\n  return agent;\n}\n","import { hashMd5 } from '../universal/crypto';\nimport axios, {\n  AxiosAdapter,\n  AxiosInstance,\n  AxiosRequestConfig,\n  AxiosResponse,\n  Method,\n} from 'axios';\nimport { ISigV4Credentials, SignersV4 } from '../signatureV4';\nimport { Headers, StringKeys, TosClientCommonOptions } from '../interface';\nimport TosServerError, { TosServerErrorData } from '../TosServerError';\nimport {\n  encodeHeadersValue,\n  getEndpoint,\n  getNormalDataFromError,\n  getSortedQueryString,\n  isValidBucketName,\n  normalizeProxy,\n} from '../utils';\nimport version from '../version';\nimport { TosAgent } from '../nodejs/TosAgent';\nimport TosClientError from '../TosClientError';\nimport {\n  DEFAULT_CONTENT_TYPE,\n  getObjectInputKey,\n  lookupMimeType,\n  validateObjectName,\n} from './object/utils';\nimport { makeAxiosInst } from '../axios';\nimport type { CRCCls } from '../universal/crc';\nimport * as log from '../log';\nimport mpAdapter from '../axios-miniprogram-adapter';\nimport uniappAdapter from 'axios-adapter-uniapp';\nimport os from 'os';\nimport { retrySignatureNamespace } from '../axios';\n\nexport interface TOSConstructorOptions extends TosClientCommonOptions {\n  accessKeyId: string;\n  accessKeySecret: string;\n  stsToken?: string;\n  bucket?: string;\n  endpoint?: string;\n  /**\n   * default value: true\n   * when using proxyHost&proxyPort, it needs to be set to false\n   */\n  secure?: boolean;\n  region: string;\n\n  /**\n   * proxy for web, use it with the middleware of `./proxy`\n   */\n  proxy?:\n    | string\n    | {\n        url: string;\n        needProxyParams?: boolean;\n      };\n  /**\n   * proxy to general http proxy server, this feature doesn't work in browser environment.\n   * only support http proxy server.\n   * proxyHost and proxyPort are required if the proxy function works.\n   * HINT: need set `secure` field false\n   */\n  proxyHost?: string;\n  proxyPort?: number;\n  // username and password don't be supported currently\n  // proxyUsername?: string;\n  // proxyPassword?: string;\n\n  /**\n   * default value: true\n   */\n  enableVerifySSL?: boolean;\n\n  /**\n   * default value: true\n   */\n  autoRecognizeContentType?: boolean;\n\n  /**\n   * unit: ms\n   * default value: 120s\n   * disable if value <= 0\n   */\n  requestTimeout?: number;\n\n  /**\n   * unit: ms\n   * default value: 10s\n   * disable if value <= 0\n   */\n  connectionTimeout?: number;\n\n  /**\n   * default value: 1024\n   */\n  maxConnections?: number;\n\n  /**\n   * unit: ms\n   * default value: 30s\n   */\n  idleConnectionTime?: number;\n\n  /**\n   * default value: 3\n   *\n   * disable if value <= 0\n   */\n  maxRetryCount?: number;\n\n  // TODO: need more efficient way, 1min for 10M currently\n  /**\n   * default value: false\n   *\n   * CRC executed by js is slow currently, it's default value will be true if it is fast enough.\n   */\n  enableCRC?: boolean;\n\n  /**\n   * set request adapter to send request.\n   */\n  requestAdapter?: AxiosAdapter;\n\n  /**\n   * default value: false  ${bucket}.${endpoint}\n   * if true request will not combine `${bucket}.${endpoint}`\n   */\n  isCustomDomain?: boolean;\n\n  /**\n   * @private unstable option: false | true | undefined\n   * default value: undefined\n   * true:\n   * Allow SDK to internally catch server errors for 404 and return default values\n   * Allow SDK to internally change some put methods to delete methods when pass empty value\n   */\n  enableOptimizeMethodBehavior?: boolean;\n  /**\n   * @private unstable option\n   */\n  forcePathStyle?: boolean;\n\n  userAgentProductName?: string;\n  userAgentSoftName?: string;\n  userAgentSoftVersion?: string;\n  userAgentCustomizedKeyValues?: Record<string, string>;\n}\n\ninterface NormalizedTOSConstructorOptions extends TOSConstructorOptions {\n  secure: boolean;\n  endpoint: string;\n  enableVerifySSL: boolean;\n  autoRecognizeContentType: boolean;\n  requestTimeout: number;\n  connectionTimeout: number;\n  maxConnections: number;\n  idleConnectionTime: number;\n  maxRetryCount: number;\n  enableCRC: boolean;\n}\n\ninterface GetSignatureQueryUrlInput {\n  bucket: string;\n  method: Method;\n  path: string;\n  subdomain: boolean;\n  endpoint: string;\n  // unit: second\n  expires: number;\n  query?: Record<string, any>;\n}\n\ninterface GetSignaturePolicyQueryInput {\n  bucket: string;\n  expires: number;\n  policy: {\n    conditions: (string[] | { bucket: string } | { key: string })[];\n  };\n}\n\ntype GetSignatureQueryInput =\n  | GetSignatureQueryUrlInput\n  | GetSignaturePolicyQueryInput;\n\ninterface FetchOpts<T> {\n  needMd5?: boolean;\n  handleResponse?: (response: AxiosResponse<T>) => T;\n  subdomainBucket?: string;\n  serviceName?: string;\n  axiosOpts?: AxiosRequestConfig;\n}\n\nexport interface TosResponse<T> {\n  data: T;\n\n  statusCode: number;\n  headers: Headers;\n  /**\n   * identifies the errored request, equals to headers['x-tos-request-id'].\n   * If you has any question about the request, please send the requestId and id2 to TOS worker.\n   */\n  requestId: string;\n\n  /**\n   * identifies the errored request, equals to headers['x-tos-id-2'].\n   * If you has any question about the request, please send the requestId and id2 to TOS worker.\n   */\n  id2: string;\n}\n\nexport class TOSBase {\n  opts: NormalizedTOSConstructorOptions;\n\n  axiosInst: AxiosInstance;\n\n  userAgent: string;\n\n  private httpAgent: unknown;\n  private httpsAgent: unknown;\n\n  constructor(_opts: TOSConstructorOptions) {\n    this.opts = this.normalizeOpts(_opts);\n\n    if (process.env.TARGET_ENVIRONMENT === 'node') {\n      this.httpAgent = TosAgent({ tosOpts: { ...this.opts, isHttps: false } });\n      // fix axios issue, it uses `httpsAgent` although http proxy is enabled.\n      const isProxy = !!this.opts.proxyHost;\n      this.httpsAgent = TosAgent({\n        tosOpts: { ...this.opts, isHttps: !isProxy },\n      });\n    }\n\n    this.userAgent = this.getUserAgent();\n    this.axiosInst = makeAxiosInst(this.opts.maxRetryCount);\n  }\n\n  private normalizeOpts(_opts: TOSConstructorOptions) {\n    //  trim \n    const trimKeys = [\n      'accessKeyId',\n      'accessKeySecret',\n      'stsToken',\n      'region',\n      'endpoint',\n    ] as const;\n    trimKeys.forEach((key) => {\n      const value = _opts[key];\n      if (typeof value === 'string') {\n        // maybe undefined\n        _opts[key] = value.trim();\n      }\n    });\n\n    const mustKeys = ['accessKeyId', 'accessKeySecret', 'region'];\n    const mustKeysErrorStr = mustKeys\n      .filter((key) => !(_opts as any)[key])\n      .join(', ');\n\n    if (mustKeysErrorStr) {\n      throw new TosClientError(`lack params: ${mustKeysErrorStr}.`);\n    }\n\n    const endpoint = _opts.endpoint || getEndpoint(_opts.region);\n    if (!endpoint) {\n      throw new TosClientError(\n        `the value of param region is invalid, correct values are cn-beijing, cn-nantong etc.`\n      );\n    }\n\n    const S3_REGION_LIST = [\n      'tos-s3-cn-beijing.volces.com',\n      'tos-s3-cn-guangzhou.volces.com',\n      'tos-s3-cn-shanghai.volces.com',\n      'tos-s3-ap-southeast-1.volces.com',\n    ];\n    if (S3_REGION_LIST.includes(endpoint)) {\n      throw new TosClientError(\n        `do not support s3 endpoint, please use tos endpoint.`\n      );\n    }\n\n    const secure = _opts.secure == null ? true : !!_opts.secure;\n    const _default = <T extends unknown>(\n      v: T | undefined | null,\n      defaultValue: T\n    ) => (v == null ? defaultValue : v);\n\n    const enableCRC = _opts.enableCRC ?? false;\n    if (enableCRC && process.env.TARGET_ENVIRONMENT === 'browser') {\n      throw new TosClientError('not support crc in browser environment');\n    }\n\n    return {\n      ..._opts,\n      endpoint,\n      secure,\n      enableVerifySSL: _default(_opts.enableVerifySSL, true),\n      autoRecognizeContentType: _default(_opts.autoRecognizeContentType, true),\n      requestTimeout: _default(_opts.requestTimeout, 120_000),\n      connectionTimeout: _default(_opts.connectionTimeout, 10_000),\n      maxConnections: _default(_opts.maxConnections, 1024),\n      idleConnectionTime: _default(_opts.idleConnectionTime, 30_000),\n      maxRetryCount: _default(_opts.maxRetryCount, 3),\n      enableCRC: _opts.enableCRC ?? false,\n      requestAdapter: getAdapter(),\n    };\n  }\n\n  private getUserAgent() {\n    // ve-tos-go-sdk/v2.0.0 (linux/amd64;go1.17.0)\n    const language =\n      process.env.TARGET_ENVIRONMENT === 'browser' ? 'browserjs' : 'nodejs';\n    const sdkVersion = `ve-tos-${language}-sdk/v${version}`;\n    if (process.env.TARGET_ENVIRONMENT === 'browser') {\n      return sdkVersion;\n    }\n\n    const osType = (() => {\n      const oriType = os.type();\n      const aliasType: Record<string, string> = {\n        Linux: 'linux',\n        Darwin: 'darwin',\n        Windows_NT: 'windows',\n      };\n      return aliasType[oriType] || oriType;\n    })();\n    const nodeVersion = (() => {\n      return process.version.replace('v', '');\n    })();\n    const stdStr = `${sdkVersion} (${osType}/${process.arch};nodejs${nodeVersion})`;\n    const moreStr = (() => {\n      const { userAgentProductName, userAgentSoftName, userAgentSoftVersion } =\n        this.opts;\n      let customStr = Object.entries(\n        this.opts.userAgentCustomizedKeyValues || {}\n      )\n        .map(([k, v]) => {\n          return `${k}/${v}`;\n        })\n        .join(';');\n      customStr = customStr ? `(${customStr})` : '';\n\n      if (\n        !userAgentProductName &&\n        !userAgentSoftName &&\n        !userAgentSoftVersion &&\n        !customStr\n      ) {\n        return '';\n      }\n      const defaultValue = 'undefined';\n      const productSoftStr = [\n        userAgentProductName,\n        userAgentSoftName,\n        userAgentSoftVersion,\n      ]\n        .map((it) => it || defaultValue)\n        .join('/');\n\n      return [productSoftStr, customStr].filter(Boolean).join(' ');\n    })();\n\n    return [stdStr, moreStr].filter(Boolean).join(' -- ');\n  }\n\n  protected async fetch<Data>(\n    method: Method,\n    path: string,\n    query: Record<string, any>,\n    headers: Headers,\n    body?: Object | File | Blob | NodeJS.ReadableStream,\n    opts?: FetchOpts<Data>\n  ): Promise<TosResponse<Data>> {\n    const handleResponse = opts?.handleResponse || ((res) => res.data);\n    const needMd5 = opts?.needMd5 || false;\n\n    if (body && needMd5) {\n      const md5String = hashMd5(JSON.stringify(body), 'base64');\n      headers['content-md5'] = md5String;\n    }\n\n    const [endpoint, newPath] = (() => {\n      if (opts?.subdomainBucket && this.opts.forcePathStyle) {\n        return [this.opts.endpoint, `/${opts.subdomainBucket}${path}`];\n      }\n      // if isCustomDomain true, not add subdomainBucket\n      if (opts?.subdomainBucket && !this.opts.isCustomDomain) {\n        // endpoint is ip address\n        if (/^(\\d|:)/.test(this.opts.endpoint)) {\n          return [this.opts.endpoint, `/${opts.subdomainBucket}${path}`];\n        }\n        return [`${opts?.subdomainBucket}.${this.opts.endpoint}`, path];\n      }\n      return [this.opts.endpoint, path];\n    })();\n    path = newPath;\n\n    headers = encodeHeadersValue(headers);\n\n    const signOpt = {\n      // TODO: delete endpoints and buckets\n      endpoints: undefined,\n      bucket: '',\n\n      method,\n      headers: { ...headers },\n      path,\n      query: getSortedQueryString(query),\n      host: endpoint,\n    };\n\n    const signv4 = new ISigV4Credentials(\n      this.opts.stsToken,\n      this.opts.accessKeySecret,\n      this.opts.accessKeyId\n    );\n\n    const sig = new SignersV4(\n      {\n        algorithm: 'TOS4-HMAC-SHA256',\n        region: this.opts.region,\n        serviceName: opts?.serviceName || 'tos',\n        bucket: '',\n        securityToken: this.opts.stsToken,\n      },\n      signv4\n    );\n\n    const signatureHeaders = sig.signatureHeader(signOpt);\n    const reqHeaders = { ...headers };\n\n    const reqOpts: AxiosRequestConfig = {\n      method,\n      baseURL: `http${this.opts.secure ? 's' : ''}://${endpoint}`,\n      url: path,\n      params: query,\n      headers: reqHeaders,\n      // axios xhr  === undefined  content-type\n      data: body || '',\n    };\n\n    signatureHeaders.forEach((value, key) => {\n      reqOpts.headers[key] = value;\n    });\n\n    const normalizedProxy = normalizeProxy(this.opts.proxy);\n    if (normalizedProxy?.url && !this.opts.proxyHost) {\n      // proxy for nodejs middleware server\n      reqOpts.baseURL = normalizedProxy.url;\n      if (normalizedProxy?.needProxyParams) {\n        reqOpts.params['x-proxy-tos-host'] = endpoint;\n        delete reqHeaders['host'];\n      }\n    } else if (this.opts.proxyHost) {\n      if (!this.opts.proxyPort) {\n        throw new TosClientError(\n          'The `proxyPort` is required if `proxyHost` is truly.'\n        );\n      }\n\n      // proxy for general proxy server\n      reqOpts.proxy = {\n        host: this.opts.proxyHost,\n        port: this.opts.proxyPort,\n        protocol: 'http',\n      };\n    }\n\n    reqHeaders['user-agent'] = this.userAgent;\n    if (this.opts.requestTimeout > 0 && this.opts.requestTimeout !== Infinity) {\n      reqOpts.timeout = this.opts.requestTimeout;\n    }\n\n    if (process.env.TARGET_ENVIRONMENT === 'node') {\n      reqOpts.httpAgent = this.httpAgent;\n      reqOpts.httpsAgent = this.httpsAgent;\n    }\n\n    try {\n      const logReqOpts = { ...reqOpts };\n      delete logReqOpts.httpAgent;\n      delete logReqOpts.httpsAgent;\n      log.TOS('reqOpts: ', logReqOpts);\n      const res = await this.axiosInst({\n        ...{\n          maxBodyLength: Infinity,\n          maxContentLength: Infinity,\n          adapter: this.opts.requestAdapter,\n        },\n        ...reqOpts,\n        ...(opts?.axiosOpts || {}),\n        [retrySignatureNamespace]: {\n          signOpt,\n          sigInst: sig,\n        },\n      });\n\n      const data = handleResponse(res);\n      return {\n        data,\n        statusCode: res.status,\n        headers: res.headers,\n        requestId: res.headers['x-tos-request-id'],\n        id2: res.headers['x-tos-id-2'],\n      };\n    } catch (err) {\n      if (\n        axios.isAxiosError(err) &&\n        (err.response?.headers?.['x-tos-request-id'] ||\n          err.response?.data?.requestId)\n      ) {\n        // it's ServerError only if `RequestId` exists\n        const response: AxiosResponse<TosServerErrorData> = err.response;\n        log.TOS('TosServerError response: ', response);\n        const err2 = new TosServerError(response);\n        throw err2;\n      }\n\n      // it is neither ServerError nor ClientError, it's other error\n      log.TOS('err: ', err);\n      throw err;\n    }\n  }\n\n  protected async fetchBucket<Data>(\n    bucket: string | undefined,\n    method: Method,\n    query: any,\n    headers: Headers,\n    body?: Object | File | Blob | NodeJS.ReadableStream,\n    opts?: FetchOpts<Data>\n  ): Promise<TosResponse<Data>> {\n    const actualBucket = bucket || this.opts.bucket;\n    if (!actualBucket) {\n      throw new TosClientError('Must provide bucket param');\n    }\n\n    isValidBucketName(actualBucket, this.opts.isCustomDomain);\n\n    return this.fetch(method, '/', query, headers, body, {\n      ...opts,\n      subdomainBucket: actualBucket,\n    });\n  }\n\n  protected async _fetchObject<Data>(\n    input: { bucket?: string; key: string } | string,\n    method: Method,\n    query: any,\n    headers: Headers,\n    body?: Object | File | Blob | NodeJS.ReadableStream,\n    opts?: FetchOpts<Data>\n  ): Promise<TosResponse<Data>> {\n    const actualBucket =\n      (typeof input !== 'string' && input.bucket) || this.opts.bucket;\n    const actualKey = typeof input === 'string' ? input : input.key;\n    if (!actualBucket) {\n      throw new TosClientError('Must provide bucket param');\n    }\n\n    isValidBucketName(actualBucket, this.opts.isCustomDomain);\n    validateObjectName(actualKey);\n\n    return this.fetch(\n      method,\n      `/${encodeURIComponent(actualKey)}`,\n      query,\n      headers,\n      body,\n      {\n        ...opts,\n        subdomainBucket: actualBucket,\n      }\n    );\n  }\n\n  protected getSignatureQuery(\n    input: GetSignatureQueryInput\n  ): Record<string, string> {\n    const signv4 = new ISigV4Credentials(\n      this.opts.stsToken,\n      this.opts.accessKeySecret,\n      this.opts.accessKeyId\n    );\n\n    const sig = new SignersV4(\n      {\n        algorithm: 'TOS4-HMAC-SHA256',\n        region: this.opts.endpoint,\n        serviceName: 'tos',\n        // SignV4 uses this.options.bucket, so set it here\n        bucket: input.bucket,\n        securityToken: this.opts.stsToken,\n      },\n      signv4\n    );\n\n    if ('policy' in input) {\n      return sig.getSignaturePolicyQuery(\n        {\n          policy: input.policy,\n        },\n        input.expires\n      );\n    } else {\n      return sig.getSignatureQuery(\n        {\n          method: input.method,\n          path: input.path,\n          endpoints: input.subdomain ? input.endpoint : undefined,\n          host: input.endpoint,\n          query: input.query,\n        },\n        input.expires\n      );\n    }\n  }\n\n  protected getObjectPath = (\n    opts: { bucket?: string; key: string } | string\n  ) => {\n    const actualBucket =\n      (typeof opts !== 'string' && opts.bucket) || this.opts.bucket;\n    const actualKey = typeof opts === 'string' ? opts : opts.key;\n    if (!actualBucket) {\n      throw new TosClientError('Must provide bucket param');\n    }\n    return `/${actualBucket}/${encodeURIComponent(actualKey)}`;\n  };\n\n  protected normalizeBucketInput<T extends { bucket: string }>(\n    input: T | string\n  ): T {\n    return (typeof input === 'string' ? { bucket: input } : input) as T;\n  }\n  protected normalizeObjectInput<T extends { key: string }>(\n    input: T | string\n  ): T {\n    return (typeof input === 'string' ? { key: input } : input) as T;\n  }\n\n  protected setObjectContentTypeHeader = (\n    input: string | { key: string },\n    headers: Headers\n  ): void => {\n    if (headers['content-type'] != null) {\n      return;\n    }\n\n    let mimeType = DEFAULT_CONTENT_TYPE;\n    const key = getObjectInputKey(input);\n\n    if (this.opts.autoRecognizeContentType) {\n      mimeType = lookupMimeType(key) || mimeType;\n    }\n\n    if (mimeType) {\n      headers['content-type'] = mimeType;\n    }\n  };\n\n  protected getNormalDataFromError = getNormalDataFromError;\n}\n\nexport default TOSBase;\n\nfunction getAdapter(): AxiosAdapter | undefined {\n  if (process.env.TARGET_ENVIRONMENT === 'node') {\n    // nodejs env\n    return undefined;\n  }\n  if (typeof window !== 'undefined' && typeof window.location !== 'undefined') {\n    // browser env\n    return undefined;\n  }\n\n  switch (true) {\n    case typeof wx !== 'undefined':\n    case typeof swan !== 'undefined':\n    case typeof dd !== 'undefined':\n    case typeof my !== 'undefined':\n      return mpAdapter as AxiosAdapter;\n    case typeof uni !== 'undefined':\n      return uniappAdapter as AxiosAdapter;\n    default:\n      return undefined;\n  }\n}\n","import { covertCamelCase2Kebab, makeArrayProp } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface ListObjectsInput {\n  bucket?: string;\n  continuationToken?: string;\n  delimiter?: string;\n  encodingType?: string;\n  fetchOwner?: string;\n  maxKeys?: string | number;\n  prefix?: string;\n  marker?: string;\n\n  /**\n   * use `marker` instead of `startAfter`\n   */\n  startAfter?: string;\n  /**\n   * equal to listObjectVersions when input\n   */\n  versions?: string;\n  listType?: string;\n  versionIdMarker?: string;\n  /**\n   * only works when pass versions field\n   */\n  keyMarker?: string;\n}\n\nexport interface ListObjectsContentItem {\n  ETag: string;\n  Key: string;\n  // \"2021-08-02T09:53:27.000Z\"\n  LastModified: string;\n  Owner: { ID: string; DisplayName: string };\n  Size: number;\n  StorageClass: string;\n}\n\nexport interface ListObjectsVersionItem {\n  ETag: string;\n  IsLatest: boolean;\n  Key: string;\n  LastModified: string;\n  Owner: { ID: string; DisplayName: string };\n  Size: number;\n  StorageClass: string;\n  VersionId: string;\n}\n\nexport interface ListObjectDeleteMarkerItem {\n  ETag: string;\n  IsLatest: boolean;\n  Key: string;\n  LastModified: string;\n  Owner: { ID: string; DisplayName: string };\n  Size: number;\n  StorageClass: string;\n  VersionId: string;\n}\n\nexport interface ListedCommonPrefix {\n  Prefix: string;\n}\nexport interface ListObjectsOutput {\n  CommonPrefixes: ListedCommonPrefix[];\n  Contents: ListObjectsContentItem[];\n  IsTruncated: boolean;\n  Marker: string;\n  MaxKeys: number;\n  KeyMarker?: string;\n  Name: string;\n  Prefix: string;\n  ContinuationToken?: string;\n  NextContinuationToken?: string;\n  Delimiter?: string;\n  EncodingType?: string;\n  NextMarker?: string;\n  VersionIdMarker?: string;\n  Versions: ListObjectsVersionItem[];\n  NextKeyMarker?: string;\n  DeleteMarkers: ListObjectDeleteMarkerItem[];\n  NextVersionIdMarker?: string;\n}\n\nclass TOSListObjects extends TOSBase {\n  listObjects = listObjects;\n  listObjectVersions = listObjectVersions;\n}\n\n/**\n *\n * @deprecated use listObjectsType2 instead\n * @returns\n */\nexport async function listObjects(\n  this: TOSListObjects,\n  input: ListObjectsInput = {}\n) {\n  const { bucket, ...nextQuery } = input;\n  const ret = await this.fetchBucket<ListObjectsOutput>(\n    input.bucket,\n    'GET',\n    covertCamelCase2Kebab(nextQuery),\n    {}\n  );\n  const arrayProp = makeArrayProp(ret.data);\n  arrayProp('CommonPrefixes');\n  arrayProp('Contents');\n  arrayProp('Versions');\n  arrayProp('DeleteMarkers');\n  return ret;\n}\n\nexport type ListObjectVersionsInput = Pick<\n  ListObjectsInput,\n  | 'bucket'\n  | 'prefix'\n  | 'delimiter'\n  | 'keyMarker'\n  | 'versionIdMarker'\n  | 'maxKeys'\n  | 'encodingType'\n>;\n\nexport interface listObjectVersionsOutput {\n  Name: string;\n  Prefix: string;\n  KeyMarker?: string;\n  VersionIdMarker?: string;\n  MaxKeys: number;\n  Delimiter?: string;\n  IsTruncated: boolean;\n  EncodingType?: string;\n  NextKeyMarker?: string;\n  NextVersionIdMarker?: string;\n  CommonPrefixes: ListedCommonPrefix[];\n  Versions: ListObjectsVersionItem[];\n  DeleteMarkers: ListObjectDeleteMarkerItem[];\n}\n\nexport async function listObjectVersions(\n  this: TOSListObjects,\n  input: ListObjectVersionsInput = {}\n) {\n  const { bucket, ...nextQuery } = input;\n  const ret = await this.fetchBucket<listObjectVersionsOutput>(\n    input.bucket,\n    'GET',\n    covertCamelCase2Kebab({ versions: '', ...nextQuery }),\n    {}\n  );\n  const arrayProp = makeArrayProp(ret.data);\n  arrayProp('CommonPrefixes');\n  arrayProp('Versions');\n  arrayProp('DeleteMarkers');\n  return ret;\n}\n","import { covertCamelCase2Kebab, makeArrayProp } from '../../utils';\nimport TOSBase, { TosResponse } from '../base';\n\nexport interface ListObjectsType2Input {\n  bucket?: string;\n  prefix?: string;\n  delimiter?: string;\n  encodingType?: string;\n  /**\n   * if not specify `maxKeys` field, default maxKeys value is 1000.\n   */\n  maxKeys?: number;\n  continuationToken?: string;\n  startAfter?: string;\n  /**\n   * default value: false\n   * if set false, the method will keep fetch objects until get `maxKeys` objects.\n   * if set true,  the method will fetch objects once\n   */\n  listOnlyOnce?: boolean;\n}\n\nexport interface ListObjectsType2ContentItem {\n  ETag: string;\n  Key: string;\n  // \"2021-08-02T09:53:27.000Z\"\n  LastModified: string;\n  Owner?: { ID: string; DisplayName: string };\n  Size: number;\n  StorageClass: string;\n  HashCrc64ecma?: string;\n}\n\nexport interface ListObjectsType2VersionItem {\n  ETag: string;\n  IsLatest: boolean;\n  Key: string;\n  LastModified: string;\n  Owner: { ID: string; DisplayName: string };\n  Size: number;\n  StorageClass: string;\n  VersionId: string;\n}\n\nexport interface ListObjectDeleteMarkerItem {\n  ETag: string;\n  IsLatest: boolean;\n  Key: string;\n  LastModified: string;\n  Owner: { ID: string; DisplayName: string };\n  Size: number;\n  StorageClass: string;\n  VersionId: string;\n}\n\nexport interface ListedCommonPrefix {\n  Prefix: string;\n}\n\nexport interface ListObjectsType2Output {\n  Name: string;\n  Prefix: string;\n  MaxKeys: number;\n  Delimiter?: string;\n  EncodingType?: string;\n  IsTruncated: boolean;\n  KeyCount: number;\n  StartAfter?: string;\n  ContinuationToken?: string;\n  NextContinuationToken?: string;\n  CommonPrefixes: ListedCommonPrefix[];\n  Contents: ListObjectsType2ContentItem[];\n}\n\nclass TOSListObjectsType2 extends TOSBase {\n  listObjectsType2 = listObjectsType2;\n}\nconst DefaultListMaxKeys = 1000;\n\nexport async function listObjectsType2(\n  this: TOSListObjectsType2,\n  input: ListObjectsType2Input = {}\n): Promise<TosResponse<ListObjectsType2Output>> {\n  const { listOnlyOnce = false } = input;\n\n  let output;\n  if (!input.maxKeys) {\n    input.maxKeys = DefaultListMaxKeys;\n  }\n\n  if (listOnlyOnce) {\n    output = await listObjectsType2Once.call(this, input);\n  } else {\n    const maxKeys = input.maxKeys;\n    let params = {\n      ...input,\n      maxKeys,\n    };\n    while (true) {\n      const res = await listObjectsType2Once.call(this, params);\n      if (output == null) {\n        output = res;\n      } else {\n        output = {\n          ...res,\n          data: output.data,\n        };\n        output.data.KeyCount += res.data.KeyCount;\n        output.data.IsTruncated = res.data.IsTruncated;\n        output.data.NextContinuationToken = res.data.NextContinuationToken;\n        output.data.Contents = output.data.Contents.concat(res.data.Contents);\n        output.data.CommonPrefixes = output.data.CommonPrefixes.concat(\n          res.data.CommonPrefixes\n        );\n      }\n\n      if (!res.data.IsTruncated || output.data.KeyCount >= maxKeys) {\n        break;\n      }\n\n      params.continuationToken = res.data.NextContinuationToken;\n      params.maxKeys = params.maxKeys - res.data.KeyCount;\n    }\n  }\n\n  return output;\n}\nasync function listObjectsType2Once(\n  this: TOSListObjectsType2,\n  input: ListObjectsType2Input\n) {\n  const { bucket, ...nextQuery } = input;\n\n  const ret = await this.fetchBucket<ListObjectsType2Output>(\n    input.bucket,\n    'GET',\n    {\n      'list-type': 2,\n      ...covertCamelCase2Kebab(nextQuery),\n    },\n    {}\n  );\n  const arrayProp = makeArrayProp(ret.data);\n  arrayProp('CommonPrefixes');\n  arrayProp('Contents');\n  return ret;\n}\n","import { TosClientError } from './browser-index';\nimport { TOSBase, type TOSConstructorOptions } from './methods/base';\nimport { paramsSerializer } from './utils';\nimport { getObjectV2 } from './methods/object/getObject';\nimport headObject from './methods/object/headObject';\nimport { listObjectVersions, listObjects } from './methods/object/listObjects';\nimport downloadFile from './methods/object/downloadFile';\nimport { listObjectsType2 } from './methods/object/listObjectsType2';\n\nexport interface ShareLinkClientOptions\n  extends Omit<\n    TOSConstructorOptions,\n    'region' | 'accessKeyId' | 'accessKeySecret' | 'endpoint' | 'bucket'\n  > {\n  policyUrl: string;\n}\n\ninterface ParsedPolicyUrlVal {\n  origin: string;\n  host: string;\n  search: string;\n}\n\n/** @private unstable */\nexport class ShareLinkClient extends TOSBase {\n  shareLinkClientOpts: ShareLinkClientOptions;\n\n  private parsedPolicyUrlVal: ParsedPolicyUrlVal;\n\n  modifyAxiosInst() {\n    const axiosInst = this.axiosInst;\n\n    axiosInst.interceptors.request.use((config) => {\n      const headers = config.headers || {};\n      delete headers['authorization'];\n      headers['host'] = this.parsedPolicyUrlVal.host;\n      config.baseURL = this.parsedPolicyUrlVal.origin;\n      config.paramsSerializer = (params) => {\n        const addQueryStr = paramsSerializer(params);\n        return [this.parsedPolicyUrlVal.search, addQueryStr]\n          .filter((it) => it.trim())\n          .join('&');\n      };\n      return config;\n    });\n  }\n\n  constructor(_opts: ShareLinkClientOptions) {\n    super({\n      ..._opts,\n\n      bucket: 'fake-bucket',\n      region: 'fake-region',\n      accessKeyId: 'fake-accessKeyId',\n      accessKeySecret: 'fake-accessKeySecret',\n      endpoint: 'fake-endpoint.com',\n    });\n\n    this.shareLinkClientOpts = _opts;\n    this.parsedPolicyUrlVal = this.initParsedPolicyUrlVal();\n    this.modifyAxiosInst();\n  }\n\n  private initParsedPolicyUrlVal(): ParsedPolicyUrlVal {\n    const reg = /(https?:\\/\\/(?:[^@]+@)?([^/?]+))[^?]*\\?(.+)/;\n    const matched = this.shareLinkClientOpts.policyUrl.match(reg);\n    if (!matched) {\n      throw new TosClientError('the `policyUrl` param is invalid');\n    }\n    return {\n      origin: matched[1],\n      host: matched[2],\n      search: matched[3],\n    };\n  }\n\n  headObject = headObject;\n  getObjectV2 = getObjectV2;\n  listObjects = listObjects;\n  listObjectsType2 = listObjectsType2;\n  listObjectVersions = listObjectVersions;\n  downloadFile = downloadFile;\n}\n","import TOSBase from '../base';\nimport { Acl, Headers, StorageClass } from '../../interface';\nimport {\n  fillRequestHeaders,\n  isValidBucketName,\n  makeArrayProp,\n  normalizeHeadersKey,\n} from '../../utils';\nimport TosClientError from '../../TosClientError';\nimport {\n  AzRedundancyType,\n  StatusType,\n  StorageClassType,\n} from '../../TosExportEnum';\nimport { TosHeader } from '../object/sharedTypes';\nimport TosServerError from '../../TosServerError';\n\nexport interface Bucket {\n  // '2021-07-20T09:22:05.000Z'\n  CreationDate: string;\n  ExtranetEndpoint: string;\n  IntranetEndpoint: string;\n  Location: string;\n  Name: string;\n  Owner: { ID: string };\n  BucketType?: string;\n}\n\nexport interface ListBucketOutput {\n  Buckets: Bucket[];\n}\n\nexport interface PutBucketInput {\n  bucket?: string;\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWrite?: string;\n  grantWriteAcp?: string;\n  storageClass?: StorageClassType;\n  azRedundancy?: AzRedundancyType;\n  projectName?: string;\n  bucketType?: string;\n  tagging?: string;\n  headers?: {\n    [key: string]: string | undefined;\n    ['x-tos-acl']?: Acl;\n    ['x-tos-grant-full-control']?: string;\n    ['x-tos-grant-read']?: string;\n    ['x-tos-grant-read-acp']?: string;\n    ['x-tos-grant-write']?: string;\n    ['x-tos-grant-write-acp']?: string;\n    ['x-tos-storage-class']?: StorageClass;\n  };\n}\nexport interface ListBucketInput {\n  projectName?: string;\n}\nexport async function listBuckets(this: TOSBase, input: ListBucketInput = {}) {\n  const headers = {};\n  /**\n   * empty string is invalid value\n   */\n  input?.projectName &&\n    fillRequestHeaders({ ...input, headers }, ['projectName']);\n  const res = await this.fetch<ListBucketOutput>('GET', '/', {}, headers);\n  const arrayProp = makeArrayProp(res.data);\n  arrayProp('Buckets');\n\n  return res;\n}\n\nexport async function createBucket(this: TOSBase, input: PutBucketInput) {\n  const actualBucket = input.bucket || this.opts.bucket;\n  // these errors are only for creating bucket\n  if (actualBucket) {\n    if (actualBucket.length < 3 || actualBucket.length > 63) {\n      throw new TosClientError(\n        'invalid bucket name, the length must be [3, 63]'\n      );\n    }\n    if (!/^([a-z]|-|\\d)+$/.test(actualBucket)) {\n      throw new TosClientError(\n        'invalid bucket name, the character set is illegal'\n      );\n    }\n    if (/^-/.test(actualBucket) || /-$/.test(actualBucket)) {\n      throw new TosClientError(\n        `invalid bucket name, the bucket name can be neither starting with '-' nor ending with '-'`\n      );\n    }\n  }\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n\n  fillRequestHeaders(input, [\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWrite',\n    'grantWriteAcp',\n    'storageClass',\n    'azRedundancy',\n    'bucketType',\n    'tagging',\n  ]);\n\n  /**\n   * empty string is invalid value\n   */\n  input?.projectName && fillRequestHeaders(input, ['projectName']);\n\n  const res = await this.fetchBucket(input.bucket, 'PUT', {}, headers);\n  return res;\n}\n\nexport async function deleteBucket(this: TOSBase, bucket?: string) {\n  return this.fetchBucket(bucket, 'DELETE', {}, {});\n}\n\nexport interface HeadBucketOutput {\n  ['x-tos-bucket-region']: string;\n  ['x-tos-storage-class']: StorageClass;\n  ['x-tos-bucket-type']?: string;\n  ProjectName?: string;\n}\n\nexport async function headBucket(this: TOSBase, bucket?: string) {\n  return this.fetchBucket<HeadBucketOutput>(bucket, 'HEAD', {}, {}, undefined, {\n    handleResponse: (res) => {\n      return {\n        ...res.headers,\n        ProjectName: res.headers[TosHeader.HeaderProjectName],\n      };\n    },\n  });\n}\n\nexport interface DoesBucketExistInput {\n  bucket: string;\n}\n\nexport async function doesBucketExist(\n  this: TOSBase,\n  input: DoesBucketExistInput\n): Promise<boolean> {\n  if (!input) {\n    throw new TosClientError('input is required');\n  }\n\n  const { bucket } = input;\n  isValidBucketName(bucket, this.opts.isCustomDomain);\n\n  try {\n    const res = await headBucket.call(this, bucket);\n    return res.statusCode === 200;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.ec === '0006-00000001') {\n        return false;\n      }\n    }\n    throw err;\n  }\n}\n\nexport interface PutBucketStorageClassInput {\n  bucket: string;\n  storageClass: StorageClassType;\n}\n\nexport interface PutBucketStorageClassOutput {}\n\nexport async function putBucketStorageClass(\n  this: TOSBase,\n  input: PutBucketStorageClassInput\n) {\n  const { bucket, storageClass } = input;\n\n  return this.fetchBucket<PutBucketStorageClassOutput>(\n    bucket,\n    'PUT',\n    { storageClass: '' },\n    {\n      'x-tos-storage-class': storageClass,\n    }\n  );\n}\n\nexport interface GetBucketInfoInput {\n  bucket: string;\n}\n\nexport interface BucketInfoOwner {\n  ID: string;\n}\n\nexport interface ServerSideEncryptionConfiguration {\n  Rule?: {\n    ApplyServerSideEncryptionByDefault?: {\n      SSEAlgorithm: string;\n      KMSMasterKeyID?: string;\n      KMSDataEncryption?: string;\n    };\n  };\n}\n\nexport interface BucketInfo {\n  Name: string;\n  Owner: BucketInfoOwner;\n  CreationDate: string;\n  StorageClass: StorageClassType;\n  ProjectName: string;\n  Type: string;\n  Location: string;\n  AzRedundancy: AzRedundancyType;\n  ExtranetEndpoint: string;\n  IntranetEndpoint: string;\n  ExtranetS3Endpoint: string;\n  IntranetS3Endpoint: string;\n  Versioning: string;\n  CrossRegionReplication: StatusType;\n  TransferAcceleration: StatusType;\n  AccessMonitor: StatusType;\n  ServerSideEncryptionConfiguration: ServerSideEncryptionConfiguration;\n}\n\nexport interface GetBucketInfoOutput {\n  Bucket: BucketInfo;\n}\n\nexport async function getBucketInfo(this: TOSBase, input: GetBucketInfoInput) {\n  const { bucket } = input;\n  return this.fetchBucket<GetBucketInfoOutput>(\n    bucket,\n    'GET',\n    { bucketInfo: '' },\n    {}\n  );\n}\n","import TOSBase from '../base';\nimport { Headers, AclInterface, Acl } from '../../interface';\nimport { makeArrayProp } from '../../utils';\n\nexport type GetBucketAclOutput = AclInterface;\n\nexport interface PutBucketAclInput {\n  bucket?: string;\n  acl?: Acl;\n  aclBody?: AclInterface;\n}\n\nexport async function putBucketAcl(this: TOSBase, input: PutBucketAclInput) {\n  const headers: Headers = {};\n  if (input.acl) headers['x-tos-acl'] = input.acl;\n\n  const res = await this.fetchBucket(\n    input.bucket,\n    'PUT',\n    { acl: '' },\n    headers,\n    input.aclBody,\n    { needMd5: true }\n  );\n  return res;\n}\n\nexport async function getBucketAcl(this: TOSBase, bucket?: string) {\n  const res = await this.fetchBucket<GetBucketAclOutput>(\n    bucket,\n    'GET',\n    {\n      acl: '',\n    },\n    {}\n  );\n  const arrayProp = makeArrayProp(res.data);\n  arrayProp('Grants');\n  return res;\n}\n","import TOSBase from '../base';\n\ninterface TLSHttpsConfig {\n  Enable: boolean;\n  MinTLSVersion: string;\n  MaxTLSVersion: string;\n}\n\nexport interface PutBucketHttpsConfigInput  {\n  bucket: string;\n  TLS: TLSHttpsConfig;\n}\n\nexport interface GetBucketHttpsConfigOutput  {\n  TLS: TLSHttpsConfig;\n}\n\n/**\n * @private\n */\nexport async function putBucketHttpsConfig(this: TOSBase, input: PutBucketHttpsConfigInput) {\n  const { bucket, TLS } = input;\n  const res = await this.fetchBucket(\n    bucket,\n    'PUT',\n    { httpsConfig: '' },\n    {},\n    {\n      TLS,\n    },\n  );\n  return res;\n}\n\n/**\n * @private\n */\nexport async function getBucketHttpsConfig(this: TOSBase, bucket: string) {\n  const res = await this.fetchBucket<GetBucketHttpsConfigOutput>(\n    bucket,\n    'GET',\n    {\n      httpsConfig: '',\n    },\n    {}\n  );\n  return res;\n}\n","import TOSBase, { TosResponse } from '../base';\nimport {\n  checkCRC64WithHeaders,\n  fillRequestHeaders,\n  makeRetryStreamAutoClose,\n  normalizeHeadersKey,\n  safeAwait,\n  tryDestroy,\n} from '../../utils';\nimport {\n  Acl,\n  DataTransferStatus,\n  DataTransferType,\n  SupportObjectBody,\n} from '../../interface';\nimport TosClientError from '../../TosClientError';\nimport * as fsp from '../../nodejs/fs-promises';\nimport { Stats, ReadStream } from 'fs';\nimport { getSize, getNewBodyConfig } from './utils';\nimport { retryNamespace } from '../../axios';\nimport { IRateLimiter } from '../../universal/rate-limiter';\nimport { StorageClassType } from '../../TosExportEnum';\n\nexport interface PutObjectInput {\n  bucket?: string;\n  key: string;\n  /**\n   * body is empty buffer if it's falsy.\n   */\n  body?: SupportObjectBody;\n\n  contentLength?: number;\n  contentMD5?: string;\n  contentSHA256?: string;\n  cacheControl?: string;\n  contentDisposition?: string;\n  contentEncoding?: string;\n  contentLanguage?: string;\n  contentType?: string;\n  expires?: Date;\n\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWrite?: string;\n  grantWriteAcp?: string;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n  serverSideEncryption?: string;\n  /**\n   * @private unstable\n   */\n  serverSideDataEncryption?: string;\n\n  meta?: Record<string, string>;\n  websiteRedirectLocation?: string;\n  storageClass?: StorageClassType;\n  ifMatch?: string;\n\n  dataTransferStatusChange?: (status: DataTransferStatus) => void;\n\n  /**\n   * the simple progress feature\n   * percent is [0, 1].\n   *\n   * since putObject is stateless, so if `putObject` fail and you retry it,\n   * `percent` will start from 0 again rather than from the previous value.\n   * if you need `percent` start from the previous value, you can use `uploadFile` instead.\n   */\n  progress?: (percent: number) => void;\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n  /**\n   * only works for nodejs environment\n   **/\n  rateLimiter?: IRateLimiter;\n\n  forbidOverwrite?: boolean;\n\n  callback?: string;\n  callbackVar?: string;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'content-length'?: string;\n    'content-type'?: string;\n    'content-md5'?: string;\n    'cache-control'?: string;\n    expires?: string;\n    'x-tos-acl'?: Acl;\n    'x-tos-grant-full-control'?: string;\n    'x-tos-grant-read'?: string;\n    'x-tos-grant-read-acp'?: string;\n    'x-tos-grant-write-acp'?: string;\n    'x-tos-server-side-encryption-customer-algorithm'?: string;\n    'x-tos-server-side-encryption-customer-key'?: string;\n    'x-tos-server-side-encryption-customer-key-md5'?: string;\n    'x-tos-website-redirect-location'?: string;\n    'x-tos-storage-class'?: string;\n    'x-tos-server-side-encryption'?: string;\n    'x-tos-forbid-overwrite'?: string;\n    'If-Match'?: string;\n  };\n}\n\ninterface PutObjectInputInner extends PutObjectInput {\n  makeRetryStream?: () => NodeJS.ReadableStream | undefined;\n}\n\nexport interface PutObjectOutput {\n  'x-tos-server-side-encryption-customer-algorithm'?: string;\n  'x-tos-server-side-encryption-customer-key-md5'?: string;\n  'x-tos-version-id'?: string;\n  'x-tos-hash-crc64ecma'?: string;\n  'x-tos-server-side-encryption'?: string;\n  CallbackResult?: string;\n}\n\nexport async function putObject(this: TOSBase, input: PutObjectInput | string) {\n  return _putObject.call(this, input);\n}\n\nexport async function _putObject(\n  this: TOSBase,\n  input: PutObjectInputInner | string\n): Promise<TosResponse<PutObjectOutput>> {\n  input = this.normalizeObjectInput(input);\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n  fillRequestHeaders(input, [\n    'contentLength',\n    'contentMD5',\n    'contentSHA256',\n    'cacheControl',\n    'contentDisposition',\n    'contentEncoding',\n    'contentLanguage',\n    'contentType',\n    'expires',\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWrite',\n    'grantWriteAcp',\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'serverSideEncryption',\n    'serverSideDataEncryption',\n    'meta',\n    'websiteRedirectLocation',\n    'storageClass',\n    'trafficLimit',\n    'callback',\n    'callbackVar',\n    'forbidOverwrite',\n    'ifMatch',\n  ]);\n  this.setObjectContentTypeHeader(input, headers);\n\n  const totalSize = getSize(input.body, headers);\n  const totalSizeValid = totalSize != null;\n\n  if (!totalSizeValid && (input.dataTransferStatusChange || input.progress)) {\n    console.warn(\n      `Don't get totalSize of putObject's body, the \\`dataTransferStatusChange\\` and \\`progress\\` callback will not trigger. You can use \\`putObjectFromFile\\` instead`\n    );\n  }\n\n  let consumedBytes = 0;\n  const { dataTransferStatusChange, progress } = input;\n  const triggerDataTransfer = (\n    type: DataTransferType,\n    rwOnceBytes: number = 0\n  ) => {\n    // request cancel will make rwOnceBytes < 0 in browser\n    if (!totalSizeValid || rwOnceBytes < 0) {\n      return;\n    }\n    if (!dataTransferStatusChange && !progress) {\n      return;\n    }\n    consumedBytes += rwOnceBytes;\n\n    dataTransferStatusChange?.({\n      type,\n      rwOnceBytes,\n      consumedBytes,\n      totalBytes: totalSize,\n    });\n    const progressValue = (() => {\n      if (totalSize === 0) {\n        if (type === DataTransferType.Succeed) {\n          return 1;\n        }\n        return 0;\n      }\n      return consumedBytes / totalSize;\n    })();\n    if (progressValue === 1) {\n      if (type === DataTransferType.Succeed) {\n        progress?.(progressValue);\n      } else {\n        // not exec progress\n      }\n    } else {\n      progress?.(progressValue);\n    }\n  };\n\n  const bodyConfig = await getNewBodyConfig({\n    body: input.body,\n    dataTransferCallback: (n) => triggerDataTransfer(DataTransferType.Rw, n),\n    makeRetryStream: input.makeRetryStream,\n    enableCRC: this.opts.enableCRC,\n    rateLimiter: input.rateLimiter,\n  });\n\n  triggerDataTransfer(DataTransferType.Started);\n\n  const task = async () => {\n    const res = await this._fetchObject<PutObjectOutput>(\n      input,\n      'PUT',\n      {},\n      headers,\n      bodyConfig.body || '',\n      {\n        handleResponse: (res) => {\n          const result = { ...res.headers };\n          if ((input as PutObjectInputInner)?.callback && res.data) {\n            result.CallbackResult = `${JSON.stringify(res.data)}`;\n          }\n          return result;\n        },\n        axiosOpts: {\n          [retryNamespace]: {\n            beforeRetry: () => {\n              consumedBytes = 0;\n              bodyConfig.beforeRetry?.();\n            },\n            makeRetryStream: bodyConfig.makeRetryStream,\n          },\n          onUploadProgress: (event) => {\n            triggerDataTransfer(\n              DataTransferType.Rw,\n              event.loaded - consumedBytes\n            );\n          },\n        },\n      }\n    );\n    if (this.opts.enableCRC && bodyConfig.crc) {\n      checkCRC64WithHeaders(bodyConfig.crc, res.headers);\n    }\n    return res;\n  };\n  const [err, res] = await safeAwait(task());\n\n  if (err || !res) {\n    triggerDataTransfer(DataTransferType.Failed);\n    throw err;\n  }\n\n  triggerDataTransfer(DataTransferType.Succeed);\n  return res;\n}\n\ninterface PutObjectFromFileInput extends Omit<PutObjectInput, 'body'> {\n  filePath: string;\n}\n\nexport async function putObjectFromFile(\n  this: TOSBase,\n  input: PutObjectFromFileInput\n): Promise<TosResponse<PutObjectOutput>> {\n  const normalizedHeaders = normalizeHeadersKey(input.headers);\n  if (process.env.TARGET_ENVIRONMENT !== 'node') {\n    throw new TosClientError(\n      \"putObjectFromFile doesn't support in browser environment\"\n    );\n  }\n\n  if (!normalizedHeaders['content-length']) {\n    const stats: Stats = await fsp.stat(input.filePath);\n    normalizedHeaders['content-length'] = `${stats.size}`;\n  }\n\n  const makeRetryStream = makeRetryStreamAutoClose(() =>\n    fsp.createReadStream(input.filePath)\n  );\n\n  try {\n    return await _putObject.call(this, {\n      ...input,\n      body: makeRetryStream.make(),\n      headers: normalizedHeaders,\n      makeRetryStream: makeRetryStream.make,\n    });\n  } catch (err) {\n    tryDestroy(makeRetryStream.getLastStream(), err);\n    throw err;\n  }\n}\n\nexport default putObject;\n","import { ACLType, StorageClassType } from '../../TosExportEnum';\nimport { Acl } from '../../interface';\nimport { fillRequestHeaders, normalizeHeadersKey } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface FetchObjectInput {\n  bucket?: string;\n  key: string;\n  url: string;\n  ignoreSameKey?: boolean;\n\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWriteAcp?: string;\n  storageClass?: StorageClassType;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n  meta?: Record<string, string>;\n\n  // contentMD5 is the base64 encoded of object's md5\n  contentMD5?: string;\n\n  headers?: {\n    [key: string]: string | undefined;\n  };\n}\n\nexport interface FetchObjectOutput {\n  VersionID?: string;\n  Etag: string;\n  SSECAlgorithm?: string;\n  SSECKeyMD5?: string;\n}\n\nexport async function fetchObject(this: TOSBase, input: FetchObjectInput) {\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n  fillRequestHeaders(input, [\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWriteAcp',\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'meta',\n    'storageClass',\n  ]);\n  const res = await this._fetchObject<FetchObjectOutput>(\n    input,\n    'POST',\n    {\n      fetch: '',\n    },\n    headers,\n    {\n      URL: input.url,\n      IgnoreSameKey: input.ignoreSameKey,\n      ContentMD5: input.contentMD5,\n    },\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n\nexport interface PutFetchTaskInput {\n  bucket?: string;\n  key: string;\n  url: string;\n  ignoreSameKey?: boolean;\n\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWriteAcp?: string;\n  storageClass?: StorageClassType;\n\n  ssecAlgorithm?: string;\n  ssecKey?: string;\n  ssecKeyMD5?: string;\n  meta?: Record<string, string>;\n\n  // contentMD5 is the base64 encoded of object's md5\n  contentMD5?: string;\n\n  headers?: {\n    [key: string]: string | undefined;\n  };\n}\n\nexport interface PutFetchTaskOutput {\n  TaskId: string;\n}\n\nexport async function putFetchTask(this: TOSBase, input: PutFetchTaskInput) {\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n  fillRequestHeaders(input, [\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWriteAcp',\n    'ssecAlgorithm',\n    'ssecKey',\n    'ssecKeyMD5',\n    'meta',\n    'storageClass',\n  ]);\n\n  const res = await this._fetchObject<PutFetchTaskOutput>(\n    input,\n    'POST',\n    {\n      fetchTask: '',\n    },\n    headers,\n    {\n      URL: input.url,\n      IgnoreSameKey: input.ignoreSameKey,\n      ContentMD5: input.contentMD5,\n      Object: input.key,\n    },\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n\nexport interface GetFetchTaskInput {\n  bucket?: string;\n  taskId: string;\n}\n\ninterface UserMeta {\n  Key?: string;\n  Value?: string;\n}\n\nexport interface FetchTask {\n  URL?: string;\n  IgnoreSameKey?: boolean;\n  ContentMD5?: string;\n  Bucket?: string;\n  Object?: string;\n  CallbackURL?: string;\n  CallbackHost?: string;\n  CallbackBodyType?: string;\n  CallbackBody?: string;\n  StorageClass?: StorageClassType;\n  Acl?: ACLType;\n  GrantFullControl?: string;\n  GrantRead?: string;\n  GrantReadAcp?: string;\n  GrantWrite?: string;\n  GrantWriteAcp?: string;\n  SSECAlgorithm?: string;\n  SSECKey?: string;\n  SSECKeyMD5?: string;\n  Meta?: UserMeta[];\n  UserMeta?: UserMeta[];\n}\n\nexport interface GetFetchTaskOutput {\n  State: string;\n  Err: string;\n  Task: FetchTask;\n}\n\nexport async function getFetchTask(this: TOSBase, input: GetFetchTaskInput) {\n  const res = await this.fetchBucket<GetFetchTaskOutput>(\n    input.bucket,\n    'GET',\n    {\n      fetchTask: '',\n      taskId: input.taskId,\n    },\n    {},\n    {},\n    {\n      needMd5: true,\n    }\n  );\n\n  if (res.data.Task) {\n    res.data.Task.Meta = res.data.Task.UserMeta;\n  }\n\n  return res;\n}\n","import TosClientError from '../../TosClientError';\nimport { covertCamelCase2Kebab, normalizeProxy } from '../../utils';\nimport TOSBase from '../base';\nimport { validateObjectName } from './utils';\n\nexport interface GetPreSignedUrlInput {\n  bucket?: string;\n  key: string;\n  /**\n   * default: 'GET'\n   */\n  method?: 'GET' | 'PUT';\n  /**\n   * unit: second, default: 1800\n   */\n  expires?: number;\n  alternativeEndpoint?: string;\n  response?: {\n    contentType?: string;\n    contentDisposition?: string;\n  };\n  versionId?: string;\n  query?: Record<string, string>;\n  /**\n   * default: false\n   * if set true. generate domain will direct use `endpoint` or `alternativeEndpoint`.\n   */\n  isCustomDomain?: boolean;\n}\n\nexport function getPreSignedUrl(\n  this: TOSBase,\n  input: GetPreSignedUrlInput | string\n) {\n  validateObjectName(input);\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const endpoint = normalizedInput.alternativeEndpoint || this.opts.endpoint;\n  const subdomain =\n    normalizedInput.alternativeEndpoint || normalizedInput.isCustomDomain\n      ? false\n      : true;\n  const bucket = normalizedInput.bucket || this.opts.bucket || '';\n  if (subdomain && !bucket) {\n    throw new TosClientError('Must provide bucket param');\n  }\n\n  const [newHost, newPath, signingPath] = (() => {\n    const encodedKey = encodeURIComponent(normalizedInput.key);\n    const objectKeyPath = normalizedInput.key\n      .split('/')\n      .map((it) => encodeURIComponent(it))\n      .join('/');\n\n    if (subdomain) {\n      return [`${bucket}.${endpoint}`, `/${objectKeyPath}`, `/${encodedKey}`];\n    }\n    return [endpoint, `/${objectKeyPath}`, `/${encodedKey}`];\n  })();\n\n  const nextQuery: Record<string, any> = normalizedInput.query || {};\n  const setOneQuery = (k: string, v?: string) => {\n    if (nextQuery[k] == null && v != null) {\n      nextQuery[k] = v;\n    }\n  };\n  const response = normalizedInput.response || {};\n  Object.keys(response).forEach((_key) => {\n    const key = _key as keyof typeof response;\n    const kebabKey = covertCamelCase2Kebab(key);\n    setOneQuery(`response-${kebabKey}`, response[key]);\n  });\n  if (normalizedInput.versionId) {\n    setOneQuery('versionId', normalizedInput.versionId);\n  }\n\n  const query = this.getSignatureQuery({\n    bucket,\n    method: normalizedInput.method || 'GET',\n    path: signingPath,\n    endpoint,\n    subdomain,\n    expires: normalizedInput.expires || 1800,\n    query: nextQuery,\n  });\n\n  const normalizedProxy = normalizeProxy(this.opts.proxy);\n  let baseURL = `http${this.opts.secure ? 's' : ''}://${newHost}`;\n  if (normalizedProxy?.url) {\n    // if `baseURL` ends with '/'we filter it.\n    // because `newPath` starts with '/'\n    baseURL = normalizedProxy.url.replace(/\\/+$/g, '');\n    if (normalizedProxy?.needProxyParams) {\n      query['x-proxy-tos-host'] = newHost;\n    }\n  }\n\n  const queryStr = Object.keys(query)\n    .map((key) => {\n      return `${encodeURIComponent(key)}=${encodeURIComponent(query[key])}`;\n    })\n    .join('&');\n\n  return `${baseURL}${newPath}?${queryStr}`;\n}\n\nexport default getPreSignedUrl;\n","\nimport TosClientError from '../../TosClientError';\nimport TosServerError from '../../TosServerError';\nimport TOSBase from '../base';\nimport { headObject } from './headObject';\n\nexport interface DoesObjectExistInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n}\n\nexport async function doesObjectExist(\n  this: TOSBase,\n  input: DoesObjectExistInput\n): Promise<boolean> {\n  if (!input) {\n    throw new TosClientError('input is required');\n  }\n\n  try {\n    const res = await headObject.call(this, {\n      bucket: input.bucket,\n      key: input.key,\n      versionId: input.versionId,\n    });\n    return res.statusCode === 200;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return false;\n      }\n    }\n    throw err;\n  }\n}\n","import TOSBase from '../base';\n\nexport interface DeleteObjectInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n  /**@private unstable */\n  skipTrash?: string;\n  /**@private unstable */\n  recursive?: string;\n}\n\nexport interface DeleteObjectOutput {\n  [key: string]: string | undefined;\n  ['x-tos-delete-marker']: string;\n  ['x-tos-version-id']: string;\n}\n\nexport async function deleteObject(\n  this: TOSBase,\n  input: DeleteObjectInput | string\n) {\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const query: Record<string, any> = {};\n  if (normalizedInput.versionId) {\n    query.versionId = normalizedInput.versionId;\n  }\n  if (normalizedInput.skipTrash) {\n    query.skipTrash = normalizedInput.skipTrash;\n  }\n  if (normalizedInput.recursive) {\n    query.recursive = normalizedInput.recursive;\n  }\n  const res = await this._fetchObject<DeleteObjectOutput>(\n    input,\n    'DELETE',\n    query,\n    {},\n    {},\n    { handleResponse: (res) => res.headers }\n  );\n  return res;\n}\n\nexport default deleteObject;\n","import { fillRequestHeaders, normalizeHeadersKey } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface RenameObjectInput {\n  bucket?: string;\n  key: string;\n  newKey: string;\n  recursiveMkdir?: boolean;\n  forbidOverwrite?: boolean;\n  headers?: {\n    [key: string]: string | undefined;\n  };\n}\n\nexport async function renameObject(this: TOSBase, input: RenameObjectInput) {\n  input.headers = input.headers || {};\n  fillRequestHeaders(input, ['recursiveMkdir', 'forbidOverwrite']);\n  return this._fetchObject<undefined>(\n    input,\n    'PUT',\n    { rename: '', name: input.newKey },\n    input.headers,\n    ''\n  );\n}\n\nexport default renameObject;\n","import { makeArrayProp } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface DeleteMultiObjectsInput {\n  bucket?: string;\n  /**\n   * default: false\n   */\n  quiet?: boolean;\n  objects: {\n    key: string;\n    versionId?: string;\n  }[];\n  /**@private unstable */\n  skipTrash?: string;\n  /**@private unstable */\n  recursive?: string;\n}\n\nexport interface DeleteMultiObjectsOutput {\n  Deleted: {\n    Key: string;\n    VersionId: string;\n    DeleteMarker?: boolean;\n    DeleteMarkerVersionId?: string;\n  }[];\n\n  Error: {\n    Code: string;\n    Message: string;\n    Key: string;\n    VersionId: string;\n  }[];\n}\n\nexport async function deleteMultiObjects(\n  this: TOSBase,\n  input: DeleteMultiObjectsInput\n) {\n  const body = {\n    Quiet: input.quiet,\n    Objects: input.objects.map((it) => ({\n      Key: it.key,\n      VersionId: it.versionId,\n    })),\n  };\n\n  const query: Record<string, string> = {\n    delete: '',\n  };\n\n  if (input.skipTrash) {\n    query.skipTrash = input.skipTrash;\n  }\n\n  if (input.recursive) {\n    query.recursive = input.recursive;\n  }\n\n  const res = await this.fetchBucket<DeleteMultiObjectsOutput>(\n    input.bucket,\n    'POST',\n    query,\n    {},\n    body\n  );\n\n  const arrayProp = makeArrayProp(res.data);\n  arrayProp('Deleted');\n  arrayProp('Error');\n\n  return res;\n}\n\nexport default deleteMultiObjects;\n","import { Acl, AclInterface } from '../../../interface';\nimport { fillRequestHeaders, makeArrayProp, normalizeHeadersKey } from '../../../utils';\nimport TOSBase from '../../base';\n\nexport interface GetObjectAclInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n}\n\nexport type ObjectAclBody = AclInterface & {\n  BucketOwnerEntrusted?: boolean;\n  IsDefault?: boolean;\n};\n\nexport type GetObjectAclOutput = ObjectAclBody;\n\nexport async function getObjectAcl(\n  this: TOSBase,\n  input: GetObjectAclInput | string\n) {\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const query: Record<string, any> = { acl: '' };\n  if (normalizedInput.versionId) {\n    query.versionId = normalizedInput.versionId;\n  }\n\n  const res = await this._fetchObject<GetObjectAclOutput>(input, 'GET', query, {});\n\n  const arrayProp = makeArrayProp(res.data);\n  arrayProp('Grants');\n\n  return res;\n}\n\nexport interface PutObjectAclInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n  acl?: Acl;\n  aclBody?: ObjectAclBody;\n  headers?: {\n    [key: string]: string | undefined;\n    'x-tos-acl'?: Acl;\n  };\n}\n\nexport async function putObjectAcl(this: TOSBase, input: PutObjectAclInput) {\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n  const query: Record<string, any> = { acl: '' };\n  if (input.versionId) {\n    query.versionId = input.versionId;\n  }\n  fillRequestHeaders(input, ['acl']);\n\n  return this._fetchObject<undefined>(\n    input,\n    'PUT',\n    query,\n    headers,\n    input.aclBody\n  );\n}\n","import TOSBase from '../../base';\n\nexport interface AbortMultipartUploadInput {\n  bucket?: string;\n  key: string;\n  uploadId: string;\n}\n\nexport async function abortMultipartUpload(\n  this: TOSBase,\n  input: AbortMultipartUploadInput\n) {\n  return this._fetchObject<undefined>(\n    input,\n    'DELETE',\n    {\n      uploadId: input.uploadId,\n    },\n    {}\n  );\n}\n","import { covertCamelCase2Kebab, makeArrayProp } from '../../../utils';\nimport TOSBase from '../../base';\n\nexport interface ListMultipartUploadsInput {\n  bucket?: string;\n  maxUploads?: number;\n  keyMarker?: string;\n  uploadIdMarker?: string;\n  delimiter?: string;\n  encodingType?: string;\n  prefix?: string;\n}\n\nexport interface ListMultipartUploadsOutput {\n  Uploads: {\n    Key: string;\n    UploadId: string;\n    StorageClass: string;\n    Initiated: string;\n  }[];\n  CommonPrefixes: string[];\n  Delimiter?: string;\n  EncodingType?: string;\n  KeyMarker?: string;\n  NextKeyMarker: string;\n  MaxUploads?: string;\n  UploadIdMarker?: string;\n  NextUploadIdMarker: string;\n  Prefix?: string;\n  IsTruncated: boolean;\n  Bucket: string;\n}\n\nexport async function listMultipartUploads(\n  this: TOSBase,\n  input: ListMultipartUploadsInput = {}\n) {\n  const { bucket, ...nextQuery } = input;\n  const ret = await this.fetchBucket<ListMultipartUploadsOutput>(\n    input.bucket,\n    'GET',\n    {\n      uploads: '',\n      ...covertCamelCase2Kebab(nextQuery),\n    },\n    {}\n  );\n\n  const arrayProp = makeArrayProp(ret.data);\n  arrayProp('Uploads');\n  arrayProp('CommonPrefixes');\n\n  return ret;\n}\n","import TOSBase from '../base';\nimport {\n  checkCRC64WithHeaders,\n  fillRequestHeaders,\n  normalizeHeadersKey,\n  safeAwait,\n} from '../../utils';\nimport { Acl, DataTransferStatus, DataTransferType } from '../../interface';\nimport { IRateLimiter } from '../../universal/rate-limiter';\nimport { getNewBodyConfig, getSize } from './utils';\nimport { StorageClassType } from '../../TosExportEnum';\nimport { retryNamespace } from '../../axios';\nimport TosClientError from '../../TosClientError';\nimport { combineCrc64 } from '../../universal/crc';\n\nexport interface AppendObjectInput {\n  bucket?: string;\n  key: string;\n  offset: number;\n  // body is empty buffer if it's falsy\n  body?: File | Blob | Buffer | NodeJS.ReadableStream;\n\n  // must provide preHashCrc64ecma if enableCRC is true and offset is non-zero\n  preHashCrc64ecma?: string;\n\n  /**\n   * unit: bit/s\n   * server side traffic limit\n   **/\n  trafficLimit?: number;\n  /**\n   * only works for nodejs environment\n   */\n  rateLimiter?: IRateLimiter;\n\n  contentLength?: number;\n  cacheControl?: string;\n  contentDisposition?: string;\n  contentEncoding?: string;\n  contentLanguage?: string;\n  contentType?: string;\n  expires?: Date;\n\n  acl?: Acl;\n  grantFullControl?: string;\n  grantRead?: string;\n  grantReadAcp?: string;\n  grantWriteAcp?: string;\n\n  meta?: Record<string, string>;\n  websiteRedirectLocation?: string;\n  storageClass?: StorageClassType;\n\n  dataTransferStatusChange?: (status: DataTransferStatus) => void;\n\n  /**\n   * the simple progress feature\n   * percent is [0, 1].\n   *\n   * since appendObject is stateless, so if `appendObject` fail and you retry it,\n   * `percent` will start from 0 again rather than from the previous value.\n   * if you need `percent` start from the previous value, you can use `uploadFile` instead.\n   */\n  progress?: (percent: number) => void;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'Cache-Control'?: string;\n    'x-tos-acl'?: Acl;\n    'x-tos-grant-full-control'?: string;\n    'x-tos-grant-read'?: string;\n    'x-tos-grant-read-acp'?: string;\n    'x-tos-grant-write-acp'?: string;\n    'x-tos-website-redirect-location'?: string;\n    'x-tos-storage-class'?: string;\n  };\n}\n\nexport interface AppendObjectOutput {\n  nextAppendOffset: number;\n  hashCrc64ecma: string;\n  'x-tos-version-id'?: string;\n  'x-tos-hash-crc64ecma'?: string;\n  'x-tos-next-append-offset'?: string;\n}\n\nexport async function appendObject(\n  this: TOSBase,\n  input: AppendObjectInput | string\n) {\n  const normalizedInput = (input = this.normalizeObjectInput(input));\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n  fillRequestHeaders(input, [\n    'contentLength',\n    'cacheControl',\n    'contentDisposition',\n    'contentEncoding',\n    'contentLanguage',\n    'contentType',\n    'expires',\n    'acl',\n    'grantFullControl',\n    'grantRead',\n    'grantReadAcp',\n    'grantWriteAcp',\n    'meta',\n    'websiteRedirectLocation',\n    'storageClass',\n    'trafficLimit',\n  ]);\n  this.setObjectContentTypeHeader(input, headers);\n\n  const totalSize = getSize(input.body, headers);\n  const totalSizeValid = totalSize != null;\n  if (!totalSizeValid) {\n    throw new TosClientError(\n      `appendObject needs to know the content length in advance`\n    );\n  }\n  headers['content-length'] = headers['content-length'] || `${totalSize}`;\n\n  if (this.opts.enableCRC && input.offset !== 0 && !input.preHashCrc64ecma) {\n    throw new TosClientError(\n      'must provide preHashCrc64ecma if enableCRC is true and offset is non-zero'\n    );\n  }\n\n  let consumedBytes = 0;\n  const { dataTransferStatusChange, progress } = input;\n  const triggerDataTransfer = (\n    type: DataTransferType,\n    rwOnceBytes: number = 0\n  ) => {\n    // request cancel will make rwOnceBytes < 0 in browser\n    if (!totalSizeValid || rwOnceBytes < 0) {\n      return;\n    }\n    if (!dataTransferStatusChange && !progress) {\n      return;\n    }\n    consumedBytes += rwOnceBytes;\n\n    dataTransferStatusChange?.({\n      type,\n      rwOnceBytes,\n      consumedBytes,\n      totalBytes: totalSize,\n    });\n    const progressValue = (() => {\n      if (totalSize === 0) {\n        if (type === DataTransferType.Succeed) {\n          return 1;\n        }\n        return 0;\n      }\n      return consumedBytes / totalSize;\n    })();\n    if (progressValue === 1) {\n      if (type === DataTransferType.Succeed) {\n        progress?.(progressValue);\n      } else {\n        // not exec progress\n      }\n    } else {\n      progress?.(progressValue);\n    }\n  };\n\n  const bodyConfig = await getNewBodyConfig({\n    body: input.body,\n    dataTransferCallback: (n) => triggerDataTransfer(DataTransferType.Rw, n),\n    makeRetryStream: undefined,\n    enableCRC: this.opts.enableCRC,\n    rateLimiter: input.rateLimiter,\n  });\n\n  triggerDataTransfer(DataTransferType.Started);\n  const task = async () => {\n    const res = await this._fetchObject<AppendObjectOutput>(\n      input,\n      'POST',\n      { append: '', offset: normalizedInput.offset },\n      headers,\n      bodyConfig.body || '',\n      {\n        handleResponse: (res) => ({\n          ...res.headers,\n          nextAppendOffset: +res.headers['x-tos-next-append-offset'],\n          hashCrc64ecma: res.headers['x-tos-hash-crc64ecma'],\n        }),\n        axiosOpts: {\n          [retryNamespace]: {\n            beforeRetry: () => {\n              consumedBytes = 0;\n              bodyConfig.beforeRetry?.();\n            },\n            makeRetryStream: bodyConfig.makeRetryStream,\n          },\n          onUploadProgress: (event) => {\n            triggerDataTransfer(\n              DataTransferType.Rw,\n              event.loaded - consumedBytes\n            );\n          },\n        },\n      }\n    );\n    if (this.opts.enableCRC && bodyConfig.crc) {\n      const appendObjectCrc = combineCrc64(\n        normalizedInput.preHashCrc64ecma || '0',\n        bodyConfig.crc.getCrc64(),\n        totalSize\n      );\n      checkCRC64WithHeaders(appendObjectCrc, res.headers);\n    }\n    return res;\n  };\n  const [err, res] = await safeAwait(task());\n\n  if (err || !res) {\n    triggerDataTransfer(DataTransferType.Failed);\n    throw err;\n  }\n\n  triggerDataTransfer(DataTransferType.Succeed);\n  return res;\n}\n\nexport default appendObject;\n","import { fillRequestHeaders, normalizeHeadersKey } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface SetObjectMetaInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n\n  // object meta data\n  cacheControl?: string;\n  contentDisposition?: string;\n  contentEncoding?: string;\n  contentLanguage?: string;\n  contentType?: string;\n  expires?: Date;\n  meta?: Record<string, string>;\n\n  headers?: {\n    [key: string]: string | undefined;\n    'Cache-Control'?: string;\n    'Content-Disposition'?: string;\n    Expires?: string;\n    'Content-Type'?: string;\n    'Content-Language'?: string;\n  };\n}\n\nexport async function setObjectMeta(\n  this: TOSBase,\n  input: SetObjectMetaInput | string\n) {\n  const normalizedInput = typeof input === 'string' ? { key: input } : input;\n  const headers = (normalizedInput.headers = normalizeHeadersKey(\n    normalizedInput.headers\n  ));\n  fillRequestHeaders(normalizedInput, [\n    'cacheControl',\n    'contentDisposition',\n    'contentEncoding',\n    'contentLanguage',\n    'contentType',\n    'expires',\n    'meta',\n  ]);\n  const query: Record<string, any> = { metadata: '' };\n  if (normalizedInput.versionId) {\n    query.versionId = normalizedInput.versionId;\n  }\n\n  return this._fetchObject<undefined>(input, 'POST', query, headers);\n}\n\nexport default setObjectMeta;\n","import TOSBase from '../base';\nimport { parse, stringify, hmacSha256 } from '../../universal/crypto';\nimport TosClientError from '../../TosClientError';\nimport { validateObjectName } from './utils';\n\nexport type PostSignatureCondition =\n  | {\n      [key: string]: string;\n    }\n  | ['eq', string, string]\n  | ['starts-with', string, string]\n  | ['content-length-range', number, number];\n\nexport interface CalculatePostSignatureInput {\n  bucket?: string;\n  key: string;\n  // unit: seconds, default: 3600(1 hour)\n  expiresIn?: number;\n  fields?: Record<string, unknown>;\n  conditions?: PostSignatureCondition[];\n}\n\nexport async function calculatePostSignature(\n  this: TOSBase,\n  input: CalculatePostSignatureInput | string\n) {\n  validateObjectName(input);\n  input = this.normalizeObjectInput(input);\n  const { expiresIn = 3600, key } = input;\n  const bucket = input.bucket || this.opts.bucket;\n  const fields = { ...input.fields };\n  const conditions = [...(input.conditions || [])];\n\n  if (!bucket) {\n    throw new TosClientError('Must provide bucket param');\n  }\n\n  const accessKeySecret = this.opts.accessKeySecret;\n  const date = new Date();\n  const expirationDateStr = getDateTimeStr({\n    date: new Date(date.valueOf() + expiresIn * 1000),\n    type: 'ISO',\n  });\n  const dateStr = getDateTimeStr();\n  const date8Str = dateStr.substring(0, 8);\n  const service = 'tos';\n  const requestStr = 'request';\n\n  const kDate = hmacSha256(accessKeySecret, date8Str);\n  const kRegion = hmacSha256(kDate, this.opts.region);\n  const kService = hmacSha256(kRegion, service);\n  const signingKey = hmacSha256(kService, requestStr);\n\n  const credential = [\n    this.opts.accessKeyId,\n    date8Str,\n    this.opts.region,\n    service,\n    requestStr,\n  ].join('/');\n\n  const addedInForm: Record<string, string> = {\n    key,\n    'x-tos-algorithm': 'TOS4-HMAC-SHA256',\n    'x-tos-date': dateStr,\n    'x-tos-credential': credential,\n  };\n  if (this.opts.stsToken) {\n    addedInForm['x-tos-security-token'] = this.opts.stsToken;\n  }\n\n  conditions.push({ bucket });\n  Object.entries(addedInForm).forEach(([key, value]) => {\n    fields[key] = value;\n  });\n  Object.entries(fields).forEach(([key, value]) => {\n    conditions.push({ [key]: `${value}` });\n  });\n\n  const policy = {\n    expiration: expirationDateStr,\n    conditions,\n  };\n  const policyStr = JSON.stringify(policy);\n  const policyBase64 = stringify(parse(policyStr, 'utf-8'), 'base64');\n  const signature = hmacSha256(signingKey, policyBase64, 'hex');\n\n  fields.policy = policyBase64;\n  fields['x-tos-signature'] = signature;\n\n  return fields;\n}\n\n/**\n *\n * Z for 20130728T000000Z\n * ISO for 2007-12-01T12:00:00.000Z\n * @param opt\n * @returns\n */\nfunction getDateTimeStr(opt?: { date?: Date; type?: 'Z' | 'ISO' }) {\n  const { date = new Date(), type = 'Z' } = opt || {};\n  if (type === 'ISO') {\n    return date.toISOString();\n  }\n\n  const dateTime =\n    date.toISOString().replace(/\\..+/, '').replace(/-/g, '').replace(/:/g, '') +\n    'Z';\n\n  return dateTime;\n}\n\nexport default calculatePostSignature;\n","import TosServerError from './TosServerError';\nimport { getNormalDataFromError } from './utils';\n\nconst defaultEmptyMethodMap: Record<string, boolean> = {\n  getBucketCustomDomain: true,\n  getBucketIntelligenttiering: true,\n  getBucketInventory: true,\n  listBucketInventory: true,\n  getBucketMirrorBack: true,\n  getBucketNotification: true,\n  getBucketPolicy: true,\n  getBucketRealTimeLog: true,\n  getBucketReplication: true,\n  getBucketTagging: true,\n  getBucketWebsite: true,\n};\n\nexport function handleEmptyServerError<T>(\n  err: Error | TosServerError | unknown,\n  opts: {\n    defaultResponse: T;\n    enableCatchEmptyServerError?: boolean;\n    methodKey: string;\n  }\n) {\n  const { enableCatchEmptyServerError, methodKey, defaultResponse } = opts;\n  if (err instanceof TosServerError) {\n    if (enableCatchEmptyServerError) {\n      if (err.statusCode === 404) {\n        return getNormalDataFromError(defaultResponse, err);\n      }\n    }\n    // 404catchenableCatchEmptyServerErrorbreak change\n    else if (enableCatchEmptyServerError === undefined) {\n      if (err.statusCode === 404 && defaultEmptyMethodMap[methodKey]) {\n        return getNormalDataFromError(defaultResponse, err);\n      }\n    }\n  }\n  throw err;\n}\n","import { makeArrayProp } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase, { TosResponse } from '../base';\n\nexport interface BucketPolicyStatement {\n  Sid: string;\n  Effect: 'Allow' | 'Deny';\n  Action?: string | string[];\n  NotAction?: string | string[];\n  Condition?: {\n    [key in string]: {\n      [key in string]: string[];\n    };\n  };\n  Principal?: string[];\n  NotPrincipal?: string[];\n  Resource?: string | string[];\n  NotResource?: string | string[];\n}\n\nexport interface GetBucketPolicyOutput {\n  Statement: BucketPolicyStatement[];\n  Version: string;\n}\n\ninterface PutBucketPolicyInputPolicy\n  extends Omit<GetBucketPolicyOutput, 'Version'> {\n  Version?: string;\n}\n\nexport interface PutBucketPolicyInput {\n  bucket?: string;\n  policy: PutBucketPolicyInputPolicy;\n}\n\nexport async function putBucketPolicy(\n  this: TOSBase,\n  input: PutBucketPolicyInput\n) {\n  if (\n    (this.opts.enableOptimizeMethodBehavior ||\n      this.opts.enableOptimizeMethodBehavior === undefined) &&\n    !input.policy.Statement.length\n  ) {\n    return deleteBucketPolicy.call(this, input.bucket);\n  }\n\n  const res = await this.fetchBucket(\n    input.bucket,\n    'PUT',\n    { policy: '' },\n    {},\n    input.policy,\n    { needMd5: true }\n  );\n  return res;\n}\n\nexport async function getBucketPolicy(\n  this: TOSBase,\n  bucket?: string\n): Promise<TosResponse<GetBucketPolicyOutput>> {\n  try {\n    const res = await this.fetchBucket<GetBucketPolicyOutput>(\n      bucket,\n      'GET',\n      {\n        policy: '',\n      },\n      {}\n    );\n    res.data.Statement.forEach((it: any) => {\n      const arrayProp = makeArrayProp(it);\n\n      Object.keys(it.Condition || {}).forEach((key) => {\n        Object.keys(it.Condition[key]).forEach((key2) => {\n          arrayProp(`Condition[\"${key}\"][\"${key2}\"]`);\n        });\n      });\n    });\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketPolicyOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketPolicy',\n      defaultResponse: {\n        Statement: [],\n        Version: '2012-10-17',\n      },\n    });\n  }\n}\n\nexport async function deleteBucketPolicy(this: TOSBase, bucket?: string) {\n  return this.fetchBucket(bucket, 'DELETE', { policy: '' }, {});\n}\n","import { VersioningStatusType } from '../../TosExportEnum';\nimport TOSBase from '../base';\n\n// for backward compatibility\nexport { VersioningStatusType as BucketVersioningStatus };\n\nexport type PutBucketVersioningInputStatus =\n  | VersioningStatusType.Enable\n  | VersioningStatusType.Enabled\n  | VersioningStatusType.Suspended;\n\nexport interface GetBucketVersioningOutput {\n  Status: VersioningStatusType;\n}\n\nexport interface PutBucketVersioningInput {\n  bucket?: string;\n  status: PutBucketVersioningInputStatus;\n}\n\nexport async function getBucketVersioning(this: TOSBase, bucket?: string) {\n  return this.fetchBucket<GetBucketVersioningOutput>(\n    bucket,\n    'GET',\n    { versioning: '' },\n    {}\n  );\n}\n\nexport async function putBucketVersioning(\n  this: TOSBase,\n  input: PutBucketVersioningInput\n) {\n  return this.fetchBucket(\n    input.bucket,\n    'PUT',\n    { versioning: '' },\n    {},\n    {\n      Status: input.status,\n    }\n  );\n}\n","import TosClientError from '../../TosClientError';\nimport { obj2QueryStr } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface PreSignedPolicyURLInput {\n  bucket?: string;\n  /**\n   * unit: s\n   * default value: 3600\n   * range is: [1, 604800]\n   */\n  expires?: number;\n\n  conditions: PolicySignatureCondition[];\n\n  alternativeEndpoint?: string;\n  /**\n   * default: false\n   * if set true. generate domain will direct use `endpoint` or `alternativeEndpoint`.\n   */\n  isCustomDomain?: boolean;\n}\n\nexport interface PreSignedPolicyURLOutput {\n  getSignedURLForList(additionalQuery?: Record<string, string>): string;\n\n  // since conditions maybe includes multi exact key, so key isn't predictable\n  getSignedURLForGetOrHead(\n    key: string,\n    additionalQuery?: Record<string, string>\n  ): string;\n\n  signedQuery: string;\n}\n\nexport interface PolicySignatureCondition {\n  key: 'key';\n  value: string;\n  operator?: 'eq' | 'starts-with';\n}\n\ninterface NormalizedInput {\n  bucket: string;\n  /**\n   * unit: s\n   * default value: 3600\n   * range is: [1, 604800]\n   */\n  expires: number;\n\n  conditions: NormalizedPolicySignatureCondition[];\n\n  alternativeEndpoint?: string;\n}\n\ntype NormalizedPolicySignatureCondition = [\n  'eq' | 'starts-with',\n  '$key' | '$bucket',\n  string\n];\n\nexport function preSignedPolicyURL(\n  this: TOSBase,\n  input: PreSignedPolicyURLInput\n): PreSignedPolicyURLOutput {\n  const normalizedInput = normalizeInput.call(this, input);\n\n  validateConditions(input.conditions);\n\n  const endpoint =\n    input.alternativeEndpoint ||\n    (input.isCustomDomain\n      ? this.opts.endpoint\n      : `${normalizedInput.bucket}.${this.opts.endpoint}`);\n\n  const baseURL = `http${this.opts.secure ? 's' : ''}://${endpoint}`;\n\n  const query = this.getSignatureQuery({\n    bucket: normalizedInput.bucket,\n    expires: normalizedInput.expires,\n    policy: {\n      conditions: normalizedInput.conditions,\n    },\n  });\n\n  const queryStr = obj2QueryStr(query);\n\n  const getSignedURLForList: PreSignedPolicyURLOutput['getSignedURLForList'] = (\n    additionalQuery\n  ) => {\n    const str2 = obj2QueryStr(additionalQuery);\n    const q = [queryStr, str2].filter(Boolean).join('&');\n    return `${baseURL}?${q}`;\n  };\n  const getSignedURLForGetOrHead: PreSignedPolicyURLOutput['getSignedURLForGetOrHead'] =\n    (key, additionalQuery) => {\n      const str2 = obj2QueryStr(additionalQuery);\n      const q = [queryStr, str2].filter(Boolean).join('&');\n      // keep   '/'\n      const keyPath = key\n        .split('/')\n        .map((it) => encodeURIComponent(it))\n        .join('/');\n      return `${baseURL}/${keyPath}?${q}`;\n    };\n  return {\n    getSignedURLForList,\n    getSignedURLForGetOrHead,\n    signedQuery: queryStr,\n  };\n}\n\nfunction normalizeInput(\n  this: TOSBase,\n  input: PreSignedPolicyURLInput\n): NormalizedInput {\n  const actualBucket = input.bucket || this.opts.bucket;\n  const defaultExpires = 3600;\n\n  if (!actualBucket) {\n    throw new TosClientError('Must provide bucket param');\n  }\n\n  validateConditions(input.conditions);\n  const normalizedConditions: NormalizedPolicySignatureCondition[] =\n    input.conditions.map((it) => [it.operator || 'eq', '$key', it.value]);\n  normalizedConditions.push(['eq', '$bucket', actualBucket]);\n\n  return {\n    bucket: actualBucket,\n    expires: input.expires || defaultExpires,\n    conditions: normalizedConditions,\n  };\n}\n\nfunction validateConditions(conditions: PolicySignatureCondition[]) {\n  if (conditions.length < 1) {\n    throw new TosClientError(\n      'The `conditions` field of `PreSignedPolicyURLInput` must has one item at least'\n    );\n  }\n\n  for (const it of conditions) {\n    if (it.key !== 'key') {\n      throw new TosClientError(\n        \"The `key` field of `PolicySignatureCondition` must be `'key'`\"\n      );\n    }\n\n    if (it.operator && it.operator !== 'eq' && it.operator !== 'starts-with') {\n      throw new TosClientError(\n        \"The `operator` field of `PolicySignatureCondition` must be `'eq'` or `'starts-with'`\"\n      );\n    }\n  }\n}\n","import TOSBase from '../base';\n\nexport interface GetBucketLocationInput {\n  bucket: string;\n}\n\nexport interface GetBucketLocationOutput {\n  ExtranetEndpoint: string;\n  IntranetEndpoint: string;\n  Region: string;\n}\n\nexport async function getBucketLocation(\n  this: TOSBase,\n  input: GetBucketLocationInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<GetBucketLocationOutput>(\n    bucket,\n    'GET',\n    { location: '' },\n    {}\n  );\n}\n","import { HttpMethodType } from '../../TosExportEnum';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nexport interface CORSRule {\n  AllowedOrigins: string[];\n  AllowedMethods: HttpMethodType[];\n  AllowedHeaders: string[];\n  ExposeHeaders: string[];\n  MaxAgeSeconds: number;\n  ResponseVary?: boolean;\n}\n\nexport interface GetBucketCORSInput {\n  bucket: string;\n}\n\nexport interface GetBucketCORSOutput {\n  CORSRules: CORSRule[];\n}\n\nexport async function getBucketCORS(this: TOSBase, input: GetBucketCORSInput) {\n  try {\n    const { bucket } = input;\n\n    return await this.fetchBucket<GetBucketCORSOutput>(\n      bucket,\n      'GET',\n      { cors: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketCORSOutput>(error, {\n      defaultResponse: { CORSRules: [] },\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketCORS',\n    });\n  }\n}\n\nexport interface PutBucketCORSInput {\n  bucket: string;\n  CORSRules: CORSRule[];\n}\n\nexport interface PutBucketCORSOutput {}\n\nexport async function putBucketCORS(this: TOSBase, input: PutBucketCORSInput) {\n  const { bucket, CORSRules } = input;\n  if (this.opts.enableOptimizeMethodBehavior && !CORSRules.length) {\n    return deleteBucketCORS.call(this, { bucket });\n  }\n  return this.fetchBucket<PutBucketCORSOutput>(\n    bucket,\n    'PUT',\n    { cors: '' },\n    {},\n    { CORSRules }\n  );\n}\n\nexport interface DeleteBucketCORSInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketCORSOutput {}\n\nexport async function deleteBucketCORS(\n  this: TOSBase,\n  input: DeleteBucketCORSInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketCORSOutput>(\n    bucket,\n    'DELETE',\n    { cors: '' },\n    {}\n  );\n}\n","import { StorageClassType } from '../../TosExportEnum';\nimport TOSBase from '../base';\nimport { fillRequestHeaders, normalizeHeadersKey } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\ninterface LifecycleRule {\n  ID?: string;\n  Prefix?: string;\n  Status: 'Enabled' | 'Disabled';\n  Filter?: {\n    GreaterThanIncludeEqual?: 'Enabled' | 'Disabled';\n    LessThanIncludeEqual?: 'Enabled' | 'Disabled';\n    /** unit bit */\n    ObjectSizeGreaterThan?: number;\n    /** unit bit */\n    ObjectSizeLessThan?: number;\n    /**\n     * @private unstable\n     */\n    Not?: {\n      Prefix?: string;\n      Tags?: {\n        Key?: string;\n        Value?: string;\n      }[];\n    }[];\n  };\n  Expiration?: { Date?: string; Days?: number };\n  Days?: number;\n  Date?: string;\n  NoncurrentVersionExpiration?: {\n    NoncurrentDays?: number;\n    NoncurrentDate?: string;\n  };\n  AbortIncompleteMultipartUpload?: { DaysAfterInitiation?: number };\n  DaysAfterInitiation?: number;\n  Transitions?: {\n    StorageClass: StorageClassType;\n    Days?: number;\n    Date?: string;\n  }[];\n  AccessTimeTransitions?: {\n    StorageClass: StorageClassType;\n    Days?: number;\n  }[];\n  AccessTimeExpiration?: {\n    Days: number;\n  };\n  NoncurrentVersionAccessTimeTransitions?: {\n    StorageClass: StorageClassType;\n    NoncurrentDays?: number;\n  }[];\n  NoncurrentVersionAccessTimeExpiration?: {\n    NoncurrentDays: number;\n  };\n  NoncurrentVersionTransitions?: {\n    StorageClass?: StorageClassType;\n    NoncurrentDays?: number;\n    NoncurrentDate?: string;\n  }[];\n  Tags?: {\n    Key?: string;\n    Value?: string;\n  }[];\n}\n\nexport interface PutBucketLifecycleInput {\n  bucket: string;\n  rules: LifecycleRule[];\n  allowSameActionOverlap?: boolean;\n}\n\nexport interface PutBucketLifecycleOutput {}\n\nexport async function putBucketLifecycle(\n  this: TOSBase,\n  input: PutBucketLifecycleInput\n) {\n  const { bucket, rules } = input;\n  if (this.opts.enableOptimizeMethodBehavior && !rules.length) {\n    return deleteBucketLifecycle.call(this, { bucket });\n  }\n\n  const headers = {};\n  fillRequestHeaders({ ...input, headers }, ['allowSameActionOverlap']);\n\n  return this.fetchBucket<PutBucketLifecycleOutput>(\n    bucket,\n    'PUT',\n    { lifecycle: '' },\n    headers,\n    {\n      Rules: rules,\n    }\n  );\n}\n\nexport interface GetBucketLifecycleInput {\n  bucket: string;\n}\n\nexport interface GetBucketLifecycleOutput {\n  Rules: LifecycleRule[];\n  AllowSameActionOverlap?: boolean;\n}\n\nexport async function getBucketLifecycle(\n  this: TOSBase,\n  input: GetBucketLifecycleInput\n) {\n  try {\n    const { bucket } = input;\n\n    return await this.fetchBucket<GetBucketLifecycleOutput>(\n      bucket,\n      'GET',\n      { lifecycle: '' },\n      {},\n      {},\n      {\n        handleResponse: (res) => {\n          return {\n            AllowSameActionOverlap:\n              res.headers['x-tos-allow-same-action-overlap'],\n            Rules: res.data.Rules,\n          };\n        },\n      }\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketLifecycleOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketLifecycle',\n      defaultResponse: {\n        Rules: [],\n      },\n    });\n  }\n}\n\nexport interface DeleteBucketLifecycleInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketLifecycleOutput {}\n\nexport async function deleteBucketLifecycle(\n  this: TOSBase,\n  input: DeleteBucketLifecycleInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketLifecycleOutput>(\n    bucket,\n    'DELETE',\n    { lifecycle: '' },\n    {}\n  );\n}\n","import TOSBase from '../base';\nimport { hashMd5 } from '../../universal/crypto.browser';\n\nexport interface EncryptionData {\n  Rule: EncryptionDataRule;\n}\nexport interface EncryptionDataRule {\n  ApplyServerSideEncryptionByDefault: {\n    // SSEAlgorithm support 'kms' and 'AES256' and 'sm4'\n    SSEAlgorithm: string;\n    KMSMasterKeyID?: string;\n    /** @private unstable */\n    KMSDataEncryption?: string;\n  };\n}\n\nexport async function putBucketEncryption(\n  this: TOSBase,\n  input: { rule: EncryptionDataRule } & { bucket?: string }\n) {\n  const { bucket, rule } = input;\n\n  return this.fetchBucket(\n    bucket,\n    'PUT',\n    { encryption: '' },\n    {\n      'Content-MD5': hashMd5(\n        JSON.stringify({\n          Rule: rule,\n        }),\n        'base64'\n      ),\n    },\n    {\n      Rule: rule,\n    }\n  );\n}\n\nexport async function getBucketEncryption(\n  this: TOSBase,\n  input: { bucket?: string }\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<EncryptionData>(\n    bucket,\n    'GET',\n    { encryption: '' },\n    {}\n  );\n}\n\nexport async function deleteBucketEncryption(\n  this: TOSBase,\n  input: { bucket?: string }\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket(bucket, 'DELETE', { encryption: '' }, {});\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'mirror';\n\nexport interface FetchCondition {\n  /**\n   * deny\n   */\n  PrefixNotFetch?: string[];\n  SuffixNotFetch?: string[];\n  /**\n   * B\n   */\n  SizeRangeNotFetch?: string[];\n  /**\n   * \n   */\n  PrefixFetch?: string[];\n  SuffixFetch?: string[];\n  SizeRangeFetch?: string[];\n}\n\nexport interface MirrorBackRule {\n  ID: string;\n  Condition: {\n    HttpCode: number;\n    KeyPrefix?: string;\n    KeySuffix?: string;\n    /** private unstable */\n    AllowHost?: string[];\n    /** private unstable */\n    HttpMethod?: string[];\n  };\n  /** @private unstable */\n  FetchCondition?: FetchCondition;\n  Redirect: {\n    RedirectType?: 'Mirror' | 'Async';\n    FetchSourceOnRedirect?: boolean;\n    /** @private unstable */\n    FetchSourceOnRedirectWithQuery?: boolean;\n    PublicSource?: {\n      SourceEndpoint: {\n        Primary: string[];\n        Follower?: string[];\n      };\n      FixedEndpoint?: boolean;\n    };\n    /** @private unstable */\n    PrivateSource?: {\n      SourceEndpoint: {\n        Primary: {\n          Endpoint: string;\n          BucketName: string;\n          CredentialProvider: { Role: string };\n        }[];\n        Follower?: {\n          Endpoint: string;\n          BucketName: string;\n          CredentialProvider: { Role: string };\n        }[];\n      };\n    };\n    PassQuery?: boolean;\n    FollowRedirect?: boolean;\n    MirrorHeader?: {\n      PassAll?: boolean;\n      Pass?: string[];\n      Remove?: string[];\n      /** private unstable */\n      Set?: { Key: string; Value: string }[];\n    };\n    /** @private unstable */\n    PassHeaderFromSource?: string[];\n    /** @private unstable */\n    PassStatusCodeFromSource?: string[];\n\n    /** @private unstable */\n    DisableUploadSourceForNoneRangeMirror?: boolean;\n    /** @private unstable */\n    DisableUploadSourceForRangeMirror?: boolean;\n\n    Transform?: {\n      WithKeyPrefix?: string;\n      WithKeySuffix?: string;\n      ReplaceKeyPrefix?: {\n        KeyPrefix?: string;\n        ReplaceWith?: string;\n      };\n    };\n  };\n}\n\nexport interface PutBucketMirrorBackInput {\n  bucket: string;\n  rules: MirrorBackRule[];\n}\n\nexport interface PutBucketMirrorBackOutput {}\n\nexport async function putBucketMirrorBack(\n  this: TOSBase,\n  input: PutBucketMirrorBackInput\n) {\n  const { bucket, rules } = input;\n  if (this.opts.enableOptimizeMethodBehavior && !rules.length) {\n    return deleteBucketMirrorBack.call(this, { bucket });\n  }\n\n  return this.fetchBucket<PutBucketMirrorBackOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      Rules: rules,\n    }\n  );\n}\n\nexport interface GetBucketMirrorBackInput {\n  bucket: string;\n}\n\nexport interface GetBucketMirrorBackOutput {\n  Rules: MirrorBackRule[];\n}\n\nexport async function getBucketMirrorBack(\n  this: TOSBase,\n  input: GetBucketMirrorBackInput\n) {\n  const { bucket } = input;\n\n  try {\n    return await this.fetchBucket<GetBucketMirrorBackOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketMirrorBackOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketMirrorBack',\n      defaultResponse: {\n        Rules: [],\n      },\n    });\n  }\n}\n\nexport interface DeleteBucketMirrorBackInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketMirrorBackOutput {}\n\nexport async function deleteBucketMirrorBack(\n  this: TOSBase,\n  input: DeleteBucketMirrorBackInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketMirrorBackOutput>(\n    bucket,\n    'DELETE',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","import { makeArrayProp, normalizeHeadersKey } from '../../utils';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'tagging';\n\ninterface TagSet {\n  Tags: {\n    Key: string;\n    Value: string;\n  }[];\n}\n\nexport interface PutObjectTaggingInput {\n  bucket: string;\n  key: string;\n  versionId?: string;\n  tagSet: TagSet;\n}\n\nexport interface PutObjectTaggingOutput {}\n\nexport async function putObjectTagging(\n  this: TOSBase,\n  input: PutObjectTaggingInput\n) {\n  const { tagSet, versionId } = input;\n  const headers = normalizeHeadersKey({\n    versionId,\n  });\n\n  return this._fetchObject<PutObjectTaggingOutput>(\n    input,\n    'PUT',\n    { [CommonQueryKey]: '', ...headers },\n    {},\n    {\n      TagSet: tagSet,\n    }\n  );\n}\n\nexport interface GetObjectTaggingInput {\n  bucket: string;\n  key: string;\n  versionId?: string;\n}\n\nexport interface GetObjectTaggingOutput {\n  TagSet: TagSet;\n}\n\nexport async function getObjectTagging(\n  this: TOSBase,\n  input: GetObjectTaggingInput\n) {\n  const { versionId } = input;\n  const headers = normalizeHeadersKey({\n    versionId,\n  });\n  const res = await this._fetchObject<GetObjectTaggingOutput>(\n    input,\n\n    'GET',\n    { [CommonQueryKey]: '', ...headers },\n    {}\n  );\n  makeArrayProp(res.data.TagSet)('Tags');\n  return res;\n}\n\nexport interface DeleteObjectTaggingInput {\n  bucket: string;\n  key: string;\n  versionId?: string;\n}\n\nexport interface DeleteObjectTaggingOutput {}\n\nexport async function deleteObjectTagging(\n  this: TOSBase,\n  input: DeleteObjectTaggingInput\n) {\n  const { versionId } = input;\n  const headers = normalizeHeadersKey({\n    versionId,\n  });\n\n  return this._fetchObject<DeleteObjectTaggingOutput>(\n    input,\n    'DELETE',\n    { [CommonQueryKey]: '', ...headers },\n    {}\n  );\n}\n","import {\n  ACLType,\n  StorageClassInheritDirectiveType,\n  StorageClassType,\n} from '../../TosExportEnum';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'replication';\n\nexport interface ReplicationTag {\n  Key: string;\n  Value: string;\n}\n\nexport interface ReplicationRule {\n  ID: string;\n  Status: string;\n  PrefixSet?: string[];\n  Destination: {\n    Bucket: string;\n    Location: string;\n    StorageClass?: StorageClassType;\n    StorageClassInheritDirective: StorageClassInheritDirectiveType;\n  };\n  /**\n   *  @private unstable: internal(default) |tos_acc\n   */\n  TransferType?: string;\n  HistoricalObjectReplication: 'Enabled' | 'Disabled';\n  /** @private unstable */\n  Tags?: ReplicationTag[];\n  AccessControlTranslation?: {\n    Owner: string; //\"BucketOwnerEntrusted\"\n  };\n  /** @private unstable */\n  DeleteMarkerReplication?: 'Enabled' | 'Disabled';\n  /** @private unstable */\n  DeleteObjectReplication?: 'Enabled' | 'Disabled';  \n}\n\nexport interface PutBucketReplicationInput {\n  bucket: string;\n  role: string;\n  rules: ReplicationRule[];\n}\n\nexport interface PutBucketReplicationOutput {}\n\nexport async function putBucketReplication(\n  this: TOSBase,\n  input: PutBucketReplicationInput\n) {\n  const { bucket, rules, role } = input;\n  if (this.opts.enableOptimizeMethodBehavior && !rules.length) {\n    return deleteBucketReplication.call(this, { bucket });\n  }\n\n  return this.fetchBucket<PutBucketReplicationOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      Role: role,\n      Rules: rules,\n    }\n  );\n}\n\nexport interface GetBucketReplicationInput {\n  bucket: string;\n  progress?: string;\n  ruleId?: string;\n}\n\nexport interface GetBucketReplicationOutput {\n  Role: string;\n  Rules: ReplicationRule[];\n}\n\nexport async function getBucketReplication(\n  this: TOSBase,\n  input: GetBucketReplicationInput\n) {\n  const { bucket, progress, ruleId } = input;\n  const query: Record<string, string> = {\n    [CommonQueryKey]: '',\n    progress: progress || '',\n  };\n  if (ruleId != null) {\n    query['rule-id'] = `${ruleId}`;\n  }\n\n  try {\n    return await this.fetchBucket<GetBucketReplicationOutput>(\n      bucket,\n      'GET',\n      query,\n      {}\n    );\n  } catch (err) {\n    return handleEmptyServerError<GetBucketReplicationOutput>(err, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketReplication',\n      defaultResponse: {\n        Rules: [],\n        Role: '',\n      },\n    });\n  }\n}\n\nexport interface DeleteBucketReplicationInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketReplicationOutput {}\n\nexport async function deleteBucketReplication(\n  this: TOSBase,\n  input: DeleteBucketReplicationInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketReplicationOutput>(\n    bucket,\n    'DELETE',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'website';\n\ntype Protocol = 'http' | 'https';\n\ninterface RedirectAllRequestsTo {\n  HostName: string;\n  Protocol?: Protocol;\n}\n\ninterface IndexDocument {\n  Suffix: string;\n  ForbiddenSubDir?: boolean;\n}\ninterface ErrorDocument {\n  Key?: string;\n}\ninterface RoutingRule {\n  Condition: {\n    HttpErrorCodeReturnedEquals?: number;\n    KeyPrefixEquals?: string;\n  };\n  Redirect: {\n    HostName?: string;\n    HttpRedirectCode?: number;\n    Protocol?: Protocol;\n    ReplaceKeyPrefixWith?: string;\n    ReplaceKeyWith?: string;\n  };\n}\n\nexport interface PutBucketWebsiteInput {\n  bucket: string;\n  redirectAllRequestsTo?: RedirectAllRequestsTo;\n  indexDocument?: IndexDocument;\n  errorDocument?: ErrorDocument;\n  routingRules?: RoutingRule[];\n}\n\nexport interface PutBucketWebsiteOutput {}\n\nexport async function putBucketWebsite(\n  this: TOSBase,\n  input: PutBucketWebsiteInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketWebsiteOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketWebsiteInput {\n  bucket: string;\n}\n\nexport interface GetBucketWebsiteOutput {\n  RedirectAllRequestsTo?: RedirectAllRequestsTo;\n  IndexDocument?: IndexDocument;\n  ErrorDocument?: ErrorDocument;\n  RoutingRules?: RoutingRule[];\n}\n\nexport async function getBucketWebsite(\n  this: TOSBase,\n  input: GetBucketWebsiteInput\n) {\n  const { bucket } = input;\n\n  try {\n    return this.fetchBucket<GetBucketWebsiteOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketWebsiteOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketWebsite',\n      defaultResponse: {\n        RoutingRules: [],\n      },\n    });\n  }\n}\n\nexport interface DeleteBucketWebsiteInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketWebsiteOutput {}\n\nexport async function deleteBucketWebsite(\n  this: TOSBase,\n  input: DeleteBucketWebsiteInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketWebsiteOutput>(\n    bucket,\n    'DELETE',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'notification';\n\nexport interface Filter {\n  TOSKey?: {\n    FilterRules: {\n      Name: string;\n      Value: string;\n    }[];\n  };\n}\ninterface CloudFunctionConfiguration {\n  Events: string[];\n  Filter?: Filter;\n  RuleId?: string;\n  CloudFunction: string;\n}\n\nexport interface RocketMQConf {\n  InstanceId: string;\n  Topic: string;\n  AccessKeyId: string;\n}\nexport interface RocketMQConfiguration {\n  RuleId: string;\n  Role: string;\n  Events: string[]; // \n  Filter?: Filter;\n  RocketMQ: RocketMQConf;\n}\n\nexport interface PutBucketNotificationInput {\n  bucket: string;\n  cloudFunctionConfigurations?: CloudFunctionConfiguration[];\n  rocketMQConfigurations?: RocketMQConfiguration[];\n}\n\nexport interface PutBucketNotificationOutput {}\n\n/**\n * @deprecated use PutBucketNotificationType2 instead\n */\nexport async function putBucketNotification(\n  this: TOSBase,\n  input: PutBucketNotificationInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketNotificationOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketNotificationInput {\n  bucket: string;\n}\n\nexport interface GetBucketNotificationOutput {\n  CloudFunctionConfigurations: CloudFunctionConfiguration[];\n  RocketMQConfigurations: RocketMQConfiguration[];\n}\n\n/**\n * @deprecated use GetBucketNotificationType2 instead\n */\nexport async function getBucketNotification(\n  this: TOSBase,\n  input: GetBucketNotificationInput\n) {\n  const { bucket } = input;\n  try {\n    return await this.fetchBucket<GetBucketNotificationOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketNotificationOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketNotification',\n      defaultResponse: {\n        CloudFunctionConfigurations: [],\n        RocketMQConfigurations: [],\n      },\n    });\n  }\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'customdomain';\n\nexport interface CustomDomainRule {\n  Domain: string;\n  Cname: string;\n  Forbidden?: boolean;\n  ForbiddenReason?: string;\n  CertId?: string;\n  CertStatus?: string;\n  Protocol?: string;\n}\n\nexport interface PutBucketCustomDomainInput {\n  bucket: string;\n  customDomainRule: {\n    Domain: string;\n    CertId?: string;\n    Protocol?: string;\n  };\n}\n\nexport interface PutBucketCustomDomainOutput {}\n\nexport async function putBucketCustomDomain(\n  this: TOSBase,\n  input: PutBucketCustomDomainInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketCustomDomainOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketCustomDomainInput {\n  bucket: string;\n}\n\nexport interface GetBucketCustomDomainOutput {\n  CustomDomainRules: CustomDomainRule[];\n}\n\nexport async function getBucketCustomDomain(\n  this: TOSBase,\n  input: GetBucketCustomDomainInput\n) {\n  try {\n    const { bucket } = input;\n    return await this.fetchBucket<GetBucketCustomDomainOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketCustomDomainOutput>(error, {\n      defaultResponse: { CustomDomainRules: [] },\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketCustomDomain',\n    });\n  }\n}\n\nexport interface DeleteBucketCustomDomainInput {\n  bucket: string;\n  customDomain: string;\n}\n\nexport interface DeleteBucketCustomDomainOutput {}\n\nexport async function deleteBucketCustomDomain(\n  this: TOSBase,\n  input: DeleteBucketCustomDomainInput\n) {\n  const { bucket, customDomain } = input;\n\n  return this.fetchBucket<DeleteBucketCustomDomainOutput>(\n    bucket,\n    'DELETE',\n    { customdomain: customDomain },\n    {}\n  );\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'realtimeLog';\n\ninterface AccessLogConfiguration {\n  UseServiceTopic: boolean;\n  TLSProjectID?: string;\n  TLSTopicID?: string;\n}\n\ninterface RealTimeLogConfiguration {\n  Role: string;\n  AccessLogConfiguration: AccessLogConfiguration;\n}\n\nexport interface PutBucketRealTimeLogInput {\n  bucket: string;\n  realTimeLogConfiguration: RealTimeLogConfiguration;\n}\n\nexport interface PutBucketRealTimeLogOutput {}\n\nexport async function putBucketRealTimeLog(\n  this: TOSBase,\n  input: PutBucketRealTimeLogInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketRealTimeLogOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketRealTimeLogInput {\n  bucket: string;\n}\n\nexport interface GetBucketRealTimeLogOutput {\n  RealTimeLogConfiguration?: RealTimeLogConfiguration;\n}\n\nexport async function getBucketRealTimeLog(\n  this: TOSBase,\n  input: GetBucketRealTimeLogInput\n) {\n  const { bucket } = input;\n\n  try {\n    return await this.fetchBucket<GetBucketRealTimeLogOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketRealTimeLogOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketRealTimeLog',\n      defaultResponse: {},\n    });\n  }\n}\n\nexport interface DeleteBucketRealTimeLogInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketRealTimeLogOutput {}\n\nexport async function deleteBucketRealTimeLog(\n  this: TOSBase,\n  input: DeleteBucketRealTimeLogInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketRealTimeLogOutput>(\n    bucket,\n    'DELETE',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase, { TosResponse } from '../base';\n\n/**\n * \n */\nexport enum ScheduleFrequency {\n  /**  */\n  Daily = 'Daily',\n  /**  */\n  Weekly = 'Weekly',\n  Once = 'Once',\n}\n\n/**\n * Object\n */\nexport enum IncludedObjectVersions {\n  /**  */\n  All = 'All',\n  /**  */\n  Current = 'Current',\n}\n\n/**\n * \n */\nexport enum InventoryOptionalFields {\n  /** Object */\n  Size = 'Size',\n  /** Object */\n  LastModifiedDat = 'LastModifiedDate',\n  /** Object */\n  ETag = 'ETag',\n  /** Object */\n  StorageClass = 'StorageClass',\n  /** Object */\n  IsMultipartUploaded = 'IsMultipartUploaded',\n  /** Object */\n  EncryptionStatus = 'EncryptionStatus',\n  CRC64 = 'CRC64',\n  /** crr */\n  ReplicationStatus = 'ReplicationStatus',\n  RetentionMode = 'RetentionMode',\n  RetainUntilTimestamp = 'RetainUntilTimestamp',\n  IntelligentTieringAccessTier = 'IntelligentTieringAccessTier',\n}\n\n/**\n * \n */\nexport interface BucketInventoryItem {\n  /**  */\n  Id: string;\n  /**  */\n  IsEnabled: boolean;\n  /**  */\n  Filter?: {\n    /**  */\n    Prefix?: string;\n    // unstable\n    And?: {\n      /**  */\n      LastModifyBeginTimeStamp?: number;\n      LastModifyEndTimeStamp?: number;\n      CreateBeginTimeStamp?: number;\n      CreateEndTimeStamp?: number;\n      LowerSizeBound?: number;\n      UpperSizeBound?: number;\n      FilterTag?: {\n        Tags?: { Key: string; Value: string }[];\n      };\n      FilterStorageClass?: {\n        StorageClass: (\n          | 'STANDARD'\n          | 'IA'\n          | 'ARCHIVE_FR'\n          | 'INTELLIGENT_TIERING'\n          | 'ARCHIVE'\n          | 'COLD_ARCHIVE'\n          | 'DEEP_COLD_ARCHIVE'\n        )[];\n      };\n      FilterObjectType?: {\n        ObjectType: ('Normal' | 'Multipart')[];\n      };\n    }\n  };\n  /**  */\n  Destination: {\n    /** Bucket  */\n    TOSBucketDestination: {\n      /**  */\n      Format: string;\n      /** Bucket ID */\n      AccountId: string;\n      /**  */\n      Role: string;\n      /**  Bucket */\n      Bucket: string;\n      /**  */\n      Prefix?: string;\n    };\n  };\n  /**  */\n  Schedule: {\n    /**  */\n    Frequency: ScheduleFrequency;\n    Instant?: boolean;\n  };\n  UpdateTime?: number;\n  /**  Object  */\n  IncludedObjectVersions: string;\n  /**  */\n  OptionalFields?: {\n    Field: InventoryOptionalFields[];\n  };\n}\n\nexport interface PutBucketInventoryInput {\n  bucket: string;\n  inventoryConfiguration: BucketInventoryItem;\n}\n\nexport interface PutBucketInventoryOutput {}\n\nexport interface GetBucketInventoryInput {\n  bucket: string;\n  id: string;\n}\n\nexport type GetBucketInventoryOutput = BucketInventoryItem | undefined;\nexport interface ListBucketInventoryInput {\n  bucket: string;\n  continuationToken?: string;\n}\n\nexport interface ListBucketInventoryOutput {\n  InventoryConfigurations: BucketInventoryItem[];\n  IsTruncated?: boolean;\n  NextContinuationToken?: string;\n}\n\nexport interface DeleteBucketInventoryInput {\n  bucket: string;\n  id: string;\n}\n\nexport interface DeleteBucketInventoryOutput {}\n\n/**\n * \n */\nexport async function getBucketInventory(\n  this: TOSBase,\n  req: GetBucketInventoryInput\n): Promise<TosResponse<GetBucketInventoryOutput>> {\n  try {\n    const res = await this.fetchBucket<GetBucketInventoryOutput>(\n      req.bucket,\n      'GET',\n      {\n        inventory: '',\n        id: req.id,\n      },\n      {}\n    );\n\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketInventoryOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketInventory',\n      defaultResponse: undefined,\n    });\n  }\n}\n\n/**\n * \n */\nexport async function listBucketInventory(\n  this: TOSBase,\n  req: ListBucketInventoryInput\n): Promise<TosResponse<ListBucketInventoryOutput>> {\n  const params = {\n    inventory: '',\n    ...(req.continuationToken\n      ? { 'continuation-token': req.continuationToken }\n      : null),\n  };\n  try {\n    const res = await this.fetchBucket<ListBucketInventoryOutput>(\n      req.bucket,\n      'GET',\n      params,\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<ListBucketInventoryOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'listBucketInventory',\n      defaultResponse: {\n        InventoryConfigurations: [],\n      },\n    });\n  }\n}\n\n/**\n * \n */\nexport async function deleteBucketInventory(\n  this: TOSBase,\n  req: DeleteBucketInventoryInput\n): Promise<TosResponse<DeleteBucketInventoryOutput>> {\n  return this.fetchBucket(\n    req.bucket,\n    'DELETE',\n    { inventory: '', id: req.id },\n    {}\n  );\n}\n\n/**\n * \n */\nexport function putBucketInventory(\n  this: TOSBase,\n  req: PutBucketInventoryInput\n): Promise<TosResponse<PutBucketInventoryOutput>> {\n  return this.fetchBucket(\n    req.bucket,\n    'PUT',\n    { inventory: '', id: req.inventoryConfiguration.Id },\n    {},\n    req.inventoryConfiguration\n  );\n}\n","import TOSBase from '../base';\nimport { convertNormalCamelCase2Upper, paramsSerializer } from '../../utils';\nimport { StorageClassType, TierType } from '../../TosExportEnum';\nexport type JobStatusType =\n  | 'New'\n  | 'Preparing'\n  | 'Suspended'\n  | 'Ready'\n  | 'Active'\n  | 'Pausing'\n  | 'Paused'\n  | 'Complete'\n  | 'Cancelling'\n  | 'Cancelled'\n  | 'Failing'\n  | 'Failed';\n\nexport type DirectiveType = 'COPY' | 'REPLACE' | 'ADD';\nexport type CannedAccessControlListType = 'default' | 'private' | 'public-read';\nexport type PermissionType = 'READ' | 'READ_ACP' | 'WRITE_ACP' | 'FULL_CONTROL';\nexport type PrefixReplaceType = 'true' | 'false';\nexport type ConfirmationRequiredType = '0' | '1';\n\nexport interface Tag {\n  Key: string;\n  Value: string;\n}\n\ninterface Manifest {\n  Location: {\n    ETag: string;\n    ObjectTrn: string;\n    ObjectVersionId?: string;\n  };\n  Spec: {\n    Format: 'TOSInventoryReport_CSV_V1';\n  };\n}\n\nexport interface NewObjectMetadataType {\n  SSEAlgorithm?: 'AES256';\n  UserMetadata?: {\n    member: { Key: string; Value: string }[];\n  };\n  'content-type'?: string;\n  'content-encoding'?: string;\n  'content-language'?: string;\n  'cache-control'?: string;\n  'content-disposition'?: string;\n  expires?: string;\n}\nexport interface NewObjectTaggingType {\n  TOSTag?: Tag[];\n}\nexport interface Report {\n  Bucket: string;\n  Enabled: PrefixReplaceType;\n  Format: 'Report_CSV_V1';\n  Prefix: string;\n  ReportScope: 'AllTasks' | 'FailedTasksOnly';\n}\n\nexport interface ProgressSummary {\n  TotalNumberOfTasks: number;\n  NumberOfTasksSucceeded: number;\n  NumberOfTasksFailed: number;\n}\n\nexport interface ListBatchInput {\n  accountId: string;\n  jobStatuses?: string[];\n  nextToken?: string;\n  maxResults?: number;\n}\n\nexport interface UpdateJobPriorityInput {\n  jobId: string;\n  priority: number;\n  accountId: string;\n}\nexport interface UpdateJobStatusInput {\n  jobId: string;\n  accountId: string;\n  requestedJobStatus: 'Ready' | 'Cancelled';\n  statusUpdateReason?: string;\n}\n\nexport interface JobInput {\n  JobId: string;\n  accountId: string;\n}\n\nexport type DeleteJob = JobInput;\nexport type DescribeJob = JobInput;\n\nexport interface AccessControlList {\n  TOSGrant: {\n    Grantee: {\n      Identifier: string;\n      TypeIdentifier: 'id';\n    };\n    Permission: PermissionType;\n  }[];\n}\nexport interface TOSPutObjectCopy {\n  TOSPutObjectCopy: {\n    PrefixReplace: PrefixReplaceType;\n    ResourcesPrefix: string;\n    TargetKeyPrefix: string;\n    StorageClass: StorageClassType;\n    AccessControlDirective: DirectiveType;\n    CannedAccessControlList?: CannedAccessControlListType;\n    AccessControlGrants?: AccessControlList;\n    TargetResource: string;\n    MetadataDirective: DirectiveType;\n    NewObjectMetadata: NewObjectMetadataType;\n    TaggingDirective: DirectiveType;\n    NewObjectTagging: NewObjectTaggingType;\n  };\n}\n\nexport interface TOSPutObjectAcl {\n  TOSPutObjectAcl: {\n    AccessControlPolicy: {\n      CannedAccessControlList: CannedAccessControlListType;\n      AccessControlList: AccessControlList;\n    };\n  };\n}\n\nexport interface TOSPutObjectTagging {\n  TOSPutObjectTagging: {\n    TOSTag: Tag[];\n  };\n}\n\nexport interface TOSRestoreObject {\n  TOSRestoreObject: {\n    Days: number;\n    Tier: TierType;\n  };\n}\n\nexport interface TOSDeleteObjectTagging {\n  TOSDeleteObjectTagging: {};\n}\n\nexport type PutJobInput = {\n  accountId: string;\n  clientRequestToken: string;\n  confirmationRequired: '0' | '1';\n  description?: string;\n  manifest: Manifest;\n  priority: string;\n  roleTrn: string;\n  report?: Report;\n  operation?:\n    | TOSPutObjectCopy\n    | TOSPutObjectAcl\n    | TOSPutObjectTagging\n    | TOSRestoreObject\n    | TOSDeleteObjectTagging;\n};\n\nexport interface DescribeJobRes {\n  Job: {\n    JobId: string;\n    ConfirmationRequired: ConfirmationRequiredType;\n    Description?: string;\n    FailureReasons?: {\n      JobFailure: {\n        FailureCode: string;\n        FailureReason: string;\n      };\n    };\n    Manifest: Manifest;\n    Priority: number;\n    ProgressSummary: ProgressSummary;\n    Report: Report;\n    RoleArn: string;\n    Status: JobStatusType;\n    StatusUpdateReason: string;\n    SuspendedDate: string;\n    TerminationDate: string;\n    CreationTime: string;\n    Operation:\n      | TOSPutObjectCopy\n      | TOSPutObjectAcl\n      | TOSPutObjectTagging\n      | TOSRestoreObject\n      | TOSDeleteObjectTagging;\n  };\n}\n\nexport interface JobList {\n  JobId: string;\n  CreationTime: string;\n  Operation:\n    | 'TOSPutObjectCopy'\n    | 'TOSPutObjectAcl'\n    | 'TOSPutObjectTagging'\n    | 'TOSRestoreObject'\n    | 'TOSDeleteObjectTagging';\n  Priority: number;\n  ProgressSummary: ProgressSummary;\n  Status: JobStatusType;\n  TerminationDate: string;\n  Description: string;\n}\nexport interface JobListRes {\n  Jobs: {\n    member: JobList[];\n  };\n  NextToken: string;\n}\n\n/**\n *\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function createJob(this: TOSBase, params: PutJobInput) {\n  const { accountId, ...reset } = params;\n  const data = convertNormalCamelCase2Upper(reset);\n  const res = await this.fetch(\n    'POST',\n    '/jobs',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {\n      ...data,\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n * @description  \n * @param params\n * @returns\n */\nexport async function listJobs(this: TOSBase, params: ListBatchInput) {\n  const { accountId, maxResults = 1000, ...others } = params;\n  const res = await this.fetch<JobListRes>(\n    'GET',\n    '/jobs',\n    {\n      maxResults,\n      ...others,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      axiosOpts: {\n        paramsSerializer,\n      },\n    }\n  );\n  return res;\n}\n\n/**\n *\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function updateJobPriority(\n  this: TOSBase,\n  params: UpdateJobPriorityInput\n) {\n  const { accountId, jobId: JobId, priority } = params;\n  const res = await this.fetch(\n    'POST',\n    `/jobs/${JobId}/priority`,\n    {\n      priority,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n\n/**\n *\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function updateJobStatus(\n  this: TOSBase,\n  params: UpdateJobStatusInput\n) {\n  const {\n    accountId,\n    jobId: JobId,\n    requestedJobStatus,\n    statusUpdateReason,\n  } = params;\n  const res = await this.fetch(\n    'POST',\n    `/jobs/${JobId}/status`,\n    {\n      requestedJobStatus,\n      statusUpdateReason,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n\n/**\n *\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function deleteJob(this: TOSBase, params: DeleteJob) {\n  const { accountId, JobId } = params;\n  const res = await this.fetch(\n    'DELETE',\n    `/jobs/${JobId}`,\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {}\n  );\n  return res;\n}\n\n/**\n *\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function describeJob(this: TOSBase, params: DescribeJob) {\n  const { accountId, JobId } = params;\n  const res = await this.fetch<DescribeJobRes>(\n    'GET',\n    `/jobs/${JobId}`,\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {}\n  );\n  return res;\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase, { TosResponse } from '../base';\n\ninterface TagSet {\n  Tags: {\n    Key: string;\n    Value: string;\n  }[];\n}\n\nexport interface PutBucketTaggingInput {\n  bucket?: string;\n  tagging: {\n    TagSet: TagSet;\n  };\n}\n\nexport interface GetBucketTaggingInput {\n  bucket: string;\n}\nexport interface GetBucketTaggingOutput {\n  TagSet: TagSet;\n}\n\n/**\n * @private unstable method\n */\nexport async function putBucketTagging(\n  this: TOSBase,\n  input: PutBucketTaggingInput\n) {\n  const res = await this.fetchBucket(\n    input.bucket,\n    'PUT',\n    { tagging: '' },\n    {},\n    input.tagging,\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketTagging(\n  this: TOSBase,\n  { bucket }: GetBucketTaggingInput\n): Promise<TosResponse<GetBucketTaggingOutput>> {\n  try {\n    const res = await this.fetchBucket<GetBucketTaggingOutput>(\n      bucket,\n      'GET',\n      {\n        tagging: '',\n      },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketTaggingOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketTagging',\n      defaultResponse: {\n        TagSet: {\n          Tags: [],\n        },\n      },\n    });\n  }\n}\n\nexport interface DeleteBucketTaggingInput {\n  bucket: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function deleteBucketTagging(\n  this: TOSBase,\n  { bucket }: DeleteBucketTaggingInput\n) {\n  return this.fetchBucket(bucket, 'DELETE', { tagging: '' }, {});\n}\n","import TOSBase, { TosResponse } from '../base';\n\nexport interface BucketPayByTraffic {\n  ChargeType: 'FlowOut' | 'Bandwidth';\n  ActiveType: 'NextDay' | 'NextMonth';\n}\n\nexport interface PutBucketPayByTrafficInput {\n  bucket?: string;\n  payByTraffic: BucketPayByTraffic;\n}\n\nexport type GetBucketPayByTrafficOutput = BucketPayByTraffic & {\n  ActiveTime: string;\n};\n\n/**\n * @private unstable method\n */\nexport async function putBucketPayByTraffic(\n  this: TOSBase,\n  input: PutBucketPayByTrafficInput\n) {\n  const res = await this.fetchBucket(\n    input.bucket,\n    'PUT',\n    { payByTraffic: '' },\n    {},\n    input.payByTraffic\n  );\n  return res;\n}\n\ninterface GetBucketPayByTrafficInput {\n  bucket: string;\n}\n/**\n * @private unstable method\n */\nexport async function getBucketPayByTraffic(\n  this: TOSBase,\n  { bucket }: GetBucketPayByTrafficInput\n): Promise<TosResponse<GetBucketPayByTrafficOutput>> {\n  const res = await this.fetchBucket<GetBucketPayByTrafficOutput>(\n    bucket,\n    'GET',\n    {\n      payByTraffic: '',\n    },\n    {}\n  );\n  return res;\n}\n","import TOSBase, { TosResponse } from '../base';\nimport TosServerError from '../../TosServerError';\nexport interface ImageStyle {\n  Name: string;\n  Content: string;\n  CreateTime: string;\n  LastModifyTime: string;\n}\n\nexport interface BucketImgStyle {\n  bucket?: string;\n  imageStyles: { ImageStyles: ImageStyle[] };\n}\n\nexport interface ImageBriefInfo {\n  Name: string;\n  BucketLevelContent: string;\n  PrefixCount: number;\n}\n\nexport interface BucketImageBriefInfo {\n  BucketName: string;\n  ImageStyleBriefInfo: ImageBriefInfo[];\n}\n\nexport interface GetImageStyleBriefInfoInput {\n  bucket: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function getImageStyleBriefInfo(\n  this: TOSBase,\n  req: GetImageStyleBriefInfoInput\n): Promise<TosResponse<BucketImageBriefInfo>> {\n  const { bucket } = req;\n  try {\n    const res = await this.fetchBucket<BucketImageBriefInfo>(\n      bucket,\n      'GET',\n      {\n        imageStyleBriefInfo: '',\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(\n          {\n            BucketName: bucket,\n            ImageStyleBriefInfo: [],\n          },\n          err\n        );\n      }\n    }\n\n    throw err;\n  }\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketImageStyleList(\n  this: TOSBase,\n  bucket: string\n): Promise<TosResponse<BucketImgStyle['imageStyles']>> {\n  try {\n    const res = await this.fetchBucket<BucketImgStyle['imageStyles']>(\n      bucket,\n      'GET',\n      {\n        imageStyle: '',\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(\n          {\n            ImageStyles: [],\n          },\n          err\n        );\n      }\n    }\n\n    throw err;\n  }\n}\n\nexport interface GetBucketImageStyleListByNameInput {\n  bucket: string;\n  styleName: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketImageStyleListByName(\n  this: TOSBase,\n  req: GetBucketImageStyleListByNameInput\n): Promise<TosResponse<BucketImgStyle['imageStyles']>> {\n  try {\n    const { bucket, styleName } = req;\n    const res = await this.fetchBucket<BucketImgStyle['imageStyles']>(\n      bucket,\n      'GET',\n      {\n        imageStyleContent: '',\n        styleName,\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(\n          {\n            ImageStyles: [],\n          },\n          err\n        );\n      }\n    }\n\n    throw err;\n  }\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketImageStyle(\n  this: TOSBase,\n  bucket: string,\n  styleName: string\n): Promise<TosResponse<ImageStyle | null>> {\n  try {\n    const res = await this.fetchBucket<ImageStyle>(\n      bucket,\n      'GET',\n      {\n        imageStyle: '',\n        styleName,\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n\n    throw err;\n  }\n}\n\nexport interface PutBucketImageStyleInput {\n  bucket: string;\n  styleName: string;\n  content: string;\n  styleObjectPrefix?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function putBucketImageStyle(\n  this: TOSBase,\n  req: PutBucketImageStyleInput\n): Promise<TosResponse<any>> {\n  const { bucket, styleName, content, styleObjectPrefix } = req;\n  try {\n    const res = await this.fetchBucket<any>(\n      bucket,\n      'PUT',\n      {\n        imageStyle: '',\n        styleName,\n        styleObjectPrefix,\n      },\n      {},\n      { Content: content }\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n\n    throw err;\n  }\n}\n\nexport interface DeleteBucketImageStyleInput {\n  bucket: string;\n  styleName: string;\n  styleObjectPrefix?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function deleteBucketImageStyle(\n  this: TOSBase,\n  req: DeleteBucketImageStyleInput\n): Promise<TosResponse<any>> {\n  const { styleName, styleObjectPrefix, bucket } = req;\n  try {\n    const res = await this.fetchBucket<any>(\n      bucket,\n      'DELETE',\n      {\n        imageStyle: '',\n        styleName,\n        styleObjectPrefix,\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n    throw err;\n  }\n}\n\nexport interface BucketImgProtect {\n  Enable: boolean;\n  Suffixes?: string[];\n  //OSS10\n  OIPRules?: any[];\n  Prefix?: string;\n  Suffix?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function putBucketImageProtect(\n  this: TOSBase,\n  bucket: string,\n  data: BucketImgProtect\n): Promise<TosResponse<any>> {\n  try {\n    const res = await this.fetchBucket<any>(\n      bucket,\n      'PUT',\n      {\n        originalImageProtect: '',\n      },\n      {},\n      data\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n    throw err;\n  }\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketImageProtect(\n  this: TOSBase,\n  bucket: string\n): Promise<TosResponse<any>> {\n  try {\n    const res = await this.fetchBucket<any>(\n      bucket,\n      'GET',\n      {\n        originalImageProtect: '',\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n    throw err;\n  }\n}\nexport type BucketImgProtectStyleSeparator = '-' | '_' | '!' | '\\\\';\n\nexport type BucketImgStyleSeparatorAffixes = Partial<\n  Record<BucketImgProtectStyleSeparator, string>\n>;\n\nexport interface PutBucketImageStyleSeparatorInput {\n  bucket: string;\n  Separator: BucketImgProtectStyleSeparator[];\n  SeparatorSuffix?: BucketImgStyleSeparatorAffixes;\n}\n\n/**\n * @private unstable method\n */\nexport async function putBucketImageStyleSeparator(\n  this: TOSBase,\n  req: PutBucketImageStyleSeparatorInput\n): Promise<TosResponse<any>> {\n  const { bucket, Separator, SeparatorSuffix } = req;\n  try {\n    const res = await this.fetchBucket<any>(\n      bucket,\n      'PUT',\n      {\n        imageStyleSeparator: '',\n      },\n      {},\n      { Separator, SeparatorSuffix }\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n    throw err;\n  }\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketImageStyleSeparator(\n  this: TOSBase,\n  bucket: string\n): Promise<TosResponse<any>> {\n  try {\n    const res = await this.fetchBucket<any>(\n      bucket,\n      'GET',\n      {\n        imageStyleSeparator: '',\n      },\n      {}\n    );\n    return res;\n  } catch (err) {\n    if (err instanceof TosServerError) {\n      if (err.statusCode === 404) {\n        return this.getNormalDataFromError(null, err);\n      }\n    }\n    throw err;\n  }\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase, { TosResponse } from '../base';\n\nexport interface BucketIntelligenttieringOutput {\n  Status?: 'Enabled' | 'Disabled';\n  Transitions?: {\n    Days: number;\n    AccessTier: 'INFREQUENT' | 'ARCHIVEFR';\n  }[];\n}\n\nexport async function getBucketIntelligenttiering(\n  this: TOSBase,\n  bucket?: string\n): Promise<TosResponse<BucketIntelligenttieringOutput>> {\n  try {\n    const res = await this.fetchBucket<BucketIntelligenttieringOutput>(\n      bucket,\n      'GET',\n      { intelligenttiering: '' },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<BucketIntelligenttieringOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketIntelligenttiering',\n      defaultResponse: {},\n    });\n  }\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'rename';\n\nexport interface PutBucketRenameInput {\n  bucket?: string;\n  renameEnable: boolean;\n}\n\nexport interface PutBucketRenameOutput {}\n\nexport async function putBucketRename(\n  this: TOSBase,\n  input: PutBucketRenameInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketRenameOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketRenameInput {\n  bucket?: string;\n}\n\nexport interface GetBucketRenameOutput {\n  RenameEnable: boolean;\n}\n\nexport async function getBucketRename(\n  this: TOSBase,\n  input: GetBucketRenameInput\n) {\n  const { bucket } = input;\n  return await this.fetchBucket<GetBucketRenameOutput>(\n    bucket,\n    'GET',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n\nexport interface DeleteBucketRenameInput {\n  bucket?: string;\n}\n\nexport interface DeleteBucketRenameOutput {}\n\nexport async function deleteBucketRename(\n  this: TOSBase,\n  input: DeleteBucketRenameInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<DeleteBucketRenameOutput>(\n    bucket,\n    'DELETE',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","import { TierType } from '../../TosExportEnum';\nimport { convertNormalCamelCase2Upper } from '../../utils';\nimport TOSBase from '../base';\n\nexport interface RestoreObjectInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n  days: number;\n  restoreJobParameters?: {\n    Tier: TierType;\n  };\n}\n\nexport async function restoreObject(this: TOSBase, input: RestoreObjectInput) {\n  const { bucket, key, versionId, ...otherProps } = input;\n  const query: Record<string, any> = { restore: '' };\n  if (versionId) {\n    query.versionId = versionId;\n  }\n  const body = convertNormalCamelCase2Upper(otherProps);\n\n  return this._fetchObject<undefined>(input, 'POST', query, {}, body);\n}\n\nexport default restoreObject;\n","import TOSBase from '../base';\nimport { paramsSerializer } from '../../utils';\n\nexport interface IMetaData {\n  accountId: string;\n}\n\nexport interface StorageLensInput extends IMetaData {\n  Id: string;\n}\ninterface IStrategy {\n  Buckets: {\n    Bucket: string[];\n  };\n  Regions: {\n    Region: string[];\n  };\n}\n\ninterface IPrefixLevel {\n  StorageMetrics: {\n    IsEnabled: boolean;\n    SelectionCriteria: {\n      MaxDepth?: number;\n      MinStorageBytesPercentage?: number;\n      Delimiter: string;\n      Prefixes?: string[];\n    };\n  };\n}\nexport interface StorageLensConfigurationInput extends StorageLensInput {\n  Region: string;\n  IsEnabled: boolean;\n  AccountLevel: {\n    BucketLevel: {\n      /** @deprecated will be removed soon */\n      ActivityMetrics?: {\n        IsEnabled: boolean;\n      };\n      HotStatsMetrics?: {\n        IsEnabled: boolean;\n        Actions: string[]; //action\n      };\n      PrefixLevel?: IPrefixLevel;\n    };\n  };\n  DataExport?: {\n    BucketDestination?: {\n      Bucket: string;\n      Prefix?: string;\n      OutputSchemaVersion: string;\n      Format: string;\n      Role: string;\n    };\n  };\n  Include?: IStrategy;\n  Exclude?: IStrategy;\n}\nexport type StorageLensConfigurationOutput = StorageLensConfigurationInput;\n\n/**\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function listStorageLens(this: TOSBase, params: IMetaData) {\n  const { accountId } = params;\n  const res = await this.fetch<StorageLensConfigurationOutput[]>(\n    'GET',\n    '/storagelens',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      axiosOpts: {\n        paramsSerializer,\n      },\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function deleteStorageLens(\n  this: TOSBase,\n  params: StorageLensInput\n) {\n  const { accountId, Id } = params;\n  const res = await this.fetch(\n    'DELETE',\n    `/storagelens`,\n    {\n      id: Id,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function getStorageLens(this: TOSBase, params: StorageLensInput) {\n  const { accountId, Id } = params;\n  const res = await this.fetch<StorageLensConfigurationOutput>(\n    'GET',\n    `/storagelens`,\n    {\n      id: Id,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n/**\n * @private unstable method\n * @description \n * @param params\n * @returns\n */\nexport async function putStorageLens(\n  this: TOSBase,\n  params: StorageLensConfigurationInput\n) {\n  const { accountId, Id, ...rest } = params;\n\n  const res = await this.fetch(\n    'PUT',\n    `/storagelens`,\n    {\n      id: Id,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {\n      ...rest,\n      Id,\n    },\n    {\n      needMd5: true,\n    }\n  );\n  return res;\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'notification_v2';\n\nexport interface NotificationFilter {\n  TOSKey?: {\n    FilterRules: {\n      Name: string;\n      Value: string;\n    }[];\n  };\n}\n\nexport interface DestinationRocketMQ {\n  Role: string;\n  InstanceId: string;\n  Topic: string;\n  AccessKeyId: string;\n  Region?: string;\n}\n\n/**\n *  @private unstable\n */\nexport interface DestinationKafka {\n  Role: string;\n  InstanceId: string;\n  Topic: string;\n  User: string;\n  Region?: string;\n}\n\ninterface DestinationHttpServer {\n  Url: string;\n}\n\nexport interface NotificationDestination {\n  RocketMQ?: DestinationRocketMQ[];\n  VeFaaS?: { FunctionId: string }[];\n  Kafka?: DestinationKafka[];\n  HttpServer?: DestinationHttpServer[];\n}\n\nexport interface NotificationRule {\n  RuleId: string;\n  Events: string[];\n  Filter?: NotificationFilter;\n  Destination: NotificationDestination;\n}\n\nexport interface PutBucketNotificationInput {\n  bucket: string;\n  Rules: NotificationRule[];\n  Version?: string;\n}\n\nexport interface PutBucketNotificationOutput {}\n\nexport async function putBucketNotificationType2(\n  this: TOSBase,\n  input: PutBucketNotificationInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketNotificationOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketNotificationInput {\n  bucket: string;\n}\n\nexport interface GetBucketNotificationOutput {\n  Rules: NotificationRule[];\n  Version?: string;\n}\n\nexport async function getBucketNotificationType2(\n  this: TOSBase,\n  input: GetBucketNotificationInput\n) {\n  const { bucket } = input;\n  try {\n    return await this.fetchBucket<GetBucketNotificationOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketNotificationOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketNotificationType2',\n      defaultResponse: {\n        Rules: [],\n      },\n    });\n  }\n}\n","import TOSBase, { TosResponse } from '../base';\nimport { fillRequestHeaders, normalizeHeadersKey } from '../../utils';\nimport { Acl } from '../../interface';\nimport { StorageClassType } from '../../TosExportEnum';\n\nexport interface PutSymInput {\n  bucket?: string;\n  key: string;\n  symLinkTargetKey: string;\n  symLinkTargetBucket?: string;\n  forbidOverwrite?: boolean;\n  acl?: Acl;\n  meta?: Record<string, string>;\n  storageClass?: StorageClassType;\n\n  headers?: {\n    'x-tos-symlink-target': string;\n    'x-tos-symlink-bucket'?: string;\n    'x-tos-forbid-overwrite'?: string;\n    'x-tos-acl'?: Acl;\n    'x-tos-storage-class'?: string;\n    [key: string]: string | undefined;\n  };\n}\n\nexport interface PutSymOutput {\n  VersionID?: string;\n}\n/**\n * @private unstable method\n */\nexport async function putSymlink(this: TOSBase, input: PutSymInput) {\n  return _putSymlink.call(this, input);\n}\n\nexport async function _putSymlink(\n  this: TOSBase,\n  input: PutSymInput\n): Promise<TosResponse<PutSymOutput>> {\n  const headers = (input.headers = normalizeHeadersKey(input.headers));\n  fillRequestHeaders(input, [\n    'symLinkTargetKey',\n    'symLinkTargetBucket',\n    'forbidOverwrite',\n    'acl',\n    'storageClass',\n    'meta',\n  ]);\n  return this._fetchObject<PutSymOutput>(\n    input,\n    'PUT',\n    { symlink: '' },\n    headers,\n    undefined,\n    {\n      handleResponse(response) {\n        const { headers } = response;\n        return {\n          VersionID: headers['x-tos-version-id'],\n        };\n      },\n    }\n  );\n}\n\nexport default putSymlink;\n","import TOSBase, { TosResponse } from '../base';\n\nexport interface GetSymInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n}\n\nexport interface PutSymOutput {\n  VersionID?: string;\n  SymlinkTargetKey: string;\n  SymlinkTargetBucket: string;\n  LastModified: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function getSymlink(this: TOSBase, input: GetSymInput) {\n  return _getSymlink.call(this, input);\n}\n\nexport async function _getSymlink(\n  this: TOSBase,\n  input: GetSymInput\n): Promise<TosResponse<PutSymOutput>> {\n  const query: Record<string, any> = { symlink: '' };\n  if (input.versionId) {\n    query.versionId = input.versionId;\n  }\n  return this._fetchObject<PutSymOutput>(input, 'GET', query, {}, undefined, {\n    handleResponse: (res) => {\n      const { headers } = res;\n      return {\n        VersionID: headers['x-tos-version-id'],\n        SymlinkTargetKey: headers['x-tos-symlink-target'],\n        SymlinkTargetBucket: headers['x-tos-symlink-bucket'],\n        LastModified: headers['last-modified'],\n      };\n    },\n  });\n}\n\nexport default getSymlink;\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport { TransferAccelerationStatusType } from '../../TosExportEnum';\nimport { convertNormalCamelCase2Upper } from '../../utils';\nimport { Headers } from '../../interface';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'transferAcceleration';\n\nexport interface PutBucketTransferAccelerationInput {\n  bucket?: string;\n  transferAccelerationConfiguration: {\n    Enabled: 'true' | 'false';\n  };\n}\n\nexport interface PutBucketTransferAccelerationOutput {}\n\n/**\n * @private unstable\n */\nexport async function putBucketTransferAcceleration(\n  this: TOSBase,\n  input: PutBucketTransferAccelerationInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketTransferAccelerationOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketTransferAccelerationInput {\n  bucket?: string;\n  getStatus?: boolean;\n}\n\nexport interface GetBucketTransferAccelerationOutput {\n  TransferAccelerationConfiguration: {\n    Enabled: 'true' | 'false';\n    Status: TransferAccelerationStatusType;\n  };\n}\n\n/**\n * @private unstable\n */\nexport async function getBucketTransferAcceleration(\n  this: TOSBase,\n  input: GetBucketTransferAccelerationInput\n) {\n  try {\n    const { bucket } = input;\n    const headers: Headers = {};\n    if (input.getStatus) {\n      headers['x-tos-get-bucket-acceleration-status'] = 'true';\n    }\n    const res = await this.fetchBucket<GetBucketTransferAccelerationOutput>(\n      bucket,\n      'GET',\n      { [CommonQueryKey]: '' },\n      headers\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketTransferAccelerationOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketTransferAcceleration',\n      defaultResponse: {\n        TransferAccelerationConfiguration: {\n          Enabled: 'false',\n          Status: TransferAccelerationStatusType.Terminated,\n        },\n      },\n    });\n  }\n}\n","import TOSBase from '../base';\nimport { GetBucketLifecycleInput } from './lifecycle';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface PutBucketAccessMonitorInput {\n  bucket: string;\n  status: 'Enabled' | 'Disabled';\n}\n\nexport interface PutBucketAccessMonitorOutput {}\n\nexport async function putBucketAccessMonitor(\n  this: TOSBase,\n  input: PutBucketAccessMonitorInput\n) {\n  const { bucket, status } = input;\n\n  return this.fetchBucket<PutBucketAccessMonitorOutput>(\n    bucket,\n    'PUT',\n    { accessmonitor: '' },\n    {},\n    {\n      Status: status,\n    }\n  );\n}\n\nexport interface GetBucketAccessMonitorInput {\n  bucket: string;\n}\n\nexport interface GetBucketAccessMonitorOutput {\n  Status?: 'Enabled' | 'Disabled';\n}\n\n\nexport async function getBucketAccessMonitor(\n  this: TOSBase,\n  input: GetBucketLifecycleInput\n) {\n  try {\n    const { bucket } = input;\n\n    return await this.fetchBucket<GetBucketAccessMonitorOutput>(\n      bucket,\n      'GET',\n      { accessmonitor: '' },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketAccessMonitorOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketAccessMonitor',\n      defaultResponse: {},\n    });\n  }\n}\n","/** @file TOS  QoSPolicy()   */\nimport { MergeExclusive } from 'type-fest';\nimport TOSBase from '../base';\n\nexport enum StringOp {\n  StringEquals = 'StringEquals',\n  StringNotEquals = 'StringNotEquals',\n  StringEqualsIgnoreCase = 'StringEqualsIgnoreCase',\n  StringNotEqualsIgnoreCase = 'StringNotEqualsIgnoreCase',\n  StringLike = 'StringLike',\n  StringNotLike = 'StringNotLike',\n}\nexport enum DateOp {\n  DateEquals = 'DateEquals',\n  DateNotEquals = 'DateNotEquals',\n  DateLessThan = 'DateLessThan',\n  DateLessThanEquals = 'DateLessThanEquals',\n  DateGreaterThan = 'DateGreaterThan',\n  DateGreaterThanEquals = 'DateGreaterThanEquals',\n}\nexport enum IpOp {\n  IpAddress = 'IpAddress',\n  NotIpAddress = 'NotIpAddress',\n}\n\n/** () */\nexport type QosOp = StringOp | DateOp | IpOp;\n\n/**  -  */\nexport type QosConditions = {\n  [operator in string]?: {\n    [key in string]: string[];\n  };\n};\n\n/**  */\nexport enum QuotaType {\n  /** Qps */\n  WritesQps = 'WritesQps',\n  /** Qps */\n  ReadsQps = 'ReadsQps',\n  /** listQps */\n  ListQps = 'ListQps',\n  /**  */\n  WritesRate = 'WritesRate',\n  /**  */\n  ReadsRate = 'ReadsRate',\n}\nexport type QuotaTypes = {\n  /**  action Qps */\n  [QuotaType.WritesQps]?: string;\n  /**  action Qps */\n  [QuotaType.ReadsQps]?: string;\n  /** list  action Qps */\n  [QuotaType.ListQps]?: string;\n  /**  action  Mbps */\n  [QuotaType.WritesRate]?: string;\n  /**  action  Mbps */\n  [QuotaType.ReadsRate]?: string;\n};\n\nexport type QosStatement = MergeExclusive<\n  /**  */\n  { Resource: string | string[] },\n  { NotResource: string | string[] }\n> &\n  MergeExclusive<\n    /**  */\n    { Principal: string[] },\n    { NotPrincipal: string[] }\n  > & {\n    /**  */\n    Sid: string;\n    /**  */\n    Quota: QuotaTypes;\n    /**  quota */\n    Condition?: QosConditions;\n  };\n\n/**  */\nexport interface QosPolicy {\n  /**  */\n  Statement: QosStatement[];\n  /** API  */\n  Version?: string;\n  /** Cas  */\n  CasVersion?: string;\n}\n\nexport interface QosPolicyBaseInput {\n  accountId: string;\n}\n\nexport interface GetQosPolicyInput extends QosPolicyBaseInput {}\nexport interface GetQosPolicyOutput extends QosPolicy {\n  Version: string;\n  CasVersion: string;\n}\n\nexport interface PutQosPolicyInput extends QosPolicy, QosPolicyBaseInput {}\n\nexport interface DeleteQosPolicyInput extends QosPolicyBaseInput {}\n\n/**\n * @private unstable method\n * @description \n * @param {GetQosPolicyInput}\n * @returns {GetQosPolicyOutput}\n */\nexport async function getQosPolicy(this: TOSBase, params: GetQosPolicyInput) {\n  const { accountId } = params;\n  const res = await this.fetch<GetQosPolicyOutput>(\n    'GET',\n    '/qospolicy',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n * @description   QosPolicy\n * @param {PutQosPolicyInput}\n */\nexport async function putQosPolicy(this: TOSBase, params: PutQosPolicyInput) {\n  const { accountId, ...restParams } = params;\n  const res = await this.fetch(\n    'PUT',\n    '/qospolicy',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {\n      ...restParams,\n    },\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n * @description \n * @param {DeleteQosPolicyInput}\n */\nexport async function deleteQosPolicy(\n  this: TOSBase,\n  params: DeleteQosPolicyInput\n) {\n  const { accountId } = params;\n  const res = await this.fetch(\n    'DELETE',\n    '/qospolicy',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n","import TOSBase from '../base';\nimport { AccessPointStatusType } from '../../TosExportEnum';\n\nexport interface AccessPoint {\n  Name: string; //\n  Alias?: string; //\n  Status: AccessPointStatusType; //;\n  CreatedAt: number;\n  Regions: Array<{\n    Bucket: string;\n    BucketAccountId: number;\n    Region: string;\n  }>;\n}\n\nexport interface CreateMultiRegionAccessPointInput {\n  name: string;\n  regions: Array<{\n    Bucket: string;\n    BucketAccountId: string;\n  }>;\n  accountId: string;\n}\n\nexport interface CreateMultiRegionAccessPointOutput {}\n\n/**\n * @private unstable method\n */\nexport async function createMultiRegionAccessPoint(\n  this: TOSBase,\n  input: CreateMultiRegionAccessPointInput\n) {\n  const { accountId, name, regions } = input;\n\n  const res = await this.fetch<CreateMultiRegionAccessPointOutput>(\n    'POST',\n    '/mrap',\n    {\n      name,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {\n      Name: name,\n      Regions: regions,\n    },\n    {}\n  );\n\n  return res;\n}\n\nexport interface GetMultiRegionAccessPointInput {\n  name: string;\n  accountId: string;\n}\n\nexport interface GetMultiRegionAccessPointOutput extends AccessPoint {}\n\n/**\n * @private unstable method\n */\nexport async function getMultiRegionAccessPoint(\n  this: TOSBase,\n  input: GetMultiRegionAccessPointInput\n) {\n  const { name, accountId } = input;\n  const res = await this.fetch<GetMultiRegionAccessPointOutput>(\n    'GET',\n    '/mrap',\n    {\n      name,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\nexport interface ListMultiRegionAccessPointsInput {\n  accountId: string;\n  maxResults?: number;\n  nextToken?: string;\n}\n\nexport interface ListMultiRegionAccessPointsOutput {\n  AccessPoints: Array<AccessPoint>;\n  NextToken?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listMultiRegionAccessPoints(\n  this: TOSBase,\n  input: ListMultiRegionAccessPointsInput\n) {\n  const { accountId, ...nextQuery } = input;\n  const res = await this.fetch<ListMultiRegionAccessPointsOutput>(\n    'GET',\n    '/mrap',\n    { ...nextQuery },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\nexport interface GetMultiRegionAccessPointRoutesInput {\n  accountId: string;\n  alias: string;\n}\n\nexport interface AccessPointRoute {\n  Bucket: string;\n  Region: string;\n  TrafficDialPercentage: number;\n}\n\nexport interface GetMultiRegionAccessPointRoutesOutput {\n  Routes?: AccessPointRoute[];\n  Alias?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function getMultiRegionAccessPointRoutes(\n  this: TOSBase,\n  input: GetMultiRegionAccessPointRoutesInput\n) {\n  const { accountId, alias } = input;\n  const res = await this.fetch<GetMultiRegionAccessPointRoutesOutput>(\n    'GET',\n    '/mrap/routes',\n    {\n      alias,\n    },\n    {\n      'x-tos-account-id': accountId,\n    }\n  );\n  return res;\n}\n\nexport interface DeleteMultiRegionAccessPointInput {\n  accountId: string;\n  name: string;\n}\n\nexport interface DeleteMultiRegionAccessPointOutput {}\n\nexport async function deleteMultiRegionAccessPoint(\n  this: TOSBase,\n  input: DeleteMultiRegionAccessPointInput\n) {\n  const { name, accountId } = input;\n  const res = await this.fetch<DeleteMultiRegionAccessPointOutput>(\n    'DELETE',\n    '/mrap',\n    {\n      name,\n    },\n    {\n      'x-tos-account-id': accountId,\n    }\n  );\n  return res;\n}\n\nexport interface SubmitMultiRegionAccessPointRoutesInput {\n  accountId: string;\n  alias: string;\n  routes: AccessPointRoute[];\n}\n\nexport interface SubmitMultiRegionAccessPointRoutesOutput {}\n\nexport async function submitMultiRegionAccessPointRoutes(\n  this: TOSBase,\n  input: SubmitMultiRegionAccessPointRoutesInput\n) {\n  const { routes, accountId, alias } = input;\n  const res = await this.fetch<SubmitMultiRegionAccessPointRoutesOutput>(\n    'PATCH',\n    '/mrap/routes',\n    {\n      alias,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {\n      Routes: routes,\n    }\n  );\n  return res;\n}\n\n\nexport interface BindAcceleratorWithMultiRegionAccessPointInput {\n  AccountId: string;\n  MultiRegionAccessPointAlias: string;\n  AcceleratorId: string;\n}\n\nexport interface BindAcceleratorWithMultiRegionAccessPointOutput {}\n\n/**\n * @private unstable method\n */\nexport async function bindAcceleratorWithMultiRegionAccessPoint(\n  this: TOSBase,\n  input: BindAcceleratorWithMultiRegionAccessPointInput\n) {\n  const { AccountId, MultiRegionAccessPointAlias, AcceleratorId } = input;\n\n  const res = await this.fetch<BindAcceleratorWithMultiRegionAccessPointOutput>(\n    'PUT',\n    `/accelerator/${AcceleratorId}/mrap/${MultiRegionAccessPointAlias}`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n  return res;\n}\n\nexport interface UnbindAcceleratorWithMultiRegionAccessPointInput {\n  AccountId: string;\n  MultiRegionAccessPointAlias: string;\n  AcceleratorId: string;\n}\n\nexport interface UnbindAcceleratorWithMultiRegionAccessPointOutput {}\n\n/**\n * @private unstable method\n */\nexport async function unbindAcceleratorWithMultiRegionAccessPoint(\n  this: TOSBase,\n  input: UnbindAcceleratorWithMultiRegionAccessPointInput\n) {\n  const { AccountId, MultiRegionAccessPointAlias, AcceleratorId } = input;\n\n  const res = await this.fetch<UnbindAcceleratorWithMultiRegionAccessPointOutput>(\n    'DELETE',\n    `/accelerator/${AcceleratorId}/mrap/${MultiRegionAccessPointAlias}`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n    },\n    {}\n  );\n\n  return res;\n}\n\nexport interface ListBindAccessPointForMultiRegionAcceleratorInput {\n  AccountId: string;\n  AcceleratorId: string;\n}\n\nexport interface ListBindAccessPointForMultiRegionAcceleratorOutput {\n  AccessPoints: Array<{ Alias: string; Endpoint: string }>\n}\n\n/**\n * @private unstable method\n */\nexport async function listBindAccessPointForMultiRegionAccelerator(\n  this: TOSBase,\n  input: ListBindAccessPointForMultiRegionAcceleratorInput\n) {\n  const { AccountId, AcceleratorId } = input;\n\n  const res = await this.fetch<ListBindAccessPointForMultiRegionAcceleratorOutput>(\n    'GET',\n    `/accelerator/${AcceleratorId}/mrap`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n    },\n    {}\n  );\n\n  return res;\n}","import TOSBase from '../base';\nimport {\n  CreateAccessPointInput,\n  CreateAccessPointOutput,\n  GetAccessPointInput,\n  GetAccessPointOutput,\n  DeleteAccessPointInput,\n  DeleteAccessPointOutput,\n  ListAccessPointsInput,\n  ListAccessPointsOutput,\n  BindAcceleratorWithAccessPointInput,\n  BindAcceleratorWithAccessPointOutput,\n  UnbindAcceleratorWithAccessPointInput,\n  UnbindAcceleratorWithAccessPointOutput,\n  ListBindAccessPointForAcceleratorInput,\n  ListBindAccessPointForAcceleratorOutput,\n} from './interface';\n\n/**\n * @private unstable method\n */\nexport async function createAccessPoint(\n  this: TOSBase,\n  input: CreateAccessPointInput\n) {\n  const { BucketAccountId, Name, AccountId, Bucket, NetworkOrigin, VpcId } = input;\n\n  const res = await this.fetch<CreateAccessPointOutput>(\n    'PUT',\n    `/accesspoint/${Name}`,\n    {\n      name: '',\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n      BucketAccountId,\n      Bucket,\n      NetworkOrigin,\n      VpcId,\n    },\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function getAccessPoint(\n  this: TOSBase,\n  input: GetAccessPointInput\n) {\n  const { Name, AccountId } = input;\n  const res = await this.fetch<GetAccessPointOutput>(\n    'GET',\n    `/accesspoint/${Name}`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAccessPoints(\n  this: TOSBase,\n  input: ListAccessPointsInput\n) {\n  const { AccountId, ...nextQuery } = input;\n  const res = await this.fetch<ListAccessPointsOutput>(\n    'GET',\n    '/accesspoint',\n    { ...nextQuery },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function deleteAccessPoint(\n  this: TOSBase,\n  input: DeleteAccessPointInput\n) {\n  const { Name, AccountId } = input;\n  const res = await this.fetch<DeleteAccessPointOutput>(\n    'DELETE',\n    `/accesspoint/${Name}`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function bindAcceleratorWithAccessPoint(\n  this: TOSBase,\n  input: BindAcceleratorWithAccessPointInput\n) {\n  const { AccountId, AcceleratorAccountId, AccessPointName, AcceleratorId } = input;\n\n  const res = await this.fetch<BindAcceleratorWithAccessPointOutput>(\n    'PUT',\n    `/accesspoint/${AccessPointName}/accelerator/${AcceleratorId}`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n      AcceleratorAccountId,\n    },\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function unbindAcceleratorWithAccessPoint(\n  this: TOSBase,\n  input: UnbindAcceleratorWithAccessPointInput\n) {\n  const { AccountId, AccessPointName, AcceleratorId } = input;\n\n  const res = await this.fetch<UnbindAcceleratorWithAccessPointOutput>(\n    'DELETE',\n    `/accesspoint/${AccessPointName}/accelerator/${AcceleratorId}`,\n    {\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n    },\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBindAccessPointForAccelerator(\n  this: TOSBase,\n  input: ListBindAccessPointForAcceleratorInput\n) {\n  const { AccountId, AcceleratorId, ...restQuery } = input;\n\n  const res = await this.fetch<ListBindAccessPointForAcceleratorOutput>(\n    'GET',\n    `/accelerator/${AcceleratorId}/accesspoint`,\n    {\n      ...restQuery,\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n    },\n    {}\n  );\n\n  return res;\n}\n\nexport * from './interface';\n","import TOSBase from '../base';\nimport {\n  PutAcceleratorInput,\n  PutAcceleratorOutput,\n  GetAcceleratorInput,\n  GetAcceleratorOutput,\n  DeleteAcceleratorInput,\n  DeleteAcceleratorOutput,\n  ListAcceleratorsInput,\n  ListAcceleratorsOutput,\n  ListAcceleratorAzsInput,\n  ListAcceleratorAzsOutput,\n  PutAcceleratorPrefetchJobInput,\n  PutAcceleratorPrefetchJobOutput,\n  GetAcceleratorPrefetchJobInput,\n  GetAcceleratorPrefetchJobOutput,\n  DeleteAcceleratorPrefetchJobInput,\n  DeleteAcceleratorPrefetchJobOutput,\n  ListAcceleratorPrefetchJobsInput,\n  ListAcceleratorPrefetchJobsOutput,\n  ListAcceleratorPrefetchJobRecordsInput,\n  ListAcceleratorPrefetchJobRecordsOutput,\n  GetAcceleratorCapacityQuotaInput,\n  GetAcceleratorCapacityQuotaOutput,\n  ListBindAcceleratorForAccessPointInput,\n  ListBindAcceleratorForAccessPointOutput,\n} from './interface';\n\n/**\n * @private unstable method\n */\nexport async function putAccelerator(\n  this: TOSBase,\n  input: PutAcceleratorInput\n) {\n  const { AccountId, ...Accelerator } = input;\n\n  const res = await this.fetch<PutAcceleratorOutput>(\n    'POST',\n    '/accelerator',\n    {\n      name: '',\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n      ...Accelerator\n    },\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function getAccelerator(\n  this: TOSBase,\n  input: GetAcceleratorInput\n) {\n  const { Id, AccountId } = input;\n  const res = await this.fetch<GetAcceleratorOutput>(\n    'GET',\n    '/accelerator',\n    {\n      id: Id,\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAccelerators(\n  this: TOSBase,\n  input: ListAcceleratorsInput\n) {\n  const { AccountId, ...restQuery } = input;\n  const res = await this.fetch<ListAcceleratorsOutput>(\n    'GET',\n    '/accelerator',\n    { ...restQuery },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function deleteAccelerator(\n  this: TOSBase,\n  input: DeleteAcceleratorInput\n) {\n  const { Id, AccountId } = input;\n  const res = await this.fetch<DeleteAcceleratorOutput>(\n    'DELETE',\n    '/accelerator',\n    {\n      id: Id,\n    },\n    {\n      'x-tos-account-id': AccountId,\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAcceleratorAzs(\n  this: TOSBase,\n  input: ListAcceleratorAzsInput\n) {\n  const { AccountId, ...restQuery } = input;\n  const res = await this.fetch<ListAcceleratorAzsOutput>(\n    'GET',\n    '/accelerator/az',\n    { ...restQuery },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function putAcceleratorPrefetchJob(\n  this: TOSBase,\n  input: PutAcceleratorPrefetchJobInput\n) {\n  const { AccountId, ...restParams } = input;\n\n  const res = await this.fetch<PutAcceleratorPrefetchJobOutput>(\n    'POST',\n    '/accelerator/prefetchJob',\n    {\n      acceleratorId: restParams.AcceleratorId,\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {\n      ...restParams\n    },\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function getAcceleratorPrefetchJob(\n  this: TOSBase,\n  input: GetAcceleratorPrefetchJobInput\n) {\n  const { AccountId, JobId } = input;\n  const res = await this.fetch<GetAcceleratorPrefetchJobOutput>(\n    'GET',\n    '/accelerator/prefetchJob',\n    {\n      jobId: JobId,\n    },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function deleteAcceleratorPrefetchJob(\n  this: TOSBase,\n  input: DeleteAcceleratorPrefetchJobInput\n) {\n  const { JobId, AccountId } = input;\n  const res = await this.fetch<DeleteAcceleratorPrefetchJobOutput>(\n    'DELETE',\n    '/accelerator/prefetchJob',\n    {\n      jobId: JobId,\n    },\n    {\n      'x-tos-account-id': AccountId,\n    }\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAcceleratorPrefetchJobs(\n  this: TOSBase,\n  input: ListAcceleratorPrefetchJobsInput\n) {\n  const { AccountId, AcceleratorId, ...restQuery } = input;\n  const res = await this.fetch<ListAcceleratorPrefetchJobsOutput>(\n    'GET',\n    '/accelerator/prefetchJob',\n    { acceleratorId: AcceleratorId, ...restQuery },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAcceleratorPrefetchJobRecords(\n  this: TOSBase,\n  input: ListAcceleratorPrefetchJobRecordsInput\n) {\n  const { AccountId, JobId, ...restQuery } = input;\n  const res = await this.fetch<ListAcceleratorPrefetchJobRecordsOutput>(\n    'GET',\n    '/accelerator/prefetchRecord',\n    {  jobId: JobId, ...restQuery },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function getAcceleratorCapacityQuota(\n  this: TOSBase,\n  input: GetAcceleratorCapacityQuotaInput\n) {\n  const { AccountId, Az } = input;\n  const res = await this.fetch<GetAcceleratorCapacityQuotaOutput>(\n    'GET',\n    '/accelerator/capacity',\n    {  az: Az },\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n  return res;\n}\n\nexport async function listBindAcceleratorForAccessPoint(\n  this: TOSBase,\n  input: ListBindAcceleratorForAccessPointInput\n) {\n  const { AccountId, AccessPointName } = input;\n  const res = await this.fetch<ListBindAcceleratorForAccessPointOutput>(\n    'GET',\n    `/accesspoint/${AccessPointName}/accelerator`,\n    {},\n    {\n      'x-tos-account-id': AccountId,\n    },\n    {},\n    {}\n  );\n  return res;\n}","import TOSBase from '../base';\nimport { MRAPMirrorBackRedirectPolicyType } from '../../TosExportEnum';\nimport { makeArrayProp } from '../../utils';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface MirrorBackRule {\n  ID?: string;\n  Status: 'Enabled' | 'Disabled';\n  Condition?: {\n    HttpCode?: number[];\n    KeyPrefix?: string[];\n  };\n  Redirect?: {\n    RedirectPolicy: MRAPMirrorBackRedirectPolicyType;\n  };\n}\n\nexport interface PutMultiRegionAccessPointMirrorBackInput {\n  accountId: string;\n  alias: string;\n  rules: MirrorBackRule[];\n}\n\nexport interface PutMultiRegionAccessPointMirrorBackOutput {}\n\n/**\n * @private unstable method\n */\nexport const putMultiRegionAccessPointMirrorBack = async function (\n  this: TOSBase,\n  input: PutMultiRegionAccessPointMirrorBackInput\n) {\n  const { accountId, alias, rules } = input;\n\n  if (this.opts.enableOptimizeMethodBehavior && !rules.length) {\n    return deleteMultiRegionAccessPointMirrorBack.call(this, {\n      accountId,\n      alias,\n    });\n  }\n\n  const res = await this.fetch<PutMultiRegionAccessPointMirrorBackOutput>(\n    'PUT',\n    '/mrap/mirror',\n    {\n      alias,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {\n      Rules: rules,\n    },\n    {\n      handleResponse() {\n        return {};\n      },\n    }\n  );\n  return res;\n};\n\nexport interface GetMultiRegionAccessPointMirrorBackInput {\n  accountId: string;\n  alias: string;\n}\n\nexport interface GetMultiRegionAccessPointMirrorBackOutput {\n  Rules: MirrorBackRule[];\n}\n\n/**\n * @private unstable method\n */\nexport const getMultiRegionAccessPointMirrorBack = async function (\n  this: TOSBase,\n  input: GetMultiRegionAccessPointMirrorBackInput\n) {\n  const { accountId, alias } = input;\n  try {\n    const res = await this.fetch<GetMultiRegionAccessPointMirrorBackOutput>(\n      'GET',\n      '/mrap/mirror',\n      {\n        alias,\n      },\n      {\n        'x-tos-account-id': accountId,\n      },\n      {},\n      {}\n    );\n    const arrayProp = makeArrayProp(res.data);\n    arrayProp('Rules');\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetMultiRegionAccessPointMirrorBackOutput>(\n      error,\n      {\n        enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n        methodKey: 'getMultiRegionAccessPointMirrorBack',\n        defaultResponse: {\n          Rules: [],\n        },\n      }\n    );\n  }\n};\n\nexport interface DeleteMultiRegionAccessPointMirrorBackInput {\n  accountId: string;\n  alias: string;\n}\nexport interface DeleteMultiRegionAccessPointMirrorBackOutput {}\n\n/**\n * @private unstable method\n */\nexport const deleteMultiRegionAccessPointMirrorBack = async function (\n  this: TOSBase,\n  input: DeleteMultiRegionAccessPointMirrorBackInput\n) {\n  const { accountId, alias } = input;\n  const res = await this.fetch<DeleteMultiRegionAccessPointMirrorBackOutput>(\n    'DELETE',\n    '/mrap/mirror',\n    {\n      alias,\n    },\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      handleResponse() {\n        return {};\n      },\n    }\n  );\n  return res;\n};\n","import TOSBase from '../base';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface PutBucketPrivateM3U8Input {\n  bucket: string;\n  enable: boolean;\n}\n\nexport interface PutPrivateM3U8Output {}\n\n/**\n * @private unstable\n */\nexport async function putBucketPrivateM3U8(\n  this: TOSBase,\n  input: PutBucketPrivateM3U8Input\n) {\n  const { bucket, enable } = input;\n  return await this.fetchBucket(\n    bucket,\n    'PUT',\n    {\n      privateM3U8: '',\n    },\n    {},\n    {\n      Enable: enable,\n    }\n  );\n}\n\nexport interface GetBucketPrivateM3U8Input {\n  bucket: string;\n}\n\nexport interface GetBucketPrivateM3U8Output {\n  Enable: boolean;\n}\n\n/**\n * @private unstable\n */\nexport async function getBucketPrivateM3U8(\n  this: TOSBase,\n  input: GetBucketPrivateM3U8Input\n) {\n  const { bucket } = input;\n  try {\n    return await this.fetchBucket<GetBucketPrivateM3U8Output>(\n      bucket,\n      'GET',\n      {\n        privateM3U8: '',\n      },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketPrivateM3U8',\n      defaultResponse: {\n        Enable: false,\n      },\n    });\n  }\n}\n\ninterface PutBucketBlindWatermarkInput {\n  bucket: string;\n  enable: boolean;\n}\n\n/**\n * @private unstable\n */\nexport async function putBucketBlindWatermark(\n  this: TOSBase,\n  input: PutBucketBlindWatermarkInput\n) {\n  const { bucket, enable } = input;\n  return await this.fetchBucket(\n    bucket,\n    'PUT',\n    {\n      blindWatermark: '',\n    },\n    {},\n    {\n      Enable: enable,\n    }\n  );\n}\n\nexport interface GetBucketBlindWatermarkInput {\n  bucket: string;\n}\n\nexport interface GetBucketBlindWatermarkOutput {\n  Enable: boolean;\n}\n\n/**\n * @private unstable\n */\nexport async function getBucketBlindWatermark(\n  this: TOSBase,\n  input: GetBucketBlindWatermarkInput\n) {\n  const { bucket } = input;\n  try {\n    return await this.fetchBucket<GetBucketBlindWatermarkOutput>(\n      bucket,\n      'GET',\n      {\n        blindWatermark: '',\n      },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketBlindWatermark',\n      defaultResponse: {\n        Enable: false,\n      },\n    });\n  }\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'trash';\n\ninterface BucketTrash {\n  TrashPath: string;\n  CleanInterval: number;\n  Status: 'Enabled' | 'Disabled';\n  /**\n   * @private unstable\n   */\n  ForbiddenOverWrite?: 'Enabled' | 'Disabled';\n  /**\n   * @private unstable\n   */\n  [x: string]: any;\n  PrefixMatchRules?: Array<{\n    PrefixList: string[];\n    TrashPath: string;\n    CleanInterval: number;\n    /**\n     * @private unstable\n     */\n    ForbiddenOverWrite?: 'Enabled' | 'Disabled';\n    /**\n     * @private unstable\n     */\n    [x: string]: any;\n  }>;\n}\n\nexport interface PutBucketTrashInput {\n  bucket?: string;\n  Trash: BucketTrash;\n}\n\nexport interface PutBucketTrashOutput {}\n\nexport async function putBucketTrash(\n  this: TOSBase,\n  input: PutBucketTrashInput\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketTrashOutput>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketTrashInput {\n  bucket?: string;\n}\n\nexport interface GetBucketTrashOutput {\n  Trash: BucketTrash;\n}\n\nexport async function getBucketTrash(\n  this: TOSBase,\n  input: GetBucketTrashInput\n) {\n  const { bucket } = input;\n  return await this.fetchBucket<GetBucketTrashOutput>(\n    bucket,\n    'GET',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","import TOSBase from '../base';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\ninterface DefaultRetention {\n  Days?: number;\n  Years?: number;\n  Mode: 'COMPLIANCE';\n}\n\ninterface BucketObjectLockRule {\n  DefaultRetention: DefaultRetention;\n}\n\nexport interface PutBucketObjectLockConfigurationInput {\n  bucket: string;\n  objectLockEnabled: 'Enabled';\n  rule?: BucketObjectLockRule;\n}\n\nexport interface PutBucketObjectLockConfigurationOutput {}\n\n/**\n * @private unstable method\n */\n\nexport async function putBucketObjectLockConfiguration(\n  this: TOSBase,\n  input: PutBucketObjectLockConfigurationInput\n) {\n  const { bucket, objectLockEnabled, rule } = input;\n  return this.fetchBucket<PutBucketObjectLockConfigurationOutput>(\n    bucket,\n    'PUT',\n    { 'object-lock': '' },\n    {},\n    {\n      ObjectLockEnabled: objectLockEnabled,\n      Rule: rule,\n    }\n  );\n}\n\nexport interface GetBucketObjectLockConfigurationInput {\n  bucket: string;\n}\n\nexport interface GetBucketObjectLockConfigurationOutput {\n  ObjectLockEnabled?: 'Enabled';\n  Rule?: BucketObjectLockRule;\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketObjectLockConfiguration(\n  this: TOSBase,\n  input: GetBucketObjectLockConfigurationInput\n) {\n  const { bucket } = input;\n  try {\n    const res = await this.fetchBucket<GetBucketObjectLockConfigurationOutput>(\n      bucket,\n      'GET',\n      { 'object-lock': '' },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketObjectLockConfigurationOutput>(\n      error,\n      {\n        enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n        methodKey: 'getBucketObjectLockConfiguration',\n        defaultResponse: {},\n      }\n    );\n  }\n}\n","import TOSBase from '../base';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface PutObjectRetentionInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n  mode: 'COMPLIANCE';\n  retainUntilDate: string;\n}\n\nexport interface PutObjectRetentionOutput {}\n\n/**\n * @private unstable method\n */\nexport async function putObjectRetention(\n  this: TOSBase,\n  input: PutObjectRetentionInput\n) {\n  const { versionId, mode, retainUntilDate } = input;\n  const query: Record<string, any> = { retention: '' };\n  if (versionId) {\n    query.versionId = versionId;\n  }\n  return this._fetchObject<PutObjectRetentionOutput>(\n    input,\n    'PUT',\n    query,\n    {},\n    {\n      Mode: mode,\n      RetainUntilDate: retainUntilDate,\n    }\n  );\n}\n\nexport interface GetObjectRetentionInput {\n  bucket?: string;\n  key: string;\n  versionId?: string;\n}\n\nexport interface GetObjectRetentionOutput {\n  Mode?: string;\n  RetainUntilDate?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function getObjectRetention(\n  this: TOSBase,\n  input: GetObjectRetentionInput\n) {\n  const { versionId } = input;\n  const query: Record<string, any> = { retention: '' };\n  if (versionId) {\n    query.versionId = versionId;\n  }\n  try {\n    const res = await this._fetchObject<GetObjectRetentionOutput>(\n      input,\n      'GET',\n      query,\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetObjectRetentionOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getObjectRetention',\n      defaultResponse: {},\n    });\n  }\n}\n","import TOSBase from '../base';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\ninterface FilterRule {\n  Name?: string;\n  Value?: string;\n}\n\nexport interface CdnNotificationRule {\n  RuleId?: string;\n  CustomDomain: string;\n  Events: string[];\n  Filter?: {\n    TOSKey?: {\n      FilterRules: FilterRule[];\n    };\n  };\n}\n\nexport interface PutBucketCdnNotificationInput {\n  role: string;\n  bucket: string;\n  rules: CdnNotificationRule[];\n}\n\nexport interface PutBucketCdnNotificationOutput {}\n\n/**\n * @private unstable method\n */\nexport async function putBucketCdnNotification(\n  this: TOSBase,\n  input: PutBucketCdnNotificationInput\n) {\n  const { bucket, role, rules } = input;\n\n  if (this.opts.enableOptimizeMethodBehavior && !rules.length) {\n    return deleteBucketCdnNotification.call(this, {\n      bucket,\n    });\n  }\n\n  return this.fetchBucket<PutBucketCdnNotificationOutput>(\n    bucket,\n    'PUT',\n    {\n      cdn_notification: '',\n    },\n    {},\n    {\n      Role: role,\n      Rules: rules,\n    }\n  );\n}\n\nexport interface GetBucketCdnNotificationInput {\n  bucket: string;\n}\n\nexport interface GetBucketCdnNotificationOutput {\n  Role: string;\n  Rules: CdnNotificationRule[];\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketCdnNotification(\n  this: TOSBase,\n  input: GetBucketCdnNotificationInput\n) {\n  const { bucket } = input;\n  try {\n    return await this.fetchBucket<GetBucketCdnNotificationOutput>(\n      bucket,\n      'GET',\n      {\n        cdn_notification: '',\n      },\n      {}\n    );\n  } catch (error) {\n    return handleEmptyServerError<GetBucketCdnNotificationOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketCdnNotification',\n      defaultResponse: {\n        Rules: [],\n        Role: '',\n      },\n    });\n  }\n}\n\nexport interface DeleteBucketCdnNotificationInput {\n  bucket: string;\n}\n\nexport interface DeleteBucketCdnNotificationOutput {}\n\n/**\n * @private unstable method\n */\nexport async function deleteBucketCdnNotification(\n  this: TOSBase,\n  input: DeleteBucketCdnNotificationInput\n) {\n  const { bucket } = input;\n  return await this.fetchBucket<DeleteBucketCdnNotificationOutput>(\n    bucket,\n    'DELETE',\n    {\n      cdn_notification: '',\n    },\n    {}\n  );\n}\n","import TOSBase from '../base';\nimport { WorkflowExecutionStateType } from '../../TosExportEnum';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface ObjectExtFilter {\n  AudioExts?: string[];\n}\n\nexport interface Output {\n  Region: string;\n  Bucket: string;\n  Object: string;\n}\n\nexport interface AudioTranscode {\n  OperationID: string;\n  Format: string;\n  Bitrate?: number;\n  Output: Output;\n}\n\nexport interface Operations {\n  AudioTranscode?: AudioTranscode[];\n}\n\nexport interface PutBucketWorkflowInput {\n  bucket?: string;\n  role: string;\n  rules: WorkflowItem[];\n}\n\nexport interface PutBucketWorkflowOutput {}\n\n/**\n * @private unstable method\n */\nexport async function putBucketWorkflow(\n  this: TOSBase,\n  input: PutBucketWorkflowInput\n) {\n  const { bucket, role, rules } = input;\n\n  if (this.opts.enableOptimizeMethodBehavior && !rules.length) {\n    return deleteBucketWorkflow.call(this, { bucket });\n  }\n\n  return this.fetchBucket<PutBucketWorkflowOutput>(\n    bucket,\n    'PUT',\n    {\n      workflow: '',\n    },\n    {},\n    {\n      Role: role,\n      Rules: rules,\n    }\n  );\n}\n\nexport interface WorkflowItem {\n  ID: string;\n  Enabled: boolean;\n  Prefix?: string;\n  ExtFilter?: ObjectExtFilter;\n  Topology: string[][];\n  Operations: Operations;\n}\n\nexport interface GetBucketWorkflowInput {\n  bucket?: string;\n}\n\nexport interface GetBucketWorkflowOutput {\n  Rules: WorkflowItem[];\n}\n\n/**\n * @private unstable method\n */\nexport async function getBucketWorkflow(\n  this: TOSBase,\n  input: GetBucketWorkflowInput\n) {\n  const { bucket } = input;\n  try {\n    const res = await this.fetchBucket<GetBucketWorkflowOutput>(\n      bucket,\n      'GET',\n      {\n        workflow: '',\n      },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketWorkflowOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketWorkflow',\n      defaultResponse: {\n        Rules: [],\n      },\n    });\n  }\n}\n\nexport interface ListBucketWorkflowInput {\n  bucket?: string;\n  pageSize: number;\n  pageToken?: string;\n}\n\nexport interface ListBucketWorkflowOutput {\n  WorkflowItems: WorkflowItem[];\n  NextPageToken?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBucketWorkflow(\n  this: TOSBase,\n  input: ListBucketWorkflowInput\n) {\n  const { bucket, pageSize, pageToken } = input;\n\n  try {\n    const res = await this.fetchBucket<ListBucketWorkflowOutput>(\n      bucket,\n      'GET',\n      {\n        workflow: '',\n        page_size: pageSize,\n        page_token: pageToken,\n      },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<ListBucketWorkflowOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'listBucketWorkflow',\n      defaultResponse: { WorkflowItems: [] },\n    });\n  }\n}\n\nexport interface DeleteBucketWorkflowInput {\n  bucket?: string;\n}\nexport interface DeleteBucketWorkflowOutput {}\n\n/**\n * @private unstable method\n */\nexport async function deleteBucketWorkflow(\n  this: TOSBase,\n  input: DeleteBucketWorkflowInput\n) {\n  const { bucket } = input;\n  const res = await this.fetchBucket<DeleteBucketWorkflowOutput>(\n    bucket,\n    'DELETE',\n    {\n      workflow: '',\n    },\n    {}\n  );\n  if (!res.data) {\n    res.data = {};\n  }\n  return res;\n}\n\nexport interface WorkflowExecutionTaskItem {\n  Type: string;\n  JobID: string;\n  OperationID: string;\n  State?: WorkflowExecutionStateType;\n  CreateTime: string;\n  StartTime: string;\n  EndTime: string;\n  Code: number;\n  Message?: string;\n}\n\nexport interface WorkflowExecutionItem {\n  ExecutionID: string;\n  RequestID: string;\n  Object: string[];\n  State?: WorkflowExecutionStateType;\n  Workflow: WorkflowItem;\n  Tasks: WorkflowExecutionTaskItem[];\n  StartTime: string;\n  CreateTime: string;\n  EndTime: string;\n}\n\nexport interface GetBucketWorkflowExecutionInput {\n  bucket?: string;\n  executionId: string;\n}\n\nexport type GetBucketWorkflowExecutionOutput = WorkflowExecutionItem | null\n\n/**\n * @private unstable method\n */\n\nexport async function getBucketWorkflowExecution(\n  this: TOSBase,\n  input: GetBucketWorkflowExecutionInput\n) {\n  const { bucket, executionId } = input;\n  try {\n    const res = await this.fetchBucket<WorkflowExecutionItem>(\n      bucket,\n      'GET',\n      {\n        workflow_execution: '',\n        id: executionId,\n      },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketWorkflowExecutionOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketWorkflowExecution',\n      defaultResponse: null,\n    });\n  }\n}\n\nexport interface ListBucketWorkflowExecutionInput {\n  bucket?: string;\n  workflowId?: string;\n  startTime?: number;\n  endTime?: number;\n  states?: WorkflowExecutionStateType;\n  orderByTime?: 'asc' | 'desc';\n  pageSize?: number;\n  pageToken?: string;\n}\n\nexport interface ListBucketWorkflowExecutionOutput {\n  Items: WorkflowExecutionItem[];\n  NextPageToken?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBucketWorkflowExecution(\n  this: TOSBase,\n  input: ListBucketWorkflowExecutionInput\n) {\n  const {\n    bucket,\n    workflowId,\n    startTime,\n    endTime,\n    states,\n    orderByTime,\n    pageSize,\n    pageToken,\n  } = input;\n  try {\n    const query: Record<string, string> = {\n      workflow_execution: '',\n    };\n\n    if (workflowId) {\n      query['workflow_id'] = workflowId;\n    }\n\n    if (startTime !== undefined) {\n      query['start_time'] = startTime.toString();\n    }\n\n    if (endTime !== undefined) {\n      query['end_time'] = endTime.toString();\n    }\n\n    if (states) {\n      query['states'] = states;\n    }\n\n    if (orderByTime) {\n      query['order_by_time'] = orderByTime;\n    }\n\n    if (pageSize !== undefined) {\n      query['page_size'] = pageSize.toString();\n    }\n\n    if (pageToken) {\n      query['page_token'] = pageToken;\n    }\n\n    const res = await this.fetchBucket<ListBucketWorkflowExecutionOutput>(\n      bucket,\n      'GET',\n      query,\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<ListBucketWorkflowExecutionOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'listBucketWorkflowExecution',\n      defaultResponse: {\n        Items: [],\n      },\n    });\n  }\n}\n","import TOSBase, { TosResponse } from '../base';\nimport { FileCompressFlatten } from '../../TosExportEnum'; // \n\nexport interface CreateFileCompressInput {\n  bucket: string;\n  Input: {\n    Prefix?: string;\n    KeyConfig?: { Key: string }[];\n  };\n  FileCompressConfig: {\n    //only support zip\n    Format: string;\n    Flatten: FileCompressFlatten | number;\n  };\n  Output: {\n    Region: string;\n    Bucket: string;\n    Object: string;\n  };\n}\n\nexport interface CreateFileCompressOutput {\n  Code: string;\n  Message: string;\n  JobId: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function createFileCompress(\n  this: TOSBase,\n  req: CreateFileCompressInput\n): Promise<TosResponse<CreateFileCompressOutput>> {\n  const { bucket, Input, FileCompressConfig, Output } = req;\n  const res = await this.fetchBucket<CreateFileCompressOutput>(\n    bucket,\n    'POST',\n    {\n      file_jobs: '',\n      job_type: 'FileCompress',\n    },\n    {},\n    { Input, FileCompressConfig, Output }\n  );\n  return res;\n}\n","import TosServerError from '../../TosServerError';\nimport TOSBase, { TosResponse } from '../base';\nimport { FileUncompressPrefixReplaced } from '../../TosExportEnum'; // \n\nexport interface CreateFileUncompressInput {\n  bucket: string;\n  Input: {\n    Object: string;\n  };\n  FileUncompressConfig: {\n    Prefix: string;\n    /**\n     * @default 0 FileUncompressPrefixReplaced.NoExtraPrefix\n     */\n    PrefixReplaced?: FileUncompressPrefixReplaced | number;\n  };\n  Output: {\n    Region: string;\n    Bucket: string;\n  };\n}\n\nexport interface CreateFileUncompressOutput {\n  Code: string;\n  Message: string;\n  JobId: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function createFileUncompress(\n  this: TOSBase,\n  req: CreateFileUncompressInput\n): Promise<TosResponse<CreateFileUncompressOutput>> {\n  const { bucket, Input, FileUncompressConfig, Output } = req;\n  const res = await this.fetchBucket<CreateFileUncompressOutput>(\n    bucket,\n    'POST',\n    {\n      file_jobs: '',\n      job_type: 'FileUncompress',\n    },\n    {},\n    { Input, FileUncompressConfig, Output }\n  );\n  return res;\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport TOSBase, { TosResponse } from '../base';\n\nexport interface BucketLoggingData {\n  targetBucket: string;\n  targetPrefix?: string;\n  role?: string;\n}\n\nexport interface PutBucketLoggingInput {\n  bucket: string;\n  data: BucketLoggingData;\n}\n\nexport interface PutBucketLoggingOutput {}\n\nexport interface GetBucketLoggingInput {\n  bucket: string;\n}\nexport type GetBucketLoggingOutput =\n  | {\n      LoggingEnabled: {\n        TargetBucket: string;\n        TargetPrefix?: string;\n        Role?: string;\n      } | null;\n    }\n  | undefined;\n\n/**\n * @private unstable method\n * \n */\nexport async function getBucketLogging(\n  this: TOSBase,\n  req: GetBucketLoggingInput\n): Promise<TosResponse<GetBucketLoggingOutput>> {\n  try {\n    const res = await this.fetchBucket<GetBucketLoggingOutput>(\n      req.bucket,\n      'GET',\n      {\n        logging: '',\n      },\n      {}\n    );\n\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketLoggingOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketLogging',\n      defaultResponse: undefined,\n    });\n  }\n}\n\n/**\n * @private unstable method\n */\nexport function putBucketLogging(\n  this: TOSBase,\n  req: PutBucketLoggingInput\n): Promise<TosResponse<PutBucketLoggingOutput>> {\n  return this.fetchBucket(\n    req.bucket,\n    'PUT',\n    { logging: '' },\n    {},\n    {\n      LoggingEnabled: {\n        TargetBucket: req.data.targetBucket,\n        TargetPrefix: req.data.targetPrefix,\n        Role: req.data.role,\n      },\n    }\n  );\n}\n\n/**\n * @private unstable method\n */\nexport function deleteBucketLogging(\n  this: TOSBase,\n  req: GetBucketLoggingInput\n): Promise<TosResponse<PutBucketLoggingOutput>> {\n  return this.fetchBucket(req.bucket, 'PUT', { logging: '' }, {}, {});\n}\n","import TOSBase, { TosResponse } from '../base';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface StatementItem {\n  Sid: string;\n  Effect: 'Allow' | 'Deny';\n  Action?: string | string[];\n  NotAction?: string | string[];\n  Condition?: {\n    [key in string]: {\n      [key in string]: string[];\n    };\n  };\n  Principal?: string[];\n  NotPrincipal?: string[];\n  Resource?: string | string[];\n  NotResource?: string | string[];\n}\n\nexport interface Policy {\n  Version?: string;\n  Statement: StatementItem[];\n}\n\nexport interface PutAccessPointPolicyInput {\n  accountId: string;\n  name: string;\n  policy: Policy;\n}\n\nexport interface PutAccessPointPolicyOutput {}\n\n/**\n * @private unstable method\n */\n\nexport async function putAccessPointPolicy(\n  this: TOSBase,\n  input: PutAccessPointPolicyInput\n) {\n  const { accountId, name, policy } = input;\n  if (this.opts.enableOptimizeMethodBehavior && !policy.Statement?.length) {\n    return deleteAccessPointPolicy.call(this, {\n      accountId,\n      name,\n    });\n  }\n\n  return this.fetch<PutAccessPointPolicyOutput>(\n    'PUT',\n    `/accesspoint/${name}/policy`,\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    policy\n  );\n}\n\nexport interface GetAccessPointPolicyInput {\n  accountId: string;\n  name: string;\n}\n\nexport interface GetAccessPointPolicyOutput {\n  Policy: Policy;\n}\n\n/**\n * @private unstable method\n */\n\nexport async function getAccessPointPolicy(\n  this: TOSBase,\n  input: GetAccessPointPolicyInput\n): Promise<TosResponse<GetAccessPointPolicyOutput>> {\n  const { accountId, name } = input;\n  try {\n    const res = await this.fetch(\n      'GET',\n      `/accesspoint/${name}/policy`,\n      {},\n      {\n        'x-tos-account-id': accountId,\n      },\n      undefined,\n      {\n        handleResponse(response) {\n          return {\n            Policy: response.data,\n          };\n        },\n      }\n    );\n    return res as TosResponse<GetAccessPointPolicyOutput>;\n  } catch (error) {\n    return handleEmptyServerError<GetAccessPointPolicyOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getAccessPointPolicy',\n      defaultResponse: {\n        Policy: {\n          Version: '2012-10-17',\n          Statement: [],\n        },\n      },\n    });\n  }\n}\n\nexport interface DeleteAccessPointPolicyInput {\n  accountId: string;\n  name: string;\n}\n\nexport interface DeleteAccessPointPolicyOutput {}\n\n/**\n * @private unstable method\n */\n\nexport async function deleteAccessPointPolicy(\n  this: TOSBase,\n  input: DeleteAccessPointPolicyInput\n) {\n  const { accountId, name } = input;\n  return this.fetch<DeleteAccessPointPolicyOutput>(\n    'DELETE',\n    `/accesspoint/${name}/policy`,\n    {},\n    {\n      'x-tos-account-id': accountId,\n    }\n  );\n}\n\nexport interface PutMultiRegionAccessPointPolicyInput {\n  accountId: string;\n  name: string;\n  policy: Policy;\n}\n\nexport interface PutMultiRegionAccessPointPolicyOutput {}\n\n/**\n * @private unstable method\n */\n\nexport async function putMultiRegionAccessPointPolicy(\n  this: TOSBase,\n  input: PutMultiRegionAccessPointPolicyInput\n) {\n  const { accountId, name, policy } = input;\n  if (this.opts.enableOptimizeMethodBehavior && !policy.Statement?.length) {\n    return deleteMultiRegionAccessPointPolicy.call(this, {\n      accountId,\n      name,\n    });\n  }\n\n  const res = await this.fetch<PutMultiRegionAccessPointPolicyOutput>(\n    'PUT',\n    `/mrap/${name}/policy`,\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    policy,\n    {}\n  );\n\n  return res;\n}\n\nexport interface GetMultiRegionAccessPointPolicyInput {\n  accountId: string;\n  name: string;\n}\n\nexport interface GetMultiRegionAccessPointPolicyOutput {\n  Policy: Policy;\n}\n\n/**\n * @private unstable method\n */\n\nexport async function getMultiRegionAccessPointPolicy(\n  this: TOSBase,\n  input: GetMultiRegionAccessPointPolicyInput\n): Promise<TosResponse<GetMultiRegionAccessPointPolicyOutput>> {\n  const { accountId, name } = input;\n  try {\n    const res = await this.fetch(\n      'GET',\n      `/mrap/${name}/policy`,\n      {},\n      {\n        'x-tos-account-id': accountId,\n      },\n      undefined,\n      {\n        handleResponse(response) {\n          return {\n            Policy: response.data,\n          };\n        },\n      }\n    );\n    return res as TosResponse<GetMultiRegionAccessPointPolicyOutput>;\n  } catch (error) {\n    return handleEmptyServerError<GetMultiRegionAccessPointPolicyOutput>(\n      error,\n      {\n        enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n        methodKey: 'getMultiRegionAccessPointMirrorBack',\n        defaultResponse: {\n          Policy: {\n            Version: '2012-10-17',\n            Statement: [],\n          },\n        },\n      }\n    );\n  }\n}\n\nexport interface DeleteMultiRegionAccessPointPolicyInput {\n  accountId: string;\n  name: string;\n}\n\nexport interface DeleteMultiRegionAccessPointPolicyOutput {}\n\n/**\n * @private unstable method\n */\n\nexport async function deleteMultiRegionAccessPointPolicy(\n  this: TOSBase,\n  input: DeleteMultiRegionAccessPointPolicyInput\n) {\n  const { accountId, name } = input;\n  const res = await this.fetch<DeleteMultiRegionAccessPointPolicyOutput>(\n    'DELETE',\n    `/mrap/${name}/policy`,\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    {},\n    {\n      handleResponse() {\n        return {};\n      },\n    }\n  );\n  return res;\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport {\n  AuditJobStateType,\n  AuditScanType,\n  AuditType,\n  CallbackTriggerModeType,\n  FreezeModeType,\n} from '../../TosExportEnum';\nimport TOSBase from '../base';\n\nexport interface GetBucketAuditInput {\n  bucket: string;\n}\n\nexport interface GetBucketAuditOutputBody {\n  TosAuditConfig: {\n    /**  */\n    Enable: boolean;\n    /** bucket  APP Name */\n    AppName: string;\n    /** bucket  APP ID */\n    AppId: number;\n    /** bucket  APP  */\n    AppNameZh: string;\n    AppType: string;\n    /**  */\n    Description: string;\n  };\n  /** 0  Inactive 1  Activating2  ActivationFailed3  Active */\n  ServiceAppStatus: number;\n  /**  */\n  ServiceAppStatusMessage: string;\n}\n\nexport type GetBucketAuditOutput = GetBucketAuditOutputBody | null;\n\n/**\n * @private unstable method\n */\nexport async function getBucketAudit(\n  this: TOSBase,\n  input: GetBucketAuditInput\n) {\n  const { bucket } = input;\n  try {\n    return await this.fetchBucket<GetBucketAuditOutput>(\n      bucket,\n      'GET',\n      {\n        audit: '',\n      },\n      {}\n    );\n  } catch (err) {\n    return handleEmptyServerError<GetBucketAuditOutput>(err, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketAudit',\n      defaultResponse: null,\n    });\n  }\n}\n\nexport interface PutBucketAuditInput {\n  bucket: string;\n  action: 'create' | 'enable' | 'disable' | 'retry';\n}\nexport interface PutBucketAuditOutput {}\n\n/**\n * @private unstable method\n */\nexport async function putBucketAudit(\n  this: TOSBase,\n  input: PutBucketAuditInput\n) {\n  const { bucket, action } = input;\n  return await this.fetchBucket<GetBucketAuditOutput>(\n    bucket,\n    'PUT',\n    {\n      action,\n      audit: '',\n    },\n    {}\n  );\n}\n\nexport interface ImageAudit {\n  Suffix?: string[];\n  BizType: string;\n  PerDayLimit?: number;\n}\n\nexport interface VideoAudit {\n  Suffix?: string[];\n  BizType: string;\n  Interval?: number;\n  PerDayLimit?: number;\n  ResultType?: number;\n}\n\nexport interface AudioAudit {\n  Suffix?: string[];\n  BizType: string;\n  PerDayLimit?: number;\n  ResultType?: number;\n}\n\nexport interface ScanConf {\n  Objects?: string[];\n  Type: AuditScanType;\n  ManifestURL?: string[];\n  ObjectPrefixAllowed?: string[];\n  ObjectPrefixDenied?: string[];\n  TimestampStart?: number;\n  TimestampEnd?: number;\n}\n\nexport interface CallbackBizs {\n  BizType: string;\n  LabelTexts?: string[];\n  AuditType: AuditType;\n}\n\nexport interface CallbackConf {\n  EnableCallback: boolean;\n  CallbackTriggerMode?: CallbackTriggerModeType;\n  CallbackURL?: {\n    URL: string;\n    Schema: 'https' | 'http';\n  };\n  CallbackBizs?: CallbackBizs[];\n}\n\nexport interface FreezeBizs {\n  BizType: string;\n  LabelTexts?: string[];\n  AuditType: AuditType;\n}\n\nexport interface ContentFreezeConf {\n  Enable: boolean;\n  FreezeBizs?: FreezeBizs[];\n  FreezeMode?: FreezeModeType;\n  FreezePathPrefix?: string;\n  CdnRefresh?: boolean;\n}\n\nexport interface AuditItem {\n  JobID: string;\n  State: AuditJobStateType;\n  CreateTime: string;\n  StartTime: string;\n  EndTime: string;\n  Error?: string;\n  Code?: number;\n  Message?: string;\n  ImageAudit?: ImageAudit;\n  VideoAudit?: VideoAudit;\n  AudioAudit?: AudioAudit;\n  ScanConf: ScanConf;\n  ContenFreezeConfig?: ContentFreezeConf;\n  CallbackConfig?: CallbackConf;\n}\n\nexport interface ListBucketAuditJobInput {\n  bucket: string;\n  /**\n   * Used to filter the start time of the job, unix timestamp.\n   */\n  startTime?: number;\n  /**\n   * Used to filter the end time of the job, unix timestamp.\n   */\n  endTime?: number;\n  /**\n   * The size of pagination, maximum 100? TODO\n   */\n  pageSize: number;\n  /**\n   * The starting token for pagination.\n   */\n  pageToken?: string;\n}\n\nexport interface ListBucketAuditJobOutput {\n  Items: AuditItem[];\n  NextPageToken?: string;\n  JobType: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBucketAuditJob(\n  this: TOSBase,\n  input: ListBucketAuditJobInput\n) {\n  const { bucket, startTime, endTime, pageSize, pageToken } = input;\n  const query: Record<string, string> = {\n    job_type: 'AuditStock',\n  };\n\n  if (startTime !== undefined) {\n    query['start_time'] = startTime.toString();\n  }\n  if (endTime !== undefined) {\n    query['end_time'] = endTime.toString();\n  }\n  if (pageSize !== undefined) {\n    query['page_size'] = pageSize.toString();\n  }\n  if (pageToken !== undefined) {\n    query['page_token'] = pageToken;\n  }\n\n  const res = await this.fetchBucket<ListBucketAuditJobOutput>(\n    bucket,\n    'GET',\n    query,\n    {}\n  );\n  return res;\n}\n\nexport interface GetBucketAuditJobInput {\n  bucket: string;\n  jobId: string;\n}\nexport type GetBucketAuditJobOutput = AuditItem | null;\n\n/**\n * @private unstable method\n */\nexport async function getBucketAuditJob(\n  this: TOSBase,\n  input: GetBucketAuditJobInput\n) {\n  const { bucket, jobId } = input;\n  try {\n    const res = await this.fetchBucket<GetBucketAuditJobOutput>(\n      bucket,\n      'GET',\n      {\n        job_type: 'AuditStock',\n        job_id: jobId,\n      },\n      {}\n    );\n    return res;\n  } catch (e) {\n    return handleEmptyServerError<GetBucketAuditJobOutput>(e, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketAuditJob',\n      defaultResponse: null,\n    });\n  }\n}\n\nexport interface PostBucketAuditJobInput {\n  bucket?: string;\n  job: {\n    ImageAudit?: ImageAudit;\n    VideoAudit?: VideoAudit;\n    AudioAudit?: AudioAudit;\n    ScanConf: ScanConf;\n    CallbackConfig?: CallbackConf;\n    ContenFreezeConfig?: ContentFreezeConf;\n  };\n}\n\nexport interface PostBucketAuditJobOutput {}\n/**\n * @private unstable method\n */\nexport async function postBucketAuditJob(\n  this: TOSBase,\n  input: PostBucketAuditJobInput\n) {\n  const { bucket, job } = input;\n  const res = await this.fetchBucket<PostBucketAuditJobOutput>(\n    bucket,\n    'POST',\n    {\n      job_type: 'AuditStock',\n      audit_jobs: '',\n    },\n    {},\n    job\n  );\n  return res;\n}\n\ninterface ConfigItem {\n  Name: string;\n  BizType: string;\n  Scene: string;\n  SceneText: string;\n  LabelTexts: string[];\n  Labels: string;\n}\n\nexport interface ListBucketAuditBizTypeOutput {\n  BizType: string;\n  Configs: ConfigItem[];\n}\n\nexport interface ListBucketAuditBizTypeInput {\n  bucket: string;\n  audit_type: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBucketAuditBizType(\n  this: TOSBase,\n  input: ListBucketAuditBizTypeInput\n) {\n  const { bucket, audit_type } = input;\n  return this.fetchBucket<ListBucketAuditBizTypeOutput>(\n    bucket,\n    'GET',\n    {\n      type: audit_type,\n      audits: '',\n    },\n    {}\n  );\n}\n\nexport interface IncrementScanConf {\n  ObjectPrefixAllowed?: string[];\n  ObjectPrefixDenied?: string[];\n}\n\nexport interface PostBucketIncrementAuditInput {\n  bucket?: string;\n  job: {\n    ImageAudit?: ImageAudit;\n    VideoAudit?: VideoAudit;\n    AudioAudit?: AudioAudit;\n    ScanConf: IncrementScanConf;\n    Callback?: CallbackConf;\n    ContentFreezeConf?: ContentFreezeConf;\n  };\n}\n\nexport interface PostBucketIncrementAuditOutput {}\n\n/**\n * @private unstable method\n */\nexport async function postBucketIncrementAudit(\n  this: TOSBase,\n  input: PostBucketIncrementAuditInput\n) {\n  const { bucket, job } = input;\n  const res = await this.fetchBucket<PostBucketIncrementAuditOutput>(\n    bucket,\n    'POST',\n    {\n      increment_audit: '',\n    },\n    {},\n    {\n      AuditConfiguration: job,\n    }\n  );\n  return res;\n}\n\nexport interface ListBucketIncrementAuditsInput {\n  bucket?: string;\n  pageSize: number;\n  /**\n   * The starting token for pagination.\n   */\n  pageToken?: string;\n  audiType: AuditType;\n}\n\nexport interface IncrementAuditItem {\n  RuleId: string;\n  ImageAudit?: ImageAudit;\n  VideoAudit?: VideoAudit;\n  AudioAudit?: AudioAudit;\n  ScanConf: IncrementScanConf;\n  Callback?: CallbackConf;\n  ContentFreezeConf?: ContentFreezeConf;\n}\n\nexport interface ListBucketIncrementAuditsOutput {\n  Items: IncrementAuditItem[];\n  NextPageToken?: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBucketIncrementAudits(\n  this: TOSBase,\n  input: ListBucketIncrementAuditsInput\n) {\n  const { bucket, pageSize, pageToken, audiType } = input;\n  const query: Record<string, string> = {\n    increment_audits: '',\n    audit_type: audiType,\n  };\n\n  if (pageSize !== undefined) {\n    query['page_size'] = pageSize.toString();\n  }\n  if (pageToken !== undefined) {\n    query['page_token'] = pageToken;\n  }\n\n  const res = await this.fetchBucket<ListBucketIncrementAuditsOutput>(\n    bucket,\n    'GET',\n    query,\n    {}\n  );\n  return res;\n}\n\nexport interface GetBucketIncrementAuditsInput {\n  bucket?: string;\n  ruleId: string;\n}\n\nexport type GetBucketIncrementAuditsOutput = IncrementAuditItem | null;\n\n/**\n * @private unstable method\n */\nexport async function getBucketIncrementAudit(\n  this: TOSBase,\n  input: GetBucketIncrementAuditsInput\n) {\n  const { bucket, ruleId } = input;\n  try {\n    const res = await this.fetchBucket<GetBucketIncrementAuditsOutput>(\n      bucket,\n      'GET',\n      {\n        increment_audit: '',\n        rule_id: ruleId,\n      },\n      {}\n    );\n    return res;\n  } catch (e) {\n    return handleEmptyServerError<GetBucketIncrementAuditsOutput>(e, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketIncrementAudits',\n      defaultResponse: null,\n    });\n  }\n}\n\nexport interface DeleteBucketIncrementAuditInput {\n  bucket?: string;\n  ruleId: string;\n}\n\nexport type DeleteBucketIncrementAuditOutput = {};\n\n/**\n * @private unstable method\n */\nexport async function deleteBucketIncrementAudit(\n  this: TOSBase,\n  input: DeleteBucketIncrementAuditInput\n) {\n  const { bucket, ruleId } = input;\n  return this.fetchBucket<DeleteBucketIncrementAuditOutput>(\n    bucket,\n    'DELETE',\n    {\n      increment_audit: '',\n      rule_id: ruleId,\n    },\n    {}\n  );\n}\n","import {\n  FileCompressFlatten,\n  FileUncompressPrefixReplaced,\n} from '../../TosExportEnum';\nimport { TOSBase } from '../base';\nimport { UnionToIntersection, MergeExclusive } from 'type-fest';\nimport { handleEmptyServerError } from '../../handleEmptyServerError';\n\nexport interface ListBucketJobInput {\n  bucket?: string;\n  jobType: string;\n  startTime?: number;\n  endTime?: number;\n  pageSize?: number;\n  pageToken?: string;\n}\n\nexport interface AudioConvertConfig {\n  ContainerFormat?: string;\n  BitRate?: number;\n}\n\nexport interface AudioJobItem {\n  JobID: string;\n  CreateTime: string;\n  StartTime: string;\n  EndTime: string;\n  State: string;\n  Code: number;\n  Message?: string;\n  Tag: string;\n  Input: {\n    BucketId: string;\n    Object: string;\n    Region: string;\n  };\n  Operation: {\n    Output: {\n      // \n      Bucket: string;\n      Object: string;\n      Region: string;\n    };\n  };\n  AudioConvertConfig?: AudioConvertConfig;\n  Output: {\n    // \n    Bucket: string;\n    Object: string;\n    Region: string;\n  };\n}\n\nexport interface FileCompressJobItem {\n  JobID: string;\n  CreateTime: string;\n  StartTime: string;\n  EndTime: string;\n  State: string;\n  Code: number;\n  Error: string;\n  Message: string;\n  Input: MergeExclusive<\n    {\n      Prefix: string;\n    },\n    {\n      KeyConfig: Array<{ Key: string }>;\n    }\n  >;\n  Operation: {\n    FileCompressConfig: {\n      Flatten: FileCompressFlatten | number;\n      Format: string;\n    };\n    FileCompressResult: {\n      Bucket: string;\n      CompressFileCount: number;\n      ErrorCount: number;\n      ErrorDetail?: {\n        ErrorFile: any[];\n      };\n      Object: string;\n      Region: string;\n    };\n    Output: {\n      Bucket: string;\n      Object: string;\n      Region: string;\n    };\n  };\n  Tag: string;\n}\n\nexport interface FileUncompressJobItem {\n  JobID: string;\n  CreateTime: string;\n  StartTime: string;\n  EndTime: string;\n  State: string;\n  Code: number;\n  Message: string;\n  Error: string;\n  Input: {\n    Object: string;\n  };\n  Operation: {\n    FileUncompressConfig: {\n      Prefix: string;\n      /**\n       * @default 0 FileUncompressPrefixReplaced.NoExtraPrefix\n       */\n      PrefixReplaced?: FileUncompressPrefixReplaced | number;\n    };\n    FileUncompressResult: {\n      Bucket: string;\n      FileCount: number;\n      FileList: {\n        Contents: any[];\n        IsTruncated: boolean;\n      };\n      Region: string;\n    };\n    Output: {\n      Bucket: string;\n      Object: string;\n      Region: string;\n    };\n  };\n  Tag: string;\n}\n\nexport type BucketJobItem = UnionToIntersection<\n  AudioJobItem | FileCompressJobItem | FileUncompressJobItem\n>;\n\nexport interface ListBucketJobOutput {\n  Items: BucketJobItem[];\n  NextPageToken?: string;\n  JobType: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function listBucketJob(this: TOSBase, input: ListBucketJobInput) {\n  const { bucket, jobType, startTime, endTime, pageSize, pageToken } = input;\n  const query: Record<string, string> = {\n    job_type: jobType,\n  };\n  if (startTime !== undefined) {\n    query['start_time'] = startTime.toString();\n  }\n\n  if (endTime !== undefined) {\n    query['end_time'] = endTime.toString();\n  }\n\n  if (pageSize !== undefined) {\n    query['page_size'] = pageSize.toString();\n  }\n\n  if (pageToken !== undefined) {\n    query['page_token'] = pageToken;\n  }\n\n  const res = await this.fetchBucket<ListBucketJobOutput>(\n    bucket,\n    'GET',\n    query,\n    {}\n  );\n  return res;\n}\n\nexport interface GetBucketJobInput {\n  bucket?: string;\n  jobType: string;\n  jobId: string;\n}\n\nexport type GetBucketJobOutput = BucketJobItem | null;\n\n/**\n * @private unstable method\n */\nexport async function getBucketJob(this: TOSBase, input: GetBucketJobInput) {\n  const { bucket, jobType, jobId } = input;\n  try {\n    const res = await this.fetchBucket<GetBucketJobOutput>(\n      bucket,\n      'GET',\n      {\n        job_type: jobType,\n        job_id: jobId,\n      },\n      {}\n    );\n    return res;\n  } catch (error) {\n    return handleEmptyServerError<GetBucketJobOutput>(error, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      methodKey: 'getBucketJob',\n      defaultResponse: null,\n    });\n  }\n}\n","import TOSBase from '../base';\n\nexport interface createBucketAudioConvertInput {\n  bucket: string;\n  Input: {\n    Object: string;\n  };\n  AudioConvertConfig: {\n    ContainerFormat: string; // \n    BitRate: number;\n  };\n  Output: {\n    Region: string;\n    Bucket: string;\n    Object: string;\n  };\n}\n\nexport interface createBucketAudioConvertOutput {}\n\n/**\n * @private unstable method\n */\nexport async function createBucketAudioConvert(\n  this: TOSBase,\n  input: createBucketAudioConvertInput\n) {\n  const { bucket, Input, Output, AudioConvertConfig } = input;\n  const res = await this.fetchBucket<createBucketAudioConvertOutput>(\n    bucket,\n    'POST',\n    { job_type: 'AudioConvert', media_jobs: '' },\n    {},\n    { Input, AudioConvertConfig, Output }\n  );\n\n  if (!res.data) {\n    res.data = {};\n  }\n\n  return res;\n}","import { makeArrayProp, normalizeHeadersKey } from \"../../utils\";\nimport TOSBase, { TosResponse } from \"../base\";\n\nexport interface GetObjectAITagInput {\n  bucket: string;\n  key: string;\n  versionId?: string;\n}\n\nexport interface GetObjectAITagOutput {\n  Confidence: number;\n  FirstCategory: string;\n  I18nFirstCategory: string;\n  SecondCategory: string;\n  I18nSecondCategory: string;\n  Tag: string;\n  I18nTag: string;\n  TagDescription: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function getObjectAITag(\n  this: TOSBase,\n  input: GetObjectAITagInput\n): Promise<TosResponse<GetObjectAITagOutput[]>> {\n  const { versionId } = input;\n  const headers = normalizeHeadersKey({\n    versionId,\n  });\n  const res = await this._fetchObject<any>(\n    input,\n    'GET',\n    { ['x-tos-process']: 'image/aitag', ...headers },\n    {}\n  );\n  makeArrayProp(res.data);\n  return res;\n}\n","import { convertNormalCamelCase2Upper } from '../../utils';\nimport TOSBase from '../base';\n\nconst CommonQueryKey = 'requestPayment';\n\nexport interface PutBucketRequestPayment {\n  bucket?: string;\n  Payer: 'BucketOwner' | 'Requester';\n}\n\nexport interface PutBucketRequestPaymentOutput {}\n\n/**\n * @private unstable\n */\nexport async function putBucketRequestPayment(\n  this: TOSBase,\n  input: PutBucketRequestPayment\n) {\n  const { bucket, ...otherProps } = input;\n\n  const body = convertNormalCamelCase2Upper(otherProps);\n  return this.fetchBucket<PutBucketRequestPayment>(\n    bucket,\n    'PUT',\n    { [CommonQueryKey]: '' },\n    {},\n    {\n      ...body,\n    }\n  );\n}\n\nexport interface GetBucketRequestPaymentInput {\n  bucket?: string;\n}\n\nexport interface GetBucketRequestPaymentOutput {\n  Payer: 'BucketOwner' | 'Requester';\n}\n\n/**\n * @private unstable\n */\nexport async function getBucketRequestPayment(\n  this: TOSBase,\n  input: GetBucketRequestPaymentInput\n) {\n  const { bucket } = input;\n  return await this.fetchBucket<GetBucketRequestPaymentOutput>(\n    bucket,\n    'GET',\n    { [CommonQueryKey]: '' },\n    {}\n  );\n}\n","export const filterUndefined = <T extends object>(obj: T): Partial<T> => {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([_, value]) => value !== undefined)\n  ) as Partial<T>;\n};\n","import TOSBase from \"../base\";\nimport { filterUndefined } from \"../utils\";\n\n\nexport enum DatasetTemplateId {\n  BasicInfoTemplate = 'basic_info_template',\n  ImageSemanticTemplate = 'image_semantic_template',\n}\n/**\n * \n */\nexport interface CreateDatasetParams {\n  accountId: string;\n  /**\n   * Dataset\n   * @required \n   * @constraints 1~128(-)(_)\n   */\n  DatasetName: string;\n\n  /**\n   * \n   * @required \n   * @constraints 256\n   */\n  Description: string;\n\n  /**\n   * ID\n   * @required \n   * @enum basic_info_template: \n   * @enum image_semantic_template: ++\n   */\n  TemplateId: DatasetTemplateId;\n  Region?: string;\n}\n\n/**\n * Dataset\n */\nexport interface Dataset {\n  /** Dataset */\n  DatasetName: string;\n  /** Bucket */\n  BindCount: number;\n  /** RFC3339Nano  */\n  CreateTime: string;\n  /** RFC3339Nano  */\n  UpdateTime: string;\n  /**  */\n  Description: string;\n  /**  */\n  FileCount: number;\n  /**  */\n  TotalFileSize: number;\n  /** ID */\n  TemplateId: string;\n  Region?: string;\n}\n\n/**\n * Dataset\n */\nexport interface CreateDatasetOutput {\n  /** RequestId */\n  RequestId: string;\n  /** Dataset */\n  Dataset: Dataset;\n}\n/**\n * Dataset\n * @param this TOSBase\n * @param input CreateDatasetParams\n * @returns CreateDatasetOutput\n * @private unstable \n */\nexport async function createDataset(\n  this: TOSBase,\n  input: CreateDatasetParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<CreateDatasetOutput>(\n    'POST',\n    '/dataset',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    filterUndefined(rest),\n    {}\n  );\n  return res;\n}\n\n\nexport interface GetDatasetParams {\n  datasetname: string;\n  accountId: string;\n}\n\nexport interface GetDatasetOutput {\n  RequestId: string;\n  Dataset: Dataset;\n}\n\n/**\n * Dataset\n * @param this TOSBase\n * @param input GetDatasetParams\n * @returns GetDatasetOutput\n * @private unstable \n */\nexport async function getDataset(\n  this: TOSBase,\n  input: GetDatasetParams\n) {\n  const { datasetname, accountId } = input;\n  const res = await this.fetch<GetDatasetOutput>(\n    'GET',\n    '/dataset',\n    {datasetname},\n    {\n      'x-tos-account-id': accountId,\n    },\n  );\n  return res;\n}\n\n/**\n * Dataset\n */\nexport interface DeleteDatasetParams {\n  accountId: string;\n  /**\n   * Dataset\n   * @required \n   */\n  datasetname: string;\n}\n\n/**\n * Dataset\n */\nexport interface DeleteDatasetOutput {\n  /** RequestId */\n  RequestId: string;\n  /** Dataset */\n  Dataset: Dataset;\n}\n\n/**\n * Dataset\n * @param this TOSBase\n * @param input DeleteDatasetParams\n * @returns DeleteDatasetOutput\n * @private unstable \n */\nexport async function deleteDataset(\n  this: TOSBase,\n  input: DeleteDatasetParams\n) {\n  const { accountId, datasetname } = input;\n  const res = await this.fetch<DeleteDatasetOutput>(\n    'DELETE',\n    '/dataset',\n    { datasetname },\n    {\n      'x-tos-account-id': accountId,\n    }\n  );\n  return res;\n}\n\n/**\n * \n * @interface ListDatasetParams\n * @property {number} [maxresults] - 1000~100\n * @property {string} [prefix] - \"\"\n * @property {string} [nexttoken] - marker\"\"\n */\nexport interface ListDatasetParams {\n  accountId: string;\n  maxresults?: number;\n  prefix?: string;\n  nexttoken?: string;\n}\n\n/**\n * \n * @interface ListDatasetOutput\n * @property {string} RequestId - request id\n * @property {string} [NextToken] - marker\n * @property {Dataset[]} Datasets - \n */\nexport interface ListDatasetOutput {\n  RequestId: string;\n  NextToken?: string;\n  Datasets: Dataset[];\n}\n/**\n * \n * @param this TOSBase\n * @param input ListDatasetParams\n * @returns ListDatasetOutput\n * @private unstable \n */\nexport async function listDataset(\n  this: TOSBase,\n  input: ListDatasetParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<ListDatasetOutput>(\n    'GET',\n    '/datasets',\n    filterUndefined(rest),\n    {\n      'x-tos-account-id': accountId,\n    }\n  );\n  return res;\n}\n","import TOSBase from \"../base\";\nimport { filterUndefined } from \"../utils\";\n\nexport enum STOCK_STATE {\n  INDEXING = \"Indexing\",\n  DONE = \"Done\",\n  FAILED = \"Failed\",\n}\n\n/**\n * \n * @interface Binding\n * @property {string} DatasetName - Dataset\n * @property {string} URI - BucketURI\n * @property {string} CreateTime - RFC3339Nano\n * @property {string} UpdateTime - RFC3339Nano\n * @property {string} State - \"Running\"\n * @property {string} StockState - \"Indexing\"\"Done\"\"Failed\"\n */\nexport interface Binding {\n  DatasetName: string;\n  URI: string;\n  CreateTime: string;\n  UpdateTime: string;\n  State: string;\n  StockState: STOCK_STATE;\n  EnableStockIndex: boolean;\n}\n\n/**\n * \n * @interface CreateDatasetBindingParams\n * @property {string} DatasetName - DatasetAccountDatasetName\n * @property {string} URI - URIAccountBucket\n * @property {boolean} [EnableStockIndex] - false\n */\nexport interface CreateDatasetBindingParams {\n  DatasetName: string;\n  URI: string;\n  EnableStockIndex?: boolean;\n  accountId: string;\n}\n\n/**\n * \n * @interface CreateDatasetBindingOutput\n * @property {Binding} Binding - \n */\nexport interface CreateDatasetBindingOutput {\n  Binding: Binding;\n}\n\n/**\n * \n * @param this TOSBase\n * @param input CreateDatasetBindingParams\n * @returns CreateDatasetBindingOutput\n * @private unstable \n */\nexport async function createDatasetBinding(\n  this: TOSBase,\n  input: CreateDatasetBindingParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<CreateDatasetBindingOutput>(\n    'POST',\n    '/datasetbinding',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    filterUndefined(rest),\n  );\n  return res;\n}\n\n/**\n * \n * @interface DeleteDatasetBindingParams\n * @property {string} DatasetName - DatasetAccountDatasetName\n * @property {string} URI - URIAccountBucket\n */\nexport interface DeleteDatasetBindingParams {\n  DatasetName: string;\n  URI: string;\n  accountId: string;\n}\n\n/**\n * \n * @interface DeleteDatasetBindingOutput\n * @property {Binding} Binding - \n */\nexport interface DeleteDatasetBindingOutput {\n  Binding: Binding;\n}\n\n/**\n * \n * @param this TOSBase\n * @param input DeleteDatasetBindingParams\n * @returns DeleteDatasetBindingOutput\n * @private unstable \n */\nexport async function deleteDatasetBinding(\n  this: TOSBase,\n  input: DeleteDatasetBindingParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<DeleteDatasetBindingOutput>(\n    'DELETE',\n    '/datasetbinding',\n    {},\n    {\n      'x-tos-account-id': accountId,\n    },\n    filterUndefined(rest),\n    {}\n  );\n  return res;\n}\n\n/**\n * \n * @interface GetDatasetBindingParams\n * @property {string} datasetname - DatasetName\n * @property {string} uri - Uri\n */\nexport interface GetDatasetBindingParams {\n  datasetname: string;\n  uri: string;\n  accountId: string;\n}\n\n/**\n * \n * @interface GetDatasetBindingOutput\n * @property {Binding} Binding - \n */\nexport interface GetDatasetBindingOutput {\n  Binding: Binding;\n}\n\n/**\n * \n * @param this TOSBase\n * @param input GetDatasetBindingParams\n * @returns GetDatasetBindingOutput\n * @private unstable \n */\nexport async function getDatasetBinding(\n  this: TOSBase,\n  input: GetDatasetBindingParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<GetDatasetBindingOutput>(\n    'GET',\n    '/datasetbinding',\n    filterUndefined(rest),\n    {\n      'x-tos-account-id': accountId,\n    },\n  );\n  return res;\n}\n\n/**\n * \n * @interface ListDatasetBindingsParams\n * @property {string} datasetname - \n * @property {number} [maxresults] - 0~100100\n * @property {string} [nexttoken] - marker\n */\nexport interface ListDatasetBindingsParams {\n  datasetname: string;\n  maxresults?: number;\n  nexttoken?: string;\n  accountId: string;\n}\n\n/**\n * \n * @interface ListDatasetBindingsOutput\n * @property {string} RequestId - request id\n * @property {string} [NextToken] - marker\n * @property {Binding[]} Bindings - \n */\nexport interface ListDatasetBindingsOutput {\n  RequestId: string;\n  NextToken?: string;\n  Bindings: Binding[];\n}\n\n/**\n * \n * @param this TOSBase\n * @param input ListDatasetBindingsParams\n * @returns ListDatasetBindingsOutput\n * @private unstable \n */\nexport async function listDatasetBindings(\n  this: TOSBase,\n  input: ListDatasetBindingsParams\n) {\n  const {\n    accountId,\n    ...rest\n  } = input;\n  const res = await this.fetch<ListDatasetBindingsOutput>(\n    'GET',\n    '/datasetbindings',\n    filterUndefined(rest),\n    {\n      'x-tos-account-id': accountId,\n    },\n  );\n  return res;\n}","import TOSBase from \"../base\";\nimport { FileType } from \"./type\";\nimport { filterUndefined } from \"../utils\";\n\n\n/**\n * \n * \n */\nexport enum Operator {\n  /**  */\n  NOT = 'not',\n\n  /**  -  */\n  OR = 'or',\n\n  /**  -  */\n  AND = 'and',\n\n  /**  -  */\n  LT = 'lt',\n\n  /**  -  */\n  LTE = 'lte',\n\n  /**  -  */\n  GT = 'gt',\n\n  /**  -  */\n  GTE = 'gte',\n\n  /**  -  */\n  EQ = 'eq',\n\n  /**  -  */\n  EXIST = 'exist',\n\n  /**  -  */\n  PREFIX = 'prefix',\n\n  /**  -  */\n  MATCH_PHRASE = 'match-phrase',\n\n  /**  -  */\n  // NESTED = 'nested',\n}\n\n\nexport interface Query {\n  Operation: Operator;\n  Field?: string;\n  Value?: string;\n  SubQueries?: Query[];\n}\n\nexport enum AGGREGATION_OPERATION {\n  MIN = 'min',\n  MAX = 'max',\n  AVERAGE = 'average',\n  SUM = 'sum',\n  COUNT = 'count',\n  DISTINCT = 'distinct',\n  GROUP = 'group',\n}\n\n\nexport interface Group {\n  Value: string;\n  Count: number;\n}\n\n\nexport interface AggregationsRes {\n  Field: string;\n  Operation: string;\n  Value?: number;\n  Groups?: Group[];\n}\n\nexport interface AggregationsParams {\n  Field?: string;\n  Operation?: AGGREGATION_OPERATION;\n}\n\n\n/**\n * \n * @interface DatasetSimpleQueryParams\n * @property {string} DatasetName - \n * @property {Query} [Query] - \n * @property {string} [Sort] - \n * @property {string} [Order] - \n * @property {number} [MaxResults] - \n * @property {string} [NextToken] - token\n * @property {Aggregations[]} [Aggregations] - \n * @property {string[]} [WithFields] - \n */\nexport interface DatasetSimpleQueryParams {\n  accountId: string;\n  /**  */\n  DatasetName: string;\n  \n  /**  SubQueries */\n  Query?: Query;\n  \n  /**\n   * \n   * @example \"Size,Filename\"\n   * @description 5\n   */\n  Sort?: string;\n  \n  /**\n   * \n   * @example \"asc,desc\"\n   * @description ascdesc\n   */\n  Order?: string;\n  \n  /**\n   * \n   * @description Aggregations0~100100Aggregations0~2000\n   */\n  MaxResults?: number;\n  \n  /**\n   * token\n   * @description NextToken\n   */\n  NextToken?: string;\n  \n  /**\n   * \n   * @description Aggregation\n   */\n  Aggregations?: AggregationsParams[];\n  \n  /**\n   * \n   * @description \n   */\n  WithFields?: string[];\n}\n\n\nexport type ObjectFile = FileType;\n\nexport interface DatasetSimpleQueryOutput {\n  /**  ID */\n  RequestId: string;\n  /**\n   * \n   * MaxResults\n   */\n  NextToken?: string;\n  /**\n   * \n   * Aggregations\n   */\n  Aggregations?: AggregationsRes[];\n  /**\n   * \n   * Aggregations\n   */\n  Files?: ObjectFile[];\n}\n\nexport async function datasetSimpleQuery(\n  this: TOSBase,\n  input: DatasetSimpleQueryParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<DatasetSimpleQueryOutput>(\n    'POST',\n    '/datasetquery',\n    {mode: 'SimpleQuery'},\n    {\n      'x-tos-account-id': accountId,\n    },\n    filterUndefined(rest)\n  );\n  return res;\n}\n\n\n\n\n/**\n * \n */\nexport enum SEMANTIC_QUERY_TYPE {\n  TEXT = 'text',\n  IMAGE = 'image',\n}\n\n/**\n * \n * @interface DatasetSemanticQueryParams\n */\nexport interface DatasetSemanticQueryParams {\n  accountId: string;\n  /**\n   * \n   */\n  DatasetName: string;\n  /**\n   * \n   * - SemanticQueryTypetext\n   * - SemanticQueryTypeimageurl\n   */\n  SemanticQueryInput: string;\n  /**\n   * \n   * - text60\n   * - image\n   * @default text\n   */\n  SemanticQueryType?: SEMANTIC_QUERY_TYPE;\n  /**\n   * SubQueries\n   * @constraints 1005\n   */\n  Query?: Query;\n  /**\n   * \n   * @default 100\n   * @constraints 0~100\n   */\n  MaxResults?: number;\n  /**\n   * \n   * @constraints \n   */\n  WithFields?: string[];\n}\n\n/**\n * \n * @interface DatasetSemanticQueryOutput\n */\nexport interface DatasetSemanticQueryOutput {\n  /**\n   * RequestId\n   */\n  RequestId: string;\n  /**\n   * \n   * @description Aggregations\n   */\n  Files?: ObjectFile[];\n}\n\nexport async function datasetSemanticQuery(\n  this: TOSBase,\n  input: DatasetSemanticQueryParams\n) {\n  const { accountId, ...rest } = input;\n  const res = await this.fetch<DatasetSemanticQueryOutput>(\n    'POST',\n    '/datasetquery',\n    { mode: 'SemanticQuery'},\n    {\n      'x-tos-account-id': accountId,\n    },\n    filterUndefined(rest)\n  );\n  return res;\n}\n","import { handleEmptyServerError } from '../../handleEmptyServerError';\nimport {\n  TemplateTagType,\n  AudioContainerFormatType,\n  SampleFormatType,\n  ContainerFormatType,\n} from '../../TosExportEnum';\nimport TOSBase, { TosResponse } from '../base';\n\nexport interface AudioConvertConfig {\n  TimeInterval?: {\n    Start?: number;\n    Duration?: number;\n  };\n  ContainerFormat: AudioContainerFormatType;\n  BitRate?: number;\n  BitRateOpt?: number;\n  SampleFormat?: string;\n  SampleRate?: number;\n  Channels?: number;\n}\n\nexport interface PutBucketDataProcessTemplateInput {\n  bucket: string;\n  tag: TemplateTagType;\n  name: string;\n  audioConvertConfig: AudioConvertConfig;\n}\n\nexport interface PutBucketDataProcessTemplateOutput {}\n\n/**\n * @private unstable method\n */\nexport async function putBucketDataProcessTemplate(\n  this: TOSBase,\n  input: PutBucketDataProcessTemplateInput\n): Promise<TosResponse<PutBucketDataProcessTemplateOutput>> {\n  const { bucket, tag, name, audioConvertConfig } = input;\n  const res = await this.fetchBucket(\n    bucket,\n    'PUT',\n    { process_template: '', tag },\n    {},\n    {\n      Tag: tag,\n      Name: name,\n      AudioConvertConfig: audioConvertConfig,\n    }\n  );\n  res.data = {};\n  return res as TosResponse<PutBucketDataProcessTemplateOutput>;\n}\n\nexport interface ListBucketDataProcessTemplatesInput {\n  bucket: string;\n  tag: TemplateTagType;\n  prefix?: string;\n}\n\nexport interface TemplateItem {\n  Tag: TemplateTagType;\n  ID: string;\n  Name: string;\n  AudioConvertConfig: AudioConvertConfig;\n}\n\nexport type ListBucketDataProcessTemplatesOutput = TemplateItem[];\n\n/**\n * @private unstable method\n */\nexport async function listBucketDataProcessTemplates(\n  this: TOSBase,\n  input: ListBucketDataProcessTemplatesInput\n): Promise<TosResponse<ListBucketDataProcessTemplatesOutput>> {\n  const { bucket, tag, prefix } = input;\n  const query: Record<string, string> = {\n    process_template: '',\n    tag,\n  };\n\n  if (prefix) {\n    query.prefix = prefix;\n  }\n\n  const res = await this.fetchBucket<ListBucketDataProcessTemplatesOutput>(\n    bucket,\n    'GET',\n    query,\n    {}\n  );\n  return res;\n}\n\nexport interface GetBucketDataProcessTemplateInput {\n  bucket: string;\n  id: string;\n  tag: TemplateTagType;\n}\n\nexport type GetBucketDataProcessTemplateOutput = TemplateItem | null;\n\n/**\n * @private unstable method\n */\nexport async function getBucketDataProcessTemplate(\n  this: TOSBase,\n  input: GetBucketDataProcessTemplateInput\n): Promise<TosResponse<GetBucketDataProcessTemplateOutput>> {\n  const { bucket, id, tag } = input;\n  const query: Record<string, string> = {\n    process_template: '',\n    tag,\n    id,\n  };\n\n  try {\n    const res = await this.fetchBucket<GetBucketDataProcessTemplateOutput>(\n      bucket,\n      'GET',\n      query,\n      {}\n    );\n    return res;\n  } catch (err) {\n    return handleEmptyServerError<GetBucketDataProcessTemplateOutput>(err, {\n      enableCatchEmptyServerError: this.opts.enableOptimizeMethodBehavior,\n      defaultResponse: null,\n      methodKey: 'getBucketDataProcessTemplate',\n    });\n  }\n}\n\nexport interface DeleteBucketDataProcessTemplateInput {\n  bucket: string;\n  id: string;\n}\n\nexport interface DeleteBucketDataProcessTemplateOutput {}\n\n/**\n * @private unstable method\n */\nexport async function deleteBucketDataProcessTemplate(\n  this: TOSBase,\n  input: DeleteBucketDataProcessTemplateInput\n): Promise<TosResponse<DeleteBucketDataProcessTemplateOutput>> {\n  const { bucket, id } = input;\n  const res = await this.fetchBucket(\n    bucket,\n    'DELETE',\n    { process_template: '', id },\n    {},\n    ''\n  );\n  res.data = {};\n  return res as TosResponse<DeleteBucketDataProcessTemplateOutput>;\n}\n\n","import { AudioContainerFormatType, ContainerFormatType } from '../../TosExportEnum';\nimport TOSBase, { TosResponse } from '../base';\n\nexport interface AudioConvertConfig {\n  TimeInterval?: TimeInterval;\n  ContainerFormat: AudioContainerFormatType;\n  BitRate?: number;\n  BitRateOpt?: number;\n  SampleFormat?: string;\n  SampleRate?: number;\n  Channels?: number;\n}\n\n// PutAudioConvertTemplate interfaces\nexport interface PutAudioConvertTemplateInput {\n  bucket: string;\n  name: string;\n  audioConvertConfig: AudioConvertConfig;\n}\n\nexport interface PutAudioConvertTemplateOutput {\n  ID: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function putAudioConvertTemplate(\n  this: TOSBase,\n  input: PutAudioConvertTemplateInput\n): Promise<TosResponse<PutAudioConvertTemplateOutput>> {\n  const { bucket, name, audioConvertConfig } = input;\n\n  // Build query parameters\n  const query = {\n    process_template: '',\n    tag: 'AudioConvert' as const,\n  };\n\n  // Build request headers\n  const headers = {\n    'Content-Type': 'application/json',\n  };\n\n  // Build request body\n  const body = {\n    Tag: 'AudioConvert',\n    Name: name,\n    AudioConvertConfig: audioConvertConfig,\n  };\n\n  const res = await this.fetchBucket<PutAudioConvertTemplateOutput>(\n    bucket,\n    'PUT',\n    query,\n    headers,\n    body\n  );\n\n  // Ensure res.data exists and contains templateId\n  res.data = { ID: res.data as unknown as string };\n\n  return res;\n}\n\nexport interface GetAudioConvertTemplateInput {\n  bucket: string;\n  id: string;\n}\n\nexport interface GetAudioConvertTemplateOutput {\n  Tag: string;\n  ID: string;\n  Name: string;\n  AudioConvertConfig: AudioConvertConfig;\n}\n\n/**\n * @private unstable method\n */\nexport async function getAudioConvertTemplate(\n  this: TOSBase,\n  input: GetAudioConvertTemplateInput\n): Promise<TosResponse<GetAudioConvertTemplateOutput>> {\n  const { bucket, id } = input;\n\n  // Build query parameters\n  const query: Record<string, string> = {\n    process_template: '',\n    tag: 'AudioConvert',\n    id,\n  };\n\n  const res = await this.fetchBucket<GetAudioConvertTemplateOutput>(\n    bucket,\n    'GET',\n    query,\n    {}\n  );\n\n  return res;\n}\n\n// ListAudioConvertTemplates interfaces\nexport interface ListAudioConvertTemplatesInput {\n  bucket: string;\n  id?: string;\n}\n\nexport interface AudioConvertTemplate {\n  Tag: string;\n  ID: string;\n  Name: string;\n  AudioConvertConfig: AudioConvertConfig;\n}\n\nexport interface ListAudioConvertTemplatesOutput {\n  AudioConvertTemplates: Array<AudioConvertTemplate>;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAudioConvertTemplates(\n  this: TOSBase,\n  input: ListAudioConvertTemplatesInput\n): Promise<TosResponse<ListAudioConvertTemplatesOutput>> {\n  const { bucket, id } = input;\n\n  // Build query parameters\n  const query: Record<string, string> = {\n    process_template: '',\n    tag: 'AudioConvert',\n  };\n\n  if (id) {\n    query.id = id;\n  }\n\n  const res = await this.fetchBucket<any>(bucket, 'GET', query, {});\n  res.data = { AudioConvertTemplates: res.data || [] };\n\n  return res;\n}\n\n// DeleteAudioConvertTemplate interfaces\nexport interface DeleteAudioConvertTemplateInput {\n  bucket: string;\n  id: string;\n}\n\nexport interface DeleteAudioConvertTemplateOutput {}\n\n/**\n * @private unstable method\n */\nexport async function deleteAudioConvertTemplate(\n  this: TOSBase,\n  input: DeleteAudioConvertTemplateInput\n): Promise<TosResponse<DeleteAudioConvertTemplateOutput>> {\n  const { bucket, id } = input;\n\n  // Build query parameters\n  const query = {\n    process_template: '',\n    id,\n  };\n\n  const res = await this.fetchBucket(bucket, 'DELETE', query, {}, '');\n\n  res.data = {};\n  return res as TosResponse<DeleteAudioConvertTemplateOutput>;\n}\n\nexport interface TimeInterval {\n  Start?: number;\n  Duration?: number;\n}\n\nexport interface ClipConfig {\n  Duration?: number;\n}\n\nexport interface Container {\n  Format: ContainerFormatType;\n  ClipConfig?: ClipConfig;\n}\n\nexport interface Video {\n  Codec?: string;\n  Width?: number;\n  Height?: number;\n  Crf?: number;\n  PixFmt?: string;\n  BitRate?: number;\n  Fps?: number;\n  Remove?: boolean;\n}\n\nexport interface Audio {\n  Codec?: string;\n  BitRate?: number;\n  SampleFormat?: string;\n  SampleRate?: number;\n  Channels?: number;\n  Remove?: boolean;\n}\n\nexport interface AIGCMetadata {\n  Label: string;\n  ContentProducer: string;\n  ProduceID: string;\n  ContentPropagator?: string;\n  PropagateID?: string;\n  ReservedCode1?: string;\n  ReservedCode2?: string;\n}\n\nexport interface TranscodeConfigOptions {\n  AIGCMetadata?: AIGCMetadata;\n}\n\nexport interface Transcode {\n  TimeInterval?: TimeInterval;\n  Container?: Container;\n  Video?: Video;\n  Audio?: Audio;\n  Options?: TranscodeConfigOptions;\n}\n\nexport interface PutVideoConvertTemplateInput {\n  bucket: string;\n  name: string;\n  transcodeConfig: Transcode;\n}\n\nexport interface PutVideoConvertTemplateOutput {\n  ID: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function putVideoConvertTemplate(\n  this: TOSBase,\n  input: PutVideoConvertTemplateInput\n): Promise<TosResponse<PutVideoConvertTemplateOutput>> {\n  const { bucket, name, transcodeConfig } = input;\n\n  // Build query parameters\n  const query: Record<string, string> = {\n    process_template: '',\n    tag: 'Transcode',\n  };\n\n  // Build request headers\n  const headers = {};\n\n  // Build request body\n  const body = {\n    Tag: 'Transcode',\n    Name: name,\n    TranscodeConfig: transcodeConfig,\n  };\n\n  const res = await this.fetchBucket<string>(\n    bucket,\n    'PUT',\n    query,\n    headers,\n    body\n  );\n\n  return {\n    ...res,\n    data: {\n      ID: res.data,\n    },\n  };\n}\n\nexport interface GetVideoConvertTemplateInput {\n  bucket: string;\n  id: string;\n}\n\nexport interface GetVideoConvertTemplateOutput {\n  Tag: string;\n  ID: string;\n  Name: string;\n  TranscodeConfig: Transcode;\n}\n\n/**\n * @private unstable method\n */\nexport async function getVideoConvertTemplate(\n  this: TOSBase,\n  input: GetVideoConvertTemplateInput\n): Promise<TosResponse<GetVideoConvertTemplateOutput>> {\n  const { bucket, id } = input;\n\n  // Build query parameters\n  const query: Record<string, string> = {\n    process_template: '',\n    tag: 'Transcode',\n    id,\n  };\n\n  const res = await this.fetchBucket<GetVideoConvertTemplateOutput>(\n    bucket,\n    'GET',\n    query,\n    {}\n  );\n\n  return res;\n}\n\nexport interface DeleteVideoConvertTemplateInput {\n  bucket: string;\n  id: string;\n}\n\nexport interface DeleteVideoConvertTemplateOutput {}\n\n/**\n * @private unstable method\n */\nexport async function deleteVideoConvertTemplate(\n  this: TOSBase,\n  input: DeleteVideoConvertTemplateInput\n): Promise<TosResponse<DeleteVideoConvertTemplateOutput>> {\n  const { bucket, id } = input;\n\n  // Build query parameters\n  const query = {\n    process_template: '',\n    id,\n  };\n\n  const res = await this.fetchBucket(\n    bucket,\n    'DELETE',\n    query,\n    {},\n    ''\n  );\n\n  res.data = {};\n  return res as TosResponse<DeleteVideoConvertTemplateOutput>;\n}\n\nexport interface ListVideoConvertTemplatesInput {\n  bucket: string;\n}\n\nexport interface VideoConvertTemplate {\n  Tag: string;\n  ID: string;\n  Name: string;\n  TranscodeConfig: Transcode;\n}\n\nexport interface ListVideoConvertTemplatesOutput {\n  VideoConvertTemplates: Array<VideoConvertTemplate>;\n}\n\n/**\n * @private unstable method\n */\nexport async function listVideoConvertTemplates(\n  this: TOSBase,\n  input: ListVideoConvertTemplatesInput\n): Promise<TosResponse<ListVideoConvertTemplatesOutput>> {\n  const { bucket } = input;\n\n  // Build query parameters\n  const query: Record<string, string> = {\n    process_template: '',\n    tag: 'Transcode',\n  };\n\n  const res = await this.fetchBucket<any>(bucket, 'GET', query, {});\n  res.data = { VideoConvertTemplates: res.data || [] };\n\n  return res;\n}\n","import TOSBase, { TosResponse } from '../base';\nimport { AudioConvertConfig, Transcode } from './templatesV2';\n\nexport interface CreateVideoConvertJobInput {\n  bucket?: string;\n  input: ConvertJobInput;\n  transcodeConfig: TranscodeConfig;\n  output: ConvertJobOutput;\n}\n\nexport interface ConvertJobInput {\n  Object: string;\n}\n\nexport interface TranscodeConfig {\n  TemplateID?: string;\n  Transcode?: Transcode;\n}\n\nexport interface ConvertJobOutput {\n  Region: string;\n  Bucket: string;\n  Object: string;\n}\n\nexport interface CreateVideoConvertJobOutput {\n  JobId: string;\n}\n\nexport async function createVideoConvertJob(\n  this: TOSBase,\n  input: CreateVideoConvertJobInput\n): Promise<TosResponse<CreateVideoConvertJobOutput>> {\n  const { bucket, input: jobInput, transcodeConfig, output } = input;\n\n  // \n  const query: Record<string, any> = {\n    job_type: 'Transcode',\n    media_jobs: '',\n  };\n\n  // \n  const headers: Record<string, string> = {};\n\n  //  - \n  const body = {\n    Tag: 'Transcode',\n    Input: jobInput,\n    TranscodeConfig: transcodeConfig,\n    Output: output,\n  };\n\n  //  -  fetchBucket \n  const res = await this.fetchBucket<CreateVideoConvertJobOutput>(\n    bucket,\n    'POST',\n    query,\n    headers,\n    body\n  );\n\n  return res;\n}\n\nexport interface GetVideoConvertJobInput {\n  bucket?: string;\n  jobId: string;\n}\n\nexport interface GetVideoConvertJobOutput {\n  JobID: string;\n  CreateTime: string;\n  StartTime?: string;\n  EndTime?: string;\n  State: string;\n  Code: number;\n  Message?: string;\n  Input: ConvertJobInput;\n  TranscodeConfig: TranscodeConfig;\n  Output: ConvertJobOutput;\n}\n\nexport async function getVideoConvertJob(\n  this: TOSBase,\n  input: GetVideoConvertJobInput\n): Promise<TosResponse<GetVideoConvertJobOutput>> {\n  const { bucket, jobId } = input;\n\n  // \n  const query: Record<string, any> = {\n    job_type: 'Transcode',\n    job_id: jobId,\n    media_jobs: '',\n  };\n\n  // \n  const headers: Record<string, string> = {};\n\n  //  -  fetchBucket \n  const res = await this.fetchBucket<GetVideoConvertJobOutput>(\n    bucket,\n    'GET',\n    query,\n    headers\n  );\n\n  return res;\n}\n\nexport interface CreateAudioConvertJobInput {\n  bucket?: string;\n  input: ConvertJobInput;\n  audioConvertConfig: AudioConvertConfig;\n  output: ConvertJobOutput;\n}\n\nexport interface CreateAudioConvertJobOutput {\n  JobId: string;\n}\n\n/**\n * @private unstable method\n */\nexport async function createAudioConvertJob(\n  this: TOSBase,\n  input: CreateAudioConvertJobInput\n): Promise<TosResponse<CreateAudioConvertJobOutput>> {\n  const { bucket, input: jobInput, audioConvertConfig, output } = input;\n\n  // \n  const query: Record<string, any> = {\n    job_type: 'AudioConvert',\n    media_jobs: '',\n  };\n\n  // \n  const headers: Record<string, string> = {};\n\n  // \n  const body = {\n    Tag: 'AudioConvert',\n    Input: jobInput,\n    AudioConvertConfig: audioConvertConfig,\n    Output: output,\n  };\n\n  // \n  const res = await this.fetchBucket<CreateAudioConvertJobOutput>(\n    bucket,\n    'POST',\n    query,\n    headers,\n    body\n  );\n\n  return res;\n}\n\nexport interface GetAudioConvertJobInput {\n  bucket: string;\n  jobId: string;\n}\n\nexport interface GetAudioConvertJobOutput {\n  JobID: string;\n  CreateTime: string;\n  StartTime?: string;\n  EndTime?: string;\n  State: string;\n  Code: number;\n  Message?: string;\n  Input: ConvertJobInput;\n  AudioConvertConfig: AudioConvertConfig;\n  Output: ConvertJobOutput;\n}\n\n/**\n * @private unstable method\n */\nexport async function getAudioConvertJob(\n  this: TOSBase,\n  input: GetAudioConvertJobInput\n) {\n  const { bucket, jobId } = input;\n  \n  // \n  const query: Record<string, any> = {\n    job_type: 'AudioConvert',\n    job_id: jobId\n  };\n  \n  // \n  const headers = {};\n  \n  // \n  const res = await this.fetchBucket<GetAudioConvertJobOutput>(\n    bucket,\n    'GET',\n    query,\n    headers\n  );\n  \n  // \n  return res;\n}\n","import TOSBase from \"../base\";\n\n/**\n * \n * @interface ListTemplatesParams\n */\nexport interface ListTemplatesParams {\n  accountId: string;\n}\n\n/**\n * \n * @interface ListTemplatesOutput\n * @property {string} RequestId - request id\n * @property {string[]} Templates - \n */\nexport interface ListTemplatesOutput {\n  RequestId: string;\n  Templates: Array<{\n    TemplateName: string;\n    Description: string;\n    TemplateId: string;\n  }>;\n}\n/**\n * \n * @param this TOSBase\n * @param input ListTemplatesParams\n * @returns ListTemplatesOutput\n * @private unstable \n */\nexport async function listTemplates(\n  this: TOSBase,\n  input: ListTemplatesParams\n) {\n  const { accountId } = input;\n  const res = await this.fetch<ListTemplatesOutput>(\n    'GET',\n    '/templates',\n    {}, // \n    {\n      'x-tos-account-id': accountId,\n    },\n    {}\n  );\n  return res;\n}","import TOSBase from '../base';\n\nconst CommonQueryKey = 'redundancyTransition';\n\nexport interface PutBucketDataRedundancyTransitionInput {\n  bucket?: string;\n  targetRedundancyType: 'ZRS' | 'LRS';\n}\n\nexport interface PutBucketDataRedundancyTransitionOutput {\n  TaskId: string;\n}\n\n/**\n * @private unstable method\n * \n * @param this\n * @param input\n * @returns\n */\nexport async function createBucketDataRedundancyTransition(\n  this: TOSBase,\n  input: PutBucketDataRedundancyTransitionInput\n) {\n  const { bucket, targetRedundancyType } = input;\n  return this.fetchBucket<PutBucketDataRedundancyTransitionOutput>(\n    bucket,\n    'POST',\n    {\n      [CommonQueryKey]: '',\n      'x-tos-target-redundancy-type': targetRedundancyType,\n    },\n    {},\n    {}\n  );\n}\n\nexport interface GetBucketDataRedundancyTransitionInput {\n  bucket?: string;\n  redundancyTransitionTaskId: string;\n}\n\nexport interface GetBucketDataRedundancyTransitionOutput {\n  TaskId: string;\n  CreateTime: string;\n  StartTime: string;\n  EndTime: string;\n  Status: 'Queueing' | 'Processing' | 'Finished';\n  EstimatedRemainingTime: number;\n  ProcessPercentage: number;\n  Bucket: string;\n}\n\n/**\n * @private unstable method\n *  taskId \n * @param this\n * @param input\n * @returns\n */\nexport async function getBucketDataRedundancyTransition(\n  this: TOSBase,\n  input: GetBucketDataRedundancyTransitionInput\n) {\n  const { bucket, redundancyTransitionTaskId } = input;\n  return await this.fetchBucket<GetBucketDataRedundancyTransitionOutput>(\n    bucket,\n    'GET',\n    {\n      [CommonQueryKey]: '',\n      'x-tos-redundancy-transition-taskid': redundancyTransitionTaskId,\n    },\n    {}\n  );\n}\n\nexport interface DeleteBucketDataRedundancyTransitionInput {\n  bucket?: string;\n  redundancyTransitionTaskId: string;\n}\n\nexport interface DeleteBucketDataRedundancyTransitionOutput {}\n\n/**\n * @private unstable method\n *  taskId \n * @param this\n * @param input\n * @returns\n */\nexport async function deleteBucketDataRedundancyTransition(\n  this: TOSBase,\n  input: DeleteBucketDataRedundancyTransitionInput\n) {\n  const { bucket, redundancyTransitionTaskId } = input;\n\n  return this.fetchBucket<DeleteBucketDataRedundancyTransitionOutput>(\n    bucket,\n    'DELETE',\n    {\n      [CommonQueryKey]: '',\n      'x-tos-redundancy-transition-taskid': redundancyTransitionTaskId,\n    },\n    {}\n  );\n}\n\nexport interface ListBucketDataRedundancyTransitionInput {\n  bucket?: string;\n  continuationToken?: string;\n  maxKeys: number;\n}\n\nexport interface ListBucketDataRedundancyTransitionOutput {\n  IsTruncated: boolean;\n  NextContinuationToken: string;\n  BucketDataRedundancyTransition: Array<{\n    Bucket: string;\n    TaskId: string;\n    CreateTime: string;\n    StartTime: string;\n    EndTime: string;\n    Status: 'Queueing' | 'Processing' | 'Finished';\n    EstimatedRemainingTime: number;\n    ProcessPercentage: number;\n  }>;\n}\n\n/**\n * @private unstable method\n * \n * @param this\n * @param input\n * @returns\n */\nexport async function listBucketDataRedundancyTransition(\n  this: TOSBase,\n  input: ListBucketDataRedundancyTransitionInput\n) {\n  const { bucket, maxKeys, continuationToken } = input;\n\n  return this.fetchBucket<ListBucketDataRedundancyTransitionOutput>(\n    bucket,\n    'GET',\n    {\n      [CommonQueryKey]: '',\n      'max-keys': maxKeys,\n      'continuation-token': continuationToken,\n    },\n    {}\n  );\n}\n\nexport interface GetBucketTransitionEstimatedRemainingTimeInput {\n  bucket?: string;\n}\n\nexport type GetBucketTransitionEstimatedRemainingTimeOutput = number;\n\n/**\n * @private unstable method\n * \n * @param this\n * @param input\n * @returns\n */\nexport async function getBucketTransitionEstimatedRemainingTime(\n  this: TOSBase,\n  input: GetBucketTransitionEstimatedRemainingTimeInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<GetBucketTransitionEstimatedRemainingTimeOutput>(\n    bucket,\n    'GET',\n    {\n      estimatedRemainingTime: '',\n    },\n    {}\n  );\n}\n\nexport interface ListUserDataRedundancyTransitionInput {\n  continuationToken?: string;\n  maxKeys: number;\n}\n\n/**\n * @private unstable method\n * \n * @param this\n * @param input\n * @returns\n */\nexport async function listUserDataRedundancyTransition(\n  this: TOSBase,\n  input: ListUserDataRedundancyTransitionInput\n) {\n  const { continuationToken, maxKeys } = input;\n\n  return this.fetch<ListBucketDataRedundancyTransitionOutput>(\n    'GET',\n    '/',\n    {\n      [CommonQueryKey]: '',\n      'max-keys': maxKeys,\n      'continuation-token': continuationToken,\n    },\n    {}\n  );\n}\n","import TOSBase from \"../base\";\nimport { ConvertJobOutput } from \"./mediaJob\";\n\nexport interface WorkflowExtFilter {\n  AudioExts?: string[];\n  VideoExts?: string[];\n}\n\nexport interface OperationsAudioTranscode {\n  OperationID: string;\n  TemplateID?: string;\n  Output: ConvertJobOutput;\n}\n\nexport interface OperationsTranscode {\n  OperationID: string;\n  TemplateID: string;\n  Output: ConvertJobOutput;\n}\n\nexport interface WorkflowOperations {\n  AudioTranscode?: OperationsAudioTranscode[];\n  Transcode?: OperationsTranscode[];\n}\n\nexport interface ConvertWorkflowRule {\n  ID: string;\n  Enabled?: boolean;\n  Prefix?: string;\n  ExtFilter?: WorkflowExtFilter;\n  Topology: string[][];\n  Operations: WorkflowOperations;\n}\n\nexport interface PutConvertWorkflowInput {\n  bucket?: string;\n  rules: ConvertWorkflowRule[];\n}\n\nexport interface PutConvertWorkflowOutput {}\n\nexport interface GetConvertWorkflowInput {\n  bucket?: string;\n}\n\nexport interface GetConvertWorkflowOutput {\n  Rules: ConvertWorkflowRule[];\n}\n\n/**\n * @private unstable method\n */\nexport async function putConvertWorkflow(\n  this: TOSBase,\n  input: PutConvertWorkflowInput\n) {\n  const { bucket, rules } = input;\n\n  return this.fetchBucket<PutConvertWorkflowOutput>(\n    bucket,\n    'PUT',\n    {\n      workflow: '',\n    },\n    {},\n    {\n      Rules: rules,\n    }\n  );\n}\n\n/**\n * @private unstable method\n */\nexport async function getConvertWorkflow(\n  this: TOSBase,\n  input: GetConvertWorkflowInput\n) {\n  const { bucket } = input;\n\n  return this.fetchBucket<GetConvertWorkflowOutput>(\n    bucket,\n    'GET',\n    {\n      workflow: '',\n    },\n    {}\n  );\n}\n\nexport interface DeleteConvertWorkflowInput {\n  bucket?: string;\n}\n\nexport interface DeleteConvertWorkflowOutput {}\n\n/**\n * @private unstable method\n */\nexport async function deleteConvertWorkflow(\n  this: TOSBase,\n  input: DeleteConvertWorkflowInput\n) {\n  const { bucket } = input;\n  \n  const query: Record<string, any> = {\n    workflow: '',\n  };\n  \n  const res = await this.fetchBucket<DeleteConvertWorkflowOutput>(\n    bucket,\n    'DELETE',\n    query,\n    {}\n  );\n  \n  if (!res.data) {\n    res.data = {};\n  }\n  \n  return res;\n}\n","import TOSBase from '../base';\nimport { filterUndefined } from '../utils';\nimport {\n  CreateAnyPrivateAccessPointInput,\n  CreateAnyPrivateAccessPointOutput,\n  ListAnyPrivateAccessPointsInput,\n  ListAnyPrivateAccessPointsOutput,\n  ListAnyPrivateAccessPointSupportAzInput,\n  ListAnyPrivateAccessPointSupportAzOutput,\n  ListAnyPrivateAccessPointEndpointsInput,\n  ListAnyPrivateAccessPointEndpointsOutput,\n} from './interface';\n\n/**\n * @private unstable method\n */\nexport async function putAnyPrivateAccessPoint(\n  this: TOSBase,\n  input: CreateAnyPrivateAccessPointInput\n) {\n  const { Name, AccountId, VpcId, Subnets, SecurityGroupId } = input;\n  const res = await this.fetch<CreateAnyPrivateAccessPointOutput>(\n    'PUT',\n    `/apap`,\n    {name: Name},\n    {\n      'x-tos-account-id': AccountId,\n    },\n    filterUndefined({\n      Name,\n      VpcId,\n      Subnets,\n      SecurityGroupId,\n    }),\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAnyPrivateAccessPoints(\n  this: TOSBase,\n  input: ListAnyPrivateAccessPointsInput\n) {\n  const { AccountId, ...nextQuery } = input;\n  const res = await this.fetch<ListAnyPrivateAccessPointsOutput>(\n    'GET',\n    '/apap',\n    filterUndefined(nextQuery),\n    {\n      'x-tos-account-id': AccountId,\n    },\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAnyPrivateAccessPointSupportAz(\n  this: TOSBase,\n  input: ListAnyPrivateAccessPointSupportAzInput\n) {\n  const { AccountId } = input;\n  const res = await this.fetch<ListAnyPrivateAccessPointSupportAzOutput>(\n    'GET',\n    '/apap/az',\n    {},\n    {\n      'x-tos-account-id': AccountId,\n    },\n  );\n  return res;\n}\n\n/**\n * @private unstable method\n */\nexport async function listAnyPrivateAccessPointEndpoints(\n  this: TOSBase,\n  input: ListAnyPrivateAccessPointEndpointsInput\n) {\n  const { AccountId } = input;\n  const res = await this.fetch<ListAnyPrivateAccessPointEndpointsOutput>(\n    'GET',\n    '/apap/endpoint',\n    {},\n    {\n      'x-tos-account-id': AccountId,\n    },\n  );\n  return res;\n}\n\n\nexport * from './interface';\n\n","import TOSBase from './methods/base';\nimport {\n  listBuckets,\n  createBucket,\n  deleteBucket,\n  headBucket,\n  doesBucketExist,\n  getBucketInfo,\n  putBucketStorageClass,\n} from './methods/bucket/base';\nimport { getBucketAcl, putBucketAcl } from './methods/bucket/acl';\nimport {\n  getBucketHttpsConfig,\n  putBucketHttpsConfig,\n} from './methods/bucket/httpsConfig';\nimport {\n  getObject,\n  getObjectV2,\n  getObjectToFile,\n} from './methods/object/getObject';\nimport putObject, { putObjectFromFile } from './methods/object/putObject';\nimport { fetchObject, getFetchTask, putFetchTask } from './methods/object/fetch';\nimport { listObjectVersions, listObjects } from './methods/object/listObjects';\nimport getPreSignedUrl from './methods/object/getPreSignedUrl';\nimport headObject from './methods/object/headObject';\nimport { doesObjectExist } from './methods/object/doesObjectExist';\nimport deleteObject from './methods/object/deleteObject';\nimport renameObject from './methods/object/renameObject';\nimport deleteMultiObjects from './methods/object/deleteMultiObjects';\nimport copyObject from './methods/object/copyObject';\nimport { getObjectAcl, putObjectAcl } from './methods/object/acl';\nimport {\n  abortMultipartUpload,\n  completeMultipartUpload,\n  createMultipartUpload,\n  listParts,\n  uploadPart,\n  listMultipartUploads,\n  uploadPartFromFile,\n} from './methods/object/multipart';\nimport appendObject from './methods/object/appendObject';\nimport setObjectMeta from './methods/object/setObjectMeta';\nimport { uploadPartCopy } from './methods/object/multipart/uploadPartCopy';\nimport uploadFile from './methods/object/multipart/uploadFile';\nimport { calculatePostSignature } from './methods/object/calculatePostSignature';\n\nimport { resumableCopyObject } from './methods/object/multipart/resumableCopyObject';\nimport {\n  deleteBucketPolicy,\n  getBucketPolicy,\n  putBucketPolicy,\n} from './methods/bucket/policy';\nimport {\n  getBucketVersioning,\n  putBucketVersioning,\n} from './methods/bucket/versioning';\nimport { preSignedPolicyURL } from './methods/object/preSignedPolicyURL';\nimport downloadFile from './methods/object/downloadFile';\nimport { getBucketLocation } from './methods/bucket/getBucketLocation';\nimport {\n  deleteBucketCORS,\n  getBucketCORS,\n  putBucketCORS,\n} from './methods/bucket/cors';\nimport { listObjectsType2 } from './methods/object/listObjectsType2';\nimport {\n  deleteBucketLifecycle,\n  getBucketLifecycle,\n  putBucketLifecycle,\n} from './methods/bucket/lifecycle';\nimport {\n  putBucketEncryption,\n  getBucketEncryption,\n  deleteBucketEncryption,\n} from './methods/bucket/encryption';\nimport {\n  deleteBucketMirrorBack,\n  getBucketMirrorBack,\n  putBucketMirrorBack,\n} from './methods/bucket/mirrorback';\nimport {\n  deleteObjectTagging,\n  getObjectTagging,\n  putObjectTagging,\n} from './methods/object/tagging';\nimport {\n  deleteBucketReplication,\n  getBucketReplication,\n  putBucketReplication,\n} from './methods/bucket/replication';\nimport {\n  deleteBucketWebsite,\n  getBucketWebsite,\n  putBucketWebsite,\n} from './methods/bucket/website';\nimport {\n  getBucketNotification,\n  putBucketNotification,\n} from './methods/bucket/notification';\nimport {\n  deleteBucketCustomDomain,\n  getBucketCustomDomain,\n  putBucketCustomDomain,\n} from './methods/bucket/customDomain';\nimport {\n  deleteBucketRealTimeLog,\n  getBucketRealTimeLog,\n  putBucketRealTimeLog,\n} from './methods/bucket/realTimeLog';\nimport {\n  deleteBucketInventory,\n  getBucketInventory,\n  listBucketInventory,\n  putBucketInventory,\n} from './methods/bucket/inventory';\nimport {\n  createJob,\n  deleteJob,\n  describeJob,\n  updateJobStatus,\n  updateJobPriority,\n  listJobs,\n} from './methods/batch';\nimport {\n  deleteBucketTagging,\n  getBucketTagging,\n  putBucketTagging,\n} from './methods/bucket/tag';\nimport {\n  getBucketPayByTraffic,\n  putBucketPayByTraffic,\n} from './methods/bucket/payByTraffic';\nimport {\n  getBucketImageStyle,\n  getBucketImageStyleList,\n  getBucketImageStyleListByName,\n  getImageStyleBriefInfo,\n  deleteBucketImageStyle,\n  putBucketImageStyle,\n  putBucketImageStyleSeparator,\n  putBucketImageProtect,\n  getBucketImageProtect,\n  getBucketImageStyleSeparator,\n} from './methods/bucket/img';\nimport { getBucketIntelligenttiering } from './methods/bucket/intelligenttiering';\nimport {\n  putBucketRename,\n  getBucketRename,\n  deleteBucketRename,\n} from './methods/bucket/rename';\nimport restoreObject from './methods/object/restoreObject';\nimport {\n  deleteStorageLens,\n  getStorageLens,\n  listStorageLens,\n  putStorageLens,\n} from './methods/storageLens';\nimport {\n  putBucketNotificationType2,\n  getBucketNotificationType2,\n} from './methods/bucket/notificationType2';\n\nimport putSymlink from './methods/object/putSymlink';\nimport getSymlink from './methods/object/getSymlink';\nimport {\n  getBucketTransferAcceleration,\n  putBucketTransferAcceleration,\n} from './methods/bucket/acceleration';\nimport {\n  getBucketAccessMonitor,\n  putBucketAccessMonitor,\n} from './methods/bucket/accessMonitor';\nimport {\n  getQosPolicy,\n  putQosPolicy,\n  deleteQosPolicy,\n} from './methods/qosPolicy';\nimport {\n  createMultiRegionAccessPoint,\n  getMultiRegionAccessPoint,\n  listMultiRegionAccessPoints,\n  getMultiRegionAccessPointRoutes,\n  deleteMultiRegionAccessPoint,\n  submitMultiRegionAccessPointRoutes,\n  listBindAccessPointForMultiRegionAccelerator,\n  bindAcceleratorWithMultiRegionAccessPoint,\n  unbindAcceleratorWithMultiRegionAccessPoint,\n} from './methods/mrap';\nimport {\n  createAccessPoint,\n  getAccessPoint,\n  listAccessPoints,\n  deleteAccessPoint,\n  listBindAccessPointForAccelerator,\n  bindAcceleratorWithAccessPoint,\n  unbindAcceleratorWithAccessPoint,\n} from './methods/accesspoint';\nimport {\n  putAccelerator,\n  getAccelerator,\n  deleteAccelerator,\n  listAccelerators,\n  listAcceleratorAzs,\n  putAcceleratorPrefetchJob,\n  getAcceleratorPrefetchJob,\n  deleteAcceleratorPrefetchJob,\n  listAcceleratorPrefetchJobs,\n  listAcceleratorPrefetchJobRecords,\n  getAcceleratorCapacityQuota,\n  listBindAcceleratorForAccessPoint,\n} from './methods/accelerator';\nimport {\n  putMultiRegionAccessPointMirrorBack,\n  getMultiRegionAccessPointMirrorBack,\n  deleteMultiRegionAccessPointMirrorBack,\n} from './methods/mrap/mirror';\nimport {\n  putBucketPrivateM3U8,\n  getBucketPrivateM3U8,\n  putBucketBlindWatermark,\n  getBucketBlindWatermark,\n} from './methods/bucket/media';\nimport { getBucketTrash, putBucketTrash } from './methods/bucket/trash';\nimport {\n  putBucketObjectLockConfiguration,\n  getBucketObjectLockConfiguration,\n} from './methods/bucket/lock';\nimport {\n  putObjectRetention,\n  getObjectRetention,\n} from './methods/object/retention';\nimport {\n  putBucketCdnNotification,\n  getBucketCdnNotification,\n  deleteBucketCdnNotification,\n} from './methods/bucket/cdnNotification';\nimport {\n  getBucketWorkflow,\n  putBucketWorkflow,\n  deleteBucketWorkflow,\n  getBucketWorkflowExecution,\n  listBucketWorkflowExecution,\n} from './methods/bucket/workflow';\nimport { createFileCompress } from './methods/fileCompress';\nimport { createFileUncompress } from './methods/fileUncompress';\nimport {\n  deleteBucketLogging,\n  getBucketLogging,\n  putBucketLogging,\n} from './methods/bucket/logging';\nimport {\n  putAccessPointPolicy,\n  getAccessPointPolicy,\n  deleteAccessPointPolicy,\n  putMultiRegionAccessPointPolicy,\n  getMultiRegionAccessPointPolicy,\n  deleteMultiRegionAccessPointPolicy,\n} from './methods/mrap/policy';\nimport {\n  putBucketAudit,\n  getBucketAudit,\n  listBucketAuditJob,\n  getBucketAuditJob,\n  postBucketAuditJob,\n  listBucketAuditBizType,\n  postBucketIncrementAudit,\n  listBucketIncrementAudits,\n  getBucketIncrementAudit,\n  deleteBucketIncrementAudit,\n} from './methods/bucket/audit';\nimport { listBucketJob, getBucketJob } from './methods/bucket/listJob';\nimport { createBucketAudioConvert } from './methods/bucket/audioConvert';\nimport { getObjectAITag } from './methods/object/getObjectAITag';\nimport {\n  getBucketRequestPayment,\n  putBucketRequestPayment,\n} from './methods/bucket/requestPayment';\n\nimport {\n  createDataset,\n  deleteDataset,\n  listDataset,\n  getDataset,\n} from './methods/datasetSearch/dataset';\n\nimport {\n  createDatasetBinding,\n  deleteDatasetBinding,\n  listDatasetBindings,\n  getDatasetBinding,\n} from './methods/datasetSearch/binding';\n\nimport {\n  datasetSimpleQuery,\n  datasetSemanticQuery,\n} from './methods/datasetSearch/query';\n\nimport {\n  putBucketDataProcessTemplate,\n  getBucketDataProcessTemplate,\n  deleteBucketDataProcessTemplate,\n  listBucketDataProcessTemplates,\n} from './methods/bucket/template';\nimport {\n  putAudioConvertTemplate,\n  getAudioConvertTemplate,\n  deleteAudioConvertTemplate,\n  listAudioConvertTemplates,\n  getVideoConvertTemplate,\n  deleteVideoConvertTemplate,\n  putVideoConvertTemplate,\n  listVideoConvertTemplates,\n} from './methods/bucket/templatesV2';\nimport {\n  createVideoConvertJob,\n  getVideoConvertJob,\n  createAudioConvertJob,\n  getAudioConvertJob,\n} from './methods/bucket/mediaJob';\n\nimport { listTemplates } from './methods/datasetSearch/template';\nimport {\n  createBucketDataRedundancyTransition,\n  deleteBucketDataRedundancyTransition,\n  getBucketDataRedundancyTransition,\n  getBucketTransitionEstimatedRemainingTime,\n  listBucketDataRedundancyTransition,\n  listUserDataRedundancyTransition,\n} from './methods/bucket/dataRedundancy';\nimport { putConvertWorkflow, getConvertWorkflow, deleteConvertWorkflow } from './methods/bucket/workflowV2';\n\nimport { putAnyPrivateAccessPoint, listAnyPrivateAccessPoints, listAnyPrivateAccessPointSupportAz, listAnyPrivateAccessPointEndpoints } from './methods/apap';\n\n\n\n// refer https://stackoverflow.com/questions/23876782/how-do-i-split-a-typescript-class-into-multiple-files\nexport class InnerClient extends TOSBase {\n  // bucket base\n  createBucket = createBucket;\n  headBucket = headBucket;\n  doesBucketExist = doesBucketExist;\n  deleteBucket = deleteBucket;\n  listBuckets = listBuckets;\n  getBucketLocation = getBucketLocation;\n  getBucketInfo = getBucketInfo;\n  putBucketStorageClass = putBucketStorageClass;\n\n  // bucket acl\n  getBucketAcl = getBucketAcl;\n  putBucketAcl = putBucketAcl;\n\n  // bucket https config\n  putBucketHttpsConfig = putBucketHttpsConfig;\n  getBucketHttpsConfig = getBucketHttpsConfig;\n\n  // bucket policy\n  getBucketPolicy = getBucketPolicy;\n  putBucketPolicy = putBucketPolicy;\n  deleteBucketPolicy = deleteBucketPolicy;\n\n  // bucket versioning\n  getBucketVersioning = getBucketVersioning;\n  putBucketVersioning = putBucketVersioning;\n\n  // bucket cors\n  getBucketCORS = getBucketCORS;\n  putBucketCORS = putBucketCORS;\n  deleteBucketCORS = deleteBucketCORS;\n\n  // bucket lifecycle\n  putBucketLifecycle = putBucketLifecycle;\n  getBucketLifecycle = getBucketLifecycle;\n  deleteBucketLifecycle = deleteBucketLifecycle;\n\n  //bucket encryption\n  putBucketEncryption = putBucketEncryption;\n  getBucketEncryption = getBucketEncryption;\n  deleteBucketEncryption = deleteBucketEncryption;\n\n  // bucket mirror back\n  putBucketMirrorBack = putBucketMirrorBack;\n  getBucketMirrorBack = getBucketMirrorBack;\n  deleteBucketMirrorBack = deleteBucketMirrorBack;\n\n  // bucket replication\n  putBucketReplication = putBucketReplication;\n  getBucketReplication = getBucketReplication;\n  deleteBucketReplication = deleteBucketReplication;\n\n  // bucket website\n  putBucketWebsite = putBucketWebsite;\n  getBucketWebsite = getBucketWebsite;\n  deleteBucketWebsite = deleteBucketWebsite;\n\n  // bucket notification\n  putBucketNotification = putBucketNotification;\n  getBucketNotification = getBucketNotification;\n\n  // bucket customdomain\n  putBucketCustomDomain = putBucketCustomDomain;\n  getBucketCustomDomain = getBucketCustomDomain;\n  deleteBucketCustomDomain = deleteBucketCustomDomain;\n\n  // bucket timelog\n  putBucketRealTimeLog = putBucketRealTimeLog;\n  getBucketRealTimeLog = getBucketRealTimeLog;\n  deleteBucketRealTimeLog = deleteBucketRealTimeLog;\n\n  // bucket Inventory\n  getBucketInventory = getBucketInventory;\n  listBucketInventory = listBucketInventory;\n  putBucketInventory = putBucketInventory;\n  deleteBucketInventory = deleteBucketInventory;\n\n  // bucket tag\n  putBucketTagging = putBucketTagging;\n  getBucketTagging = getBucketTagging;\n  deleteBucketTagging = deleteBucketTagging;\n\n  // bucket pay by traffic\n  putBucketPayByTraffic = putBucketPayByTraffic;\n  getBucketPayByTraffic = getBucketPayByTraffic;\n\n  // bucket imgStyle\n  getBucketImageStyle = getBucketImageStyle;\n  getBucketImageStyleList = getBucketImageStyleList;\n  getBucketImageStyleListByName = getBucketImageStyleListByName;\n  getImageStyleBriefInfo = getImageStyleBriefInfo;\n  deleteBucketImageStyle = deleteBucketImageStyle;\n  putBucketImageStyle = putBucketImageStyle;\n  putBucketImageStyleSeparator = putBucketImageStyleSeparator;\n  putBucketImageProtect = putBucketImageProtect;\n  getBucketImageProtect = getBucketImageProtect;\n  getBucketImageStyleSeparator = getBucketImageStyleSeparator;\n\n  // bucket tag\n  putBucketRename = putBucketRename;\n  getBucketRename = getBucketRename;\n  deleteBucketRename = deleteBucketRename;\n\n  // bucket acceleration\n  putBucketTransferAcceleration = putBucketTransferAcceleration;\n  getBucketTransferAcceleration = getBucketTransferAcceleration;\n\n  // object base\n  copyObject = copyObject;\n  resumableCopyObject = resumableCopyObject;\n  deleteObject = deleteObject;\n  deleteMultiObjects = deleteMultiObjects;\n  getObject = getObject;\n  getObjectV2 = getObjectV2;\n  getObjectToFile = getObjectToFile;\n  getObjectAcl = getObjectAcl;\n  headObject = headObject;\n  doesObjectExist = doesObjectExist;\n  appendObject = appendObject;\n  listObjects = listObjects;\n  renameObject = renameObject;\n  fetchObject = fetchObject;\n  putFetchTask = putFetchTask;\n  getFetchTask = getFetchTask;\n\n  listObjectsType2 = listObjectsType2;\n\n  listObjectVersions = listObjectVersions;\n  putObject = putObject;\n  putObjectFromFile = putObjectFromFile;\n  putObjectAcl = putObjectAcl;\n  setObjectMeta = setObjectMeta;\n\n  // object multipart\n  createMultipartUpload = createMultipartUpload;\n  uploadPart = uploadPart;\n  uploadPartFromFile = uploadPartFromFile;\n  completeMultipartUpload = completeMultipartUpload;\n  abortMultipartUpload = abortMultipartUpload;\n  uploadPartCopy = uploadPartCopy;\n  listMultipartUploads = listMultipartUploads;\n  listParts = listParts;\n  downloadFile = downloadFile;\n\n  // object tagging\n  putObjectTagging = putObjectTagging;\n  getObjectTagging = getObjectTagging;\n  deleteObjectTagging = deleteObjectTagging;\n\n  // batch job\n  listJobs = listJobs;\n  createJob = createJob;\n  deleteJob = deleteJob;\n  describeJob = describeJob;\n  updateJobStatus = updateJobStatus;\n  updateJobPriority = updateJobPriority;\n\n  // restore object\n  restoreObject = restoreObject;\n  // object others\n  uploadFile = uploadFile;\n  getPreSignedUrl = getPreSignedUrl;\n  /**\n   * alias to preSignedPostSignature\n   */\n  calculatePostSignature = calculatePostSignature;\n  preSignedPostSignature = calculatePostSignature;\n  preSignedPolicyURL = preSignedPolicyURL;\n  // object intelligenttiering\n  getBucketIntelligenttiering = getBucketIntelligenttiering;\n\n  // storageLens\n  listStorageLens = listStorageLens;\n  deleteStorageLens = deleteStorageLens;\n  getStorageLens = getStorageLens;\n  putStorageLens = putStorageLens;\n\n  // bucket notificationV2\n  putBucketNotificationType2 = putBucketNotificationType2;\n  getBucketNotificationType2 = getBucketNotificationType2;\n\n  // symlink\n  putSymlink = putSymlink;\n  getSymlink = getSymlink;\n\n  // bucket accessMonitor\n  putBucketAccessMonitor = putBucketAccessMonitor;\n  getBucketAccessMonitor = getBucketAccessMonitor;\n\n  // qospolicy\n  putQosPolicy = putQosPolicy;\n  getQosPolicy = getQosPolicy;\n  deleteQosPolicy = deleteQosPolicy;\n\n  // mrap\n  createMultiRegionAccessPoint = createMultiRegionAccessPoint;\n  getMultiRegionAccessPoint = getMultiRegionAccessPoint;\n  listMultiRegionAccessPoints = listMultiRegionAccessPoints;\n  getMultiRegionAccessPointRoutes = getMultiRegionAccessPointRoutes;\n  deleteMultiRegionAccessPoint = deleteMultiRegionAccessPoint;\n  submitMultiRegionAccessPointRoutes = submitMultiRegionAccessPointRoutes;\n\n  // mrap-accelerator\n  bindAcceleratorWithMultiRegionAccessPoint =\n    bindAcceleratorWithMultiRegionAccessPoint;\n  unbindAcceleratorWithMultiRegionAccessPoint =\n    unbindAcceleratorWithMultiRegionAccessPoint;\n  listBindAccessPointForMultiRegionAccelerator =\n    listBindAccessPointForMultiRegionAccelerator;\n\n  // mrap mirror back\n  putMultiRegionAccessPointMirrorBack = putMultiRegionAccessPointMirrorBack;\n  getMultiRegionAccessPointMirrorBack = getMultiRegionAccessPointMirrorBack;\n  deleteMultiRegionAccessPointMirrorBack =\n    deleteMultiRegionAccessPointMirrorBack;\n\n  // mrap policy\n  putMultiRegionAccessPointPolicy = putMultiRegionAccessPointPolicy;\n  getMultiRegionAccessPointPolicy = getMultiRegionAccessPointPolicy;\n  deleteMultiRegionAccessPointPolicy = deleteMultiRegionAccessPointPolicy;\n\n  putAccessPointPolicy = putAccessPointPolicy;\n  getAccessPointPolicy = getAccessPointPolicy;\n  deleteAccessPointPolicy = deleteAccessPointPolicy;\n  // accesspoint\n  createAccessPoint = createAccessPoint;\n  getAccessPoint = getAccessPoint;\n  listAccessPoints = listAccessPoints;\n  deleteAccessPoint = deleteAccessPoint;\n  bindAcceleratorWithAccessPoint = bindAcceleratorWithAccessPoint;\n  unbindAcceleratorWithAccessPoint = unbindAcceleratorWithAccessPoint;\n  listBindAccessPointForAccelerator = listBindAccessPointForAccelerator;\n\n  // accelerator\n  listAcceleratorAzs = listAcceleratorAzs;\n  putAccelerator = putAccelerator;\n  getAccelerator = getAccelerator;\n  listAccelerators = listAccelerators;\n  deleteAccelerator = deleteAccelerator;\n  listBindAcceleratorForAccessPoint = listBindAcceleratorForAccessPoint;\n\n  putAcceleratorPrefetchJob = putAcceleratorPrefetchJob;\n  getAcceleratorPrefetchJob = getAcceleratorPrefetchJob;\n  deleteAcceleratorPrefetchJob = deleteAcceleratorPrefetchJob;\n  listAcceleratorPrefetchJobs = listAcceleratorPrefetchJobs;\n  listAcceleratorPrefetchJobRecords = listAcceleratorPrefetchJobRecords;\n  getAcceleratorCapacityQuota = getAcceleratorCapacityQuota;\n\n  // pm3u8\n  putBucketPrivateM3U8 = putBucketPrivateM3U8;\n  getBucketPrivateM3U8 = getBucketPrivateM3U8;\n  // \n  putBucketBlindWatermark = putBucketBlindWatermark;\n  getBucketBlindWatermark = getBucketBlindWatermark;\n  // hns trash\n  putBucketTrash = putBucketTrash;\n  getBucketTrash = getBucketTrash;\n\n  // bucket lock\n  putBucketObjectLockConfiguration = putBucketObjectLockConfiguration;\n  getBucketObjectLockConfiguration = getBucketObjectLockConfiguration;\n\n  // object retention\n  putObjectRetention = putObjectRetention;\n  getObjectRetention = getObjectRetention;\n  // cdn notification\n  putBucketCdnNotification = putBucketCdnNotification;\n  getBucketCdnNotification = getBucketCdnNotification;\n  deleteBucketCdnNotification = deleteBucketCdnNotification;\n\n  // workflow\n  putBucketWorkflow = putBucketWorkflow;\n  getBucketWorkflow = getBucketWorkflow;\n  deleteBucketWorkflow = deleteBucketWorkflow;\n  getBucketWorkflowExecution = getBucketWorkflowExecution;\n  listBucketWorkflowExecution = listBucketWorkflowExecution;\n  putConvertWorkflow = putConvertWorkflow;\n  getConvertWorkflow = getConvertWorkflow;\n  deleteConvertWorkflow = deleteConvertWorkflow;\n\n  // audit\n  putBucketAudit = putBucketAudit;\n  getBucketAudit = getBucketAudit;\n  listBucketAuditJob = listBucketAuditJob;\n  getBucketAuditJob = getBucketAuditJob;\n  postBucketAuditJob = postBucketAuditJob;\n  listBucketAuditBizType = listBucketAuditBizType;\n  postBucketIncrementAudit = postBucketIncrementAudit;\n  listBucketIncrementAudits = listBucketIncrementAudits;\n  getBucketIncrementAudit = getBucketIncrementAudit;\n  deleteBucketIncrementAudit = deleteBucketIncrementAudit;\n\n  // bucket file compress\n  createFileCompress = createFileCompress;\n  // bucket file uncompress\n  createFileUncompress = createFileUncompress;\n  createBucketAudioConvert = createBucketAudioConvert;\n  getAudioConvertJob = getAudioConvertJob;\n  createAudioConvertJob = createAudioConvertJob;\n  listBucketJob = listBucketJob;\n  getBucketJob = getBucketJob;\n  // logging\n  putBucketLogging = putBucketLogging;\n  getBucketLogging = getBucketLogging;\n  deleteBucketLogging = deleteBucketLogging;\n  getObjectAITag = getObjectAITag;\n  // requestPayment\n  putBucketRequestPayment = putBucketRequestPayment;\n  getBucketRequestPayment = getBucketRequestPayment;\n\n  // dataset search\n  createDataset = createDataset;\n  deleteDataset = deleteDataset;\n  listDataset = listDataset;\n  getDataset = getDataset;\n  createDatasetBinding = createDatasetBinding;\n  deleteDatasetBinding = deleteDatasetBinding;\n  listDatasetBindings = listDatasetBindings;\n  getDatasetBinding = getDatasetBinding;\n  datasetSimpleQuery = datasetSimpleQuery;\n  listTemplates = listTemplates;\n  datasetSemanticQuery = datasetSemanticQuery;\n\n  // bucket data process template\n  putBucketDataProcessTemplate = putBucketDataProcessTemplate;\n  putAudioConvertTemplate = putAudioConvertTemplate;\n  getBucketDataProcessTemplate = getBucketDataProcessTemplate;\n  deleteBucketDataProcessTemplate = deleteBucketDataProcessTemplate;\n  listBucketDataProcessTemplates = listBucketDataProcessTemplates;\n  getAudioConvertTemplate = getAudioConvertTemplate;\n  deleteAudioConvertTemplate = deleteAudioConvertTemplate;\n  listAudioConvertTemplates = listAudioConvertTemplates;\n  putVideoConvertTemplate = putVideoConvertTemplate;\n  getVideoConvertTemplate = getVideoConvertTemplate;\n  deleteVideoConvertTemplate = deleteVideoConvertTemplate;\n  listVideoConvertTemplates = listVideoConvertTemplates;\n  // video convert job\n  createVideoConvertJob = createVideoConvertJob;\n  getVideoConvertJob = getVideoConvertJob;\n  // data redundancy transition\n  createBucketDataRedundancyTransition = createBucketDataRedundancyTransition;\n  getBucketDataRedundancyTransition = getBucketDataRedundancyTransition;\n  listBucketDataRedundancyTransition = listBucketDataRedundancyTransition;\n  deleteBucketDataRedundancyTransition = deleteBucketDataRedundancyTransition;\n  listUserDataRedundancyTransition = listUserDataRedundancyTransition;\n  getBucketTransitionEstimatedRemainingTime =\n    getBucketTransitionEstimatedRemainingTime;\n\n  // apap\n  putAnyPrivateAccessPoint = putAnyPrivateAccessPoint;\n  listAnyPrivateAccessPoints = listAnyPrivateAccessPoints;\n  listAnyPrivateAccessPointSupportAz = listAnyPrivateAccessPointSupportAz;\n  listAnyPrivateAccessPointEndpoints = listAnyPrivateAccessPointEndpoints;\n}\n","import { Headers } from '../interface';\nimport { TosVectorsClient } from '../TosVectorsClient';\n\nexport interface CreateVectorBucketInput {\n  vectorBucketName: string;\n}\n\nexport interface CreateVectorBucketOutput {}\n\nexport async function createVectorBucket(\n  this: TosVectorsClient,\n  input: CreateVectorBucketInput\n) {\n  const { vectorBucketName } = input;\n  const res = await this.fetchVectors<CreateVectorBucketOutput>(\n    'POST',\n    '/CreateVectorBucket',\n    {},\n    {},\n    {\n      vectorBucketName,\n    }\n  );\n  res.data = {};\n  return res;\n}\n\nexport interface ListVectorBucketsInput {\n  prefix?: string;\n  nextToken?: string;\n  maxResults?: number;\n  projectName?: string;\n}\n\nexport interface VectorBucket {\n  creationTime: number;\n  vectorBucketTrn: string;\n  vectorBucketName: string;\n}\n\nexport interface ListVectorBucketsOutput {\n  nextToken?: string;\n  vectorBuckets: VectorBucket[];\n}\n\nexport async function listVectorBuckets(\n  this: TosVectorsClient,\n  input: ListVectorBucketsInput\n) {\n  const { prefix, nextToken, maxResults, projectName } = input;\n  const headers: Headers = {};\n  if (projectName) {\n    headers['x-tos-project-name'] = projectName;\n  }\n\n  return this.fetchVectors<ListVectorBucketsOutput>(\n    'POST',\n    '/ListVectorBuckets',\n    {},\n    headers,\n    {\n      prefix,\n      nextToken,\n      maxResults,\n    }\n  );\n}\n\nexport interface GetVectorBucketInput {\n  vectorBucketName: string;\n  accountID: string;\n}\n\nexport interface GetVectorBucketOutput {\n  vectorBucket: VectorBucket;\n}\n\nexport async function getVectorBucket(\n  this: TosVectorsClient,\n  input: GetVectorBucketInput\n) {\n  const { accountID } = input;\n  const query = {};\n  const header = {};\n  const body = {\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  const res = await this.fetchVectors<GetVectorBucketOutput>(\n    'POST',\n    '/GetVectorBucket',\n    query,\n    header,\n    body,\n    {\n      bucket: input.vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  return res;\n}\n\nexport interface DeleteVectorBucketInput {\n  vectorBucketName: string;\n  accountID: string;\n}\n\nexport interface DeleteVectorBucketOutput {}\n\nexport async function deleteVectorBucket(\n  this: TosVectorsClient,\n  input: DeleteVectorBucketInput\n) {\n  const { vectorBucketName, accountID } = input;\n\n  const query = {};\n\n  const header = {};\n\n  const body = {\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  const res = await this.fetchVectors<DeleteVectorBucketOutput>(\n    'POST',\n    '/DeleteVectorBucket',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  res.data = {};\n\n  return res;\n}\n\nexport interface PutVectorBucketPolicyInput {\n  vectorBucketName: string;\n  accountID: string;\n  policy: string;\n}\n\nexport interface PutVectorBucketPolicyOutput {}\n\nexport async function putVectorBucketPolicy(\n  this: TosVectorsClient,\n  input: PutVectorBucketPolicyInput\n) {\n  const headers: Headers = {};\n\n  const body = {\n    vectorBucketName: input.vectorBucketName,\n    policy: input.policy,\n  };\n\n  const res = await this.fetchVectors<PutVectorBucketPolicyOutput>(\n    'POST',\n    '/PutVectorBucketPolicy',\n    {},\n    headers,\n    body,\n    { bucket: input.vectorBucketName, accountId: input.accountID }\n  );\n\n  res.data = {};\n  return res;\n}\n\nexport interface GetVectorBucketPolicyInput {\n  vectorBucketName: string;\n  accountId: string;\n}\n\nexport interface VectorBucketPolicyStatement {\n  Sid: string;\n  Effect: 'Allow' | 'Deny';\n  Action?: string | string[];\n  Principal?: string[];\n  Resource?: string | string[];\n}\n\nexport interface GetVectorBucketPolicyOutput {\n  Statement: VectorBucketPolicyStatement[];\n  Version: string;\n}\n\nexport async function getVectorBucketPolicy(\n  this: TosVectorsClient,\n  input: GetVectorBucketPolicyInput\n) {\n  const { vectorBucketName, accountId } = input;\n\n  const headers: Headers = {};\n\n  const body = {\n    vectorBucketName,\n  };\n\n  const res = await this.fetchVectors<GetVectorBucketPolicyOutput>(\n    'POST',\n    '/GetVectorBucketPolicy',\n    {},\n    headers,\n    body,\n    { accountId, bucket: vectorBucketName }\n  );\n\n  return res;\n}\n\nexport interface DeleteVectorBucketPolicyInput {\n  vectorBucketName: string;\n  accountID: string;\n}\n\nexport interface DeleteVectorBucketPolicyOutput {}\n\nexport async function deleteVectorBucketPolicy(\n  this: TosVectorsClient,\n  input: DeleteVectorBucketPolicyInput\n) {\n  const headers: Headers = {};\n\n  const body = {\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  const res = await this.fetchVectors<DeleteVectorBucketPolicyOutput>(\n    'POST',\n    '/DeleteVectorBucketPolicy',\n    {},\n    headers,\n    body,\n    { bucket: input.vectorBucketName, accountId: input.accountID }\n  );\n\n  res.data = {};\n  return res;\n}\n","import { DataType, DistanceMetricType } from '../TosExportEnum';\nimport { TosVectorsClient } from '../TosVectorsClient';\nimport { Headers } from '../interface';\n\nexport interface MetadataConfiguration {\n  nonFilterableMetadataKeys: string[];\n}\n\nexport interface CreateIndexInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName: string;\n  dataType?: DataType;\n  dimension?: number;\n  distanceMetric?: DistanceMetricType;\n  metadataConfiguration?: MetadataConfiguration;\n}\n\nexport interface CreateIndexOutput {}\n\nexport async function createIndex(\n  this: TosVectorsClient,\n  input: CreateIndexInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    dataType: input.dataType,\n    dimension: input.dimension,\n    distanceMetric: input.distanceMetric,\n    indexName: input.indexName,\n    metadataConfiguration: input.metadataConfiguration,\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<CreateIndexOutput>(\n    'POST',\n    '/CreateIndex',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  return res;\n}\n\nexport interface DeleteIndexInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName?: string;\n}\n\nexport interface DeleteIndexOutput {}\n\nexport async function deleteIndex(\n  this: TosVectorsClient,\n  input: DeleteIndexInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    indexName: input.indexName,\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<DeleteIndexOutput>(\n    'POST',\n    '/DeleteIndex',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n  res.data = {};\n  return res;\n}\n\nexport interface IndexSummary {\n  creationTime: number;\n  indexName: string;\n  indexTrn: string;\n  vectorBucketName: string;\n}\n\nexport interface ListIndexesInput {\n  vectorBucketName: string;\n  maxResults?: number;\n  nextToken?: string;\n  prefix?: string;\n  accountID: string;\n}\n\nexport interface ListIndexesOutput {\n  nextToken: string;\n  indexes: IndexSummary[];\n}\n\nexport async function listIndexes(\n  this: TosVectorsClient,\n  input: ListIndexesInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    vectorBucketName: input.vectorBucketName,\n    maxResults: input.maxResults,\n    nextToken: input.nextToken,\n    prefix: input.prefix,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<ListIndexesOutput>(\n    'POST',\n    '/ListIndexes',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  return res;\n}\n\nexport interface GetIndexInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName: string;\n}\n\nexport interface GetIndexOutput {\n  index: Index;\n}\n\nexport interface Index {\n  creationTime: number;\n  dataType: DataType;\n  dimension: number;\n  distanceMetric: DistanceMetricType;\n  metadataConfiguration: MetadataConfiguration;\n  indexName: string;\n  indexTrn: string;\n  vectorBucketName: string;\n}\n\nexport async function getIndex(this: TosVectorsClient, input: GetIndexInput) {\n  const headers: Headers = {};\n\n  const body = {\n    indexName: input.indexName,\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  const res = await this.fetchVectors<GetIndexOutput>(\n    'POST',\n    '/GetIndex',\n    {},\n    headers,\n    body,\n    { accountId: input.accountID, bucket: input.vectorBucketName }\n  );\n\n  return res;\n}\n","import { TosVectorsClient } from '../TosVectorsClient';\n\nexport interface PutVectorsInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName: string;\n  vectors: Vector[];\n}\n\nexport interface PutVectorsOutput {}\n\nexport interface ListVectorsInput {\n  vectorBucketName: string;\n  indexName: string;\n  accountID: string;\n  maxResults?: number;\n  nextToken?: string;\n  returnData?: boolean;\n  returnMetadata?: boolean;\n}\n\nexport interface ListVectorsOutput {\n  nextToken?: string;\n  vectors: Vector[];\n}\n\nexport interface GetVectorsInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName: string;\n  keys: string[];\n  returnData?: boolean;\n  returnMetadata?: boolean;\n}\n\nexport interface GetVectorsOutput {\n  vectors: Vector[];\n}\n\nexport interface DeleteVectorsInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName: string;\n  keys: string[];\n}\n\nexport interface DeleteVectorsOutput {}\n\nexport interface QueryVectorsInput {\n  vectorBucketName: string;\n  accountID: string;\n  indexName: string;\n  returnDistance?: boolean;\n  returnMetadata?: boolean;\n  topK: number;\n  queryVector: VectorData;\n  filter?: { [key: string]: any };\n}\n\nexport interface QueryVectorsOutput {\n  vectors: DistanceVector[];\n}\n\nexport interface DistanceVector {\n  key: string;\n  data: VectorData;\n  distance: number;\n  metadata: { [key: string]: any };\n}\n\nexport interface Vector {\n  key: string;\n  data?: VectorData;\n  metadata?: Record<string, any>;\n}\n\nexport interface VectorData {\n  float32?: number[];\n}\n\nexport async function putVectors(\n  this: TosVectorsClient,\n  input: PutVectorsInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    indexName: input.indexName,\n    vectorBucketName: input.vectorBucketName,\n    vectors: input.vectors,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<PutVectorsOutput>(\n    'POST',\n    '/PutVectors',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  return res;\n}\n\nexport async function listVectors(\n  this: TosVectorsClient,\n  input: ListVectorsInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    indexName: input.indexName,\n    maxResults: input.maxResults,\n    nextToken: input.nextToken,\n    returnData: input.returnData,\n    returnMetadata: input.returnMetadata,\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<ListVectorsOutput>(\n    'POST',\n    '/ListVectors',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  return res;\n}\n\nexport async function getVectors(\n  this: TosVectorsClient,\n  input: GetVectorsInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    indexName: input.indexName,\n    keys: input.keys,\n    returnData: input.returnData,\n    returnMetadata: input.returnMetadata,\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<GetVectorsOutput>(\n    'POST',\n    '/GetVectors',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  return res;\n}\n\nexport async function deleteVectors(\n  this: TosVectorsClient,\n  input: DeleteVectorsInput\n) {\n  const { vectorBucketName, accountID } = input;\n  //  input  query\n  const query = {};\n  //  input  header\n  const header = {};\n  //  input  body\n  const body = {\n    indexName: input.indexName,\n    keys: input.keys,\n    vectorBucketName: input.vectorBucketName,\n  };\n\n  //  TOS  API \n  const res = await this.fetchVectors<DeleteVectorsOutput>(\n    'POST',\n    '/DeleteVectors',\n    query,\n    header,\n    body,\n    {\n      bucket: vectorBucketName,\n      accountId: accountID,\n    }\n  );\n\n  res.data = {};\n  return res;\n}\n\nexport async function queryVectors(\n  this: TosVectorsClient,\n  input: QueryVectorsInput\n) {\n  const { vectorBucketName, accountID } = input;\n\n  const query: Record<string, any> = {};\n\n  const headers = {};\n\n  const body = {\n    vectorBucketName: input.vectorBucketName,\n    indexName: input.indexName,\n    returnDistance: input.returnDistance,\n    returnMetadata: input.returnMetadata,\n    topK: input.topK,\n    queryVector: input.queryVector,\n    filter: input.filter,\n  };\n\n  const res = await this.fetchVectors<QueryVectorsOutput>(\n    'POST',\n    '/QueryVectors',\n    query,\n    headers,\n    body,\n    { bucket: vectorBucketName, accountId: accountID }\n  );\n\n  return res;\n}\n","import { Method } from 'axios';\nimport { TosClientCommonOptions, Headers } from './interface';\nimport TOSBase, { TosResponse } from './methods/base';\nimport {\n  createVectorBucket,\n  listVectorBuckets,\n  getVectorBucket,\n  deleteVectorBucket,\n  putVectorBucketPolicy,\n  getVectorBucketPolicy,\n  deleteVectorBucketPolicy,\n} from './vectors-methods/base';\nimport { createIndex, deleteIndex, getIndex, listIndexes } from './vectors-methods/vector-index';\nimport { putVectors, listVectors, getVectors, deleteVectors, queryVectors } from './vectors-methods/vectors';\nimport { isValidAccountId, isValidBucketName, isValidVectorBucketName } from './utils';\n\nexport interface TosVectorsClientOptions extends TosClientCommonOptions {}\n\nexport class TosVectorsClient extends TOSBase {\n  constructor(options: TosVectorsClientOptions) {\n    super(options);\n  }\n  private serviceName = 'tosvectors';\n  createVectorBucket = createVectorBucket;\n  listVectorBuckets = listVectorBuckets;\n  getVectorBucket = getVectorBucket;\n  deleteVectorBucket = deleteVectorBucket;\n  putVectorBucketPolicy = putVectorBucketPolicy;\n  getVectorBucketPolicy = getVectorBucketPolicy;\n  deleteVectorBucketPolicy = deleteVectorBucketPolicy;\n  createIndex = createIndex;\n  deleteIndex = deleteIndex;\n  getIndex = getIndex;\n  listIndexes = listIndexes;\n\n  putVectors = putVectors;\n  listVectors = listVectors;\n  getVectors = getVectors;\n  deleteVectors = deleteVectors;\n  queryVectors = queryVectors;\n\n  protected async fetchVectors<Data>(\n    method: Method,\n    path: string,\n    query: Record<string, any>,\n    headers: Headers,\n    body?: Object | File | Blob | NodeJS.ReadableStream,\n    opts?: {\n      bucket?: string;\n      accountId?: string;\n    }\n  ): Promise<TosResponse<Data>> {\n    if (opts?.bucket !== undefined) {\n      isValidVectorBucketName(opts?.bucket);\n    }\n    if (opts?.accountId !== undefined) {\n      isValidAccountId(opts?.accountId);\n    }\n\n    return this.fetch(method, path, query, headers, body, {\n      serviceName: this.serviceName,\n      subdomainBucket: opts?.accountId\n        ? `${opts?.bucket}-${opts?.accountId}`\n        : undefined,\n    });\n  }\n}\n","import axios from 'axios';\nimport { TosServerError, TosServerCode } from './TosServerError';\nimport { TosClientError } from './TosClientError';\nimport { isCancelError as isCancel } from './utils';\nimport { UploadEventType } from './methods/object/multipart/uploadFile';\nimport {\n  ACLType,\n  StorageClassType,\n  MetadataDirectiveType,\n  AzRedundancyType,\n  PermissionType,\n  GranteeType,\n  CannedType,\n  HttpMethodType,\n  LifecycleStatusType,\n  StatusType,\n  RedirectType,\n  StorageClassInheritDirectiveType,\n  TierType,\n  VersioningStatusType,\n  ReplicationStatusType,\n  AccessPointStatusType,\n  TransferAccelerationStatusType,\n  MRAPMirrorBackRedirectPolicyType,\n  WorkflowExecutionStateType,\n  FileUncompressPrefixReplaced,\n  FileCompressFlatten,\n  AccessPointStatus,\n  AcceleratorPrefetchJobStatus,\n  AuditJobStateType,\n  AuditScanType,\n  AuditType,\n  CallbackTriggerModeType,\n  FreezeModeType,\n  TemplateTagType,\n  AudioContainerFormatType,\n  SampleFormatType,\n  DataType,\n  DistanceMetricType,\n} from './TosExportEnum';\nimport { CancelError } from './CancelError';\nimport { ResumableCopyEventType } from './methods/object/multipart/resumableCopyObject';\nimport { DownloadEventType } from './methods/object/downloadFile';\nimport { DataTransferType } from './interface';\nimport { ShareLinkClient } from './ShareLinkClient';\nimport { InnerClient } from './InnerClient';\nimport { createDefaultRateLimiter } from './universal/rate-limiter';\n\nconst CancelToken = axios.CancelToken;\n// for export\nclass TosClient extends InnerClient {\n  // for umd bundle\n  static TosServerError = TosServerError;\n  static isCancel = isCancel;\n  static CancelError = CancelError;\n  static TosServerCode = TosServerCode;\n  static TosClientError = TosClientError;\n  static CancelToken = CancelToken;\n  static ACLType = ACLType;\n  static StorageClassType = StorageClassType;\n  static MetadataDirectiveType = MetadataDirectiveType;\n  static AzRedundancyType = AzRedundancyType;\n  static PermissionType = PermissionType;\n  static GranteeType = GranteeType;\n  static CannedType = CannedType;\n  static HttpMethodType = HttpMethodType;\n  static LifecycleStatusType = LifecycleStatusType;\n  static StatusType = StatusType;\n  static RedirectType = RedirectType;\n  static StorageClassInheritDirectiveType = StorageClassInheritDirectiveType;\n  static TierType = TierType;\n  /** @private unstable */\n  static FileUncompressPrefixReplaced = FileUncompressPrefixReplaced;\n  /** @private unstable */\n  static FileCompressFlatten = FileCompressFlatten;\n  static VersioningStatusType = VersioningStatusType;\n  static createDefaultRateLimiter = createDefaultRateLimiter;\n  static DataTransferType = DataTransferType;\n  static UploadEventType = UploadEventType;\n  static DownloadEventType = DownloadEventType;\n  static ResumableCopyEventType = ResumableCopyEventType;\n  static ReplicationStatusType = ReplicationStatusType;\n  /** @private unstable */\n  static AccessPointStatusType = AccessPointStatusType;\n  /** @private unstable */\n  static AccessPointStatus = AccessPointStatus;\n  /** @private unstable */\n  static AcceleratorPrefetchJobStatus = AcceleratorPrefetchJobStatus;\n  /** @private unstable */\n  static TransferAccelerationStatusType = TransferAccelerationStatusType;\n  /** @private unstable */\n  static MRAPMirrorBackRedirectPolicyType = MRAPMirrorBackRedirectPolicyType;\n  /** @private unstable */\n  static WorkflowExecutionStateType = WorkflowExecutionStateType;\n  /** @private unstable */\n  static ShareLinkClient = ShareLinkClient;\n  /** @private unstable */\n  static AuditJobStateType = AuditJobStateType;\n  /** @private unstable */\n  static AuditScanType = AuditScanType;\n  /** @private unstable */\n  static AuditType = AuditType;\n  /** @private unstable */\n  static CallbackTriggerModeType = CallbackTriggerModeType;\n  /** @private unstable */\n  static FreezeModeType = FreezeModeType;\n  /** @private unstable */\n  static TemplateTagType = TemplateTagType;\n  /** @private unstable */\n  static AudioContainerFormatType = AudioContainerFormatType;\n  /** @private unstable */\n  static SampleFormatType = SampleFormatType;\n}\n\nexport default TosClient;\n\nexport { TosClient as TOS, TosClient };\nexport {\n  TosServerError,\n  TosClientError,\n  isCancel,\n  CancelError,\n  TosServerCode,\n  CancelToken,\n  ACLType,\n  StorageClassType,\n  MetadataDirectiveType,\n  AzRedundancyType,\n  PermissionType,\n  GranteeType,\n  CannedType,\n  HttpMethodType,\n  LifecycleStatusType,\n  RedirectType,\n  StatusType,\n  StorageClassInheritDirectiveType,\n  TierType,\n  VersioningStatusType,\n  createDefaultRateLimiter,\n  DataTransferType,\n  UploadEventType,\n  DownloadEventType,\n  ResumableCopyEventType,\n  ReplicationStatusType,\n  AccessPointStatusType,\n  AccessPointStatus,\n  AcceleratorPrefetchJobStatus,\n  TransferAccelerationStatusType,\n  ShareLinkClient,\n  MRAPMirrorBackRedirectPolicyType,\n  WorkflowExecutionStateType,\n  FileUncompressPrefixReplaced,\n  FileCompressFlatten,\n  AuditJobStateType,\n  AuditScanType,\n  AuditType,\n  CallbackTriggerModeType,\n  FreezeModeType,\n  TemplateTagType,\n  AudioContainerFormatType,\n  SampleFormatType,\n  DataType,\n  DistanceMetricType,\n};\n\nexport { TosVectorsClient } from './TosVectorsClient';\n\n// TODO: hack for umd\nif (\n  process.env.TARGET_ENVIRONMENT === 'browser' &&\n  process.env.BUILD_FORMAT === 'umd'\n) {\n  // @ts-ignore\n  if (typeof window !== 'undefined') {\n    // @ts-ignore\n    window.TOS = TosClient;\n    // @ts-ignore\n    window.TosClient = TosClient;\n  }\n  if (typeof global !== 'undefined') {\n    // @ts-ignore\n    global.TOS = TosClient;\n    // @ts-ignore\n    global.TosClient = TosClient;\n  }\n  if (typeof globalThis !== 'undefined') {\n    // @ts-ignore\n    globalThis.TOS = TosClient;\n    // @ts-ignore\n    globalThis.TosClient = TosClient;\n  }\n}\n"],"names":["TosServerError","Error","constructor","response","data","Message","code","statusCode","headers","requestId","id2","ec","Object","setPrototypeOf","prototype","Code","status","RequestId","EC","TosServerCode","TosClientError","message","CancelError","createWriteStream","fs","createReadStream","rename","promisify","stat","writeFile","rm","unlink","readFile","safeMkdirRecursive","dirName","fsPromises","access","e","mkdir","recursive","TOS","createDebug","makeArrayProp","obj","key","value","get","Array","isArray","set","makeConvertProp","convertMethod","finalMethod","target","map","it","ret","keys","reduce","acc","nextKey","covertCamelCase2Kebab","camelCase","replace","toLowerCase","convertNormalCamelCase2Upper","normalCamelCase","toUpperCase","slice","getSortedQueryString","query","searchParts","sort","forEach","push","encodeURIComponent","join","normalizeHeadersKey","headers1","headers2","headers3","newKey","encodeHeadersValue","header2","entries","match","ch","length","charCodeAt","getEndpoint","region","normalizeProxy","proxy","url","needProxyParams","process","safeAwait","p","v","err","safeSync","func","isBlob","Blob","isBuffer","Buffer","isReadable","Readable","obj2QueryStr","vStr","isCancelError","DEFAULT_PART_SIZE","getGMTDateStr","toUTCString","gmtDateOrStr","requestHeadersMap","projectName","encodingType","cacheControl","contentDisposition","contentLength","contentMD5","contentSHA256","contentEncoding","contentLanguage","contentType","expires","range","ifMatch","ifModifiedSince","ifNoneMatch","ifUnmodifiedSince","acl","grantFullControl","grantRead","grantReadAcp","grantWrite","grantWriteAcp","serverSideEncryption","serverSideDataEncryption","ssecAlgorithm","ssecKey","ssecKeyMD5","copySourceRange","copySourceIfMatch","copySourceIfModifiedSince","copySourceIfNoneMatch","copySourceIfUnmodifiedSince","copySourceSSECAlgorithm","copySourceSSECKey","copySourceSSECKeyMD5","metadataDirective","meta","prev","websiteRedirectLocation","storageClass","azRedundancy","trafficLimit","callback","callbackVar","allowSameActionOverlap","String","symLinkTargetKey","symLinkTargetBucket","forbidOverwrite","bucketType","recursiveMkdir","tagging","requestQueryMap","versionId","saveBucket","saveObject","responseCacheControl","responseContentDisposition","responseContentEncoding","responseContentLanguage","responseContentType","responseExpires","fillRequestHeaders","setOneHeader","k","confV","oriValue","oriValueStr","newValue","fillRequestQuery","setOneKey","paramsSerializer","params","qs","stringify","getNormalDataFromError","streamToBuf","stream","buf","from","Promise","resolve","reject","on","concat","checkCRC64WithHeaders","crc","serverCRC64","crcStr","getCrc64","bindStreamErrorHandler","prefix","log","HttpHeader","makeSerialAsyncTask","makeTask","lastTask","then","safeParseCheckpointFile","filePath","JSON","parse","fsp","console","warn","undefined","makeRetryStreamAutoClose","makeStream","lastStream","makeRetryStream","tryDestroy","getLastStream","make","destroy","destroyed","pipeStreamWithErrorHandle","src","dest","label","pipe","isValidBucketName","bucket","isCustomDomain","test","isValidVectorBucketName","isValidAccountId","accountId","createMultipartUpload","input","normalizeObjectInput","setObjectContentTypeHeader","_fetchObject","uploads","MIN_PART_SIZE_EXCEPT_LAST_ONE","MAX_PART_NUMBER","calculateSafePartSize","totalSize","expectPartSize","showWarning","partSize","minSize","Math","ceil","listParts","uploadId","nextQuery","arrayProp","mimeTypes","abw","ai","aif","aifc","aiff","alc","amr","anx","apk","appcache","art","asc","asf","aso","asx","atom","atomcat","atomsrv","au","avi","awb","axa","axv","b","bak","bat","bcpio","bib","bin","bmp","boo","book","brf","bsd","c","c3d","cab","cac","cache","cap","cascii","cat","cbin","cbr","cbz","cc","cda","cdf","cdr","cdt","cdx","cdy","cef","cer","chm","chrt","cif","class","cls","cmdf","cml","cod","com","cpa","cpio","cpp","cpt","cr2","crl","crt","crw","csd","csf","csh","csm","csml","css","csv","ctab","ctx","cu","cub","cxf","cxx","d","davmount","dcm","dcr","ddeb","dif","diff","dir","djv","djvu","dl","dll","dmg","dms","doc","docm","docx","dot","dotm","dotx","dv","dvi","dx","dxr","emb","embl","eml","eot","eps","eps2","eps3","epsf","epsi","erf","es","etx","exe","ez","fb","fbdoc","fch","fchk","fig","flac","fli","flv","fm","frame","frm","gal","gam","gamin","gan","gau","gcd","gcf","gcg","gen","gf","gif","gjc","gjf","gl","gnumeric","gpt","gsf","gsm","gtar","gz","h","hdf","hh","hin","hpp","hqx","hs","hta","htc","htm","html","hwp","hxx","ica","ice","ico","ics","icz","ief","iges","igs","iii","info","inp","ins","iso","isp","ist","istr","jad","jam","jar","java","jdx","jmz","jng","jnlp","jp2","jpe","jpeg","jpf","jpg","jpg2","jpm","jpx","js","json","kar","kil","kin","kml","kmz","kpr","kpt","ksp","kwd","kwt","latex","lha","lhs","lin","lsf","lsx","ltx","ly","lyx","lzh","lzx","m3g","m3u","m3u8","m4a","maker","man","mbox","mcif","mcm","mdb","me","mesh","mid","midi","mif","mkv","mm","mmd","mmf","mml","mmod","mng","moc","mol","mol2","moo","mop","mopcrt","mov","movie","mp2","mp3","mp4","mpc","mpe","mpeg","mpega","mpg","mpga","mph","mpv","ms","msh","msi","mvb","mxf","mxu","nb","nbp","nc","nef","nwc","o","oda","odb","odc","odf","odg","odi","odm","odp","ods","odt","oga","ogg","ogv","ogx","old","one","onepkg","onetmp","onetoc2","opf","opus","orc","orf","otf","otg","oth","otp","ots","ott","oza","p7r","pac","pas","pat","patch","pbm","pcap","pcf","pcx","pdb","pdf","pfa","pfb","pfr","pgm","pgn","pgp","php","php3","php3p","php4","php5","phps","pht","phtml","pk","pl","pls","pm","png","pnm","pot","potm","potx","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","prf","prt","ps","psd","py","pyc","pyo","qgs","qt","qtl","ra","ram","rar","ras","rb","rd","rdf","rdp","rgb","rhtml","roff","ros","rpm","rss","rtf","rtx","rxn","scala","sce","sci","sco","scr","sct","sd","sd2","sda","sdc","sdd","sds","sdw","ser","sfd","sfv","sgf","sgl","sh","shar","shp","shtml","shx","sid","sig","sik","silo","sis","sisx","sit","sitx","skd","skm","skp","skt","sldm","sldx","smi","smil","snd","spc","spl","spx","sql","srt","stc","std","sti","stw","sty","sv4cpio","sv4crc","svg","svgz","sw","swf","swfl","sxc","sxd","sxg","sxi","sxm","sxw","t","tar","taz","tcl","tex","texi","texinfo","text","tgf","tgz","thmx","tif","tiff","tk","tm","torrent","tr","ts","tsp","tsv","ttf","ttl","txt","uls","ustar","val","vcard","vcd","vcf","vcs","vmd","vms","vrm","vrml","vsd","vss","vst","vsw","wad","wasm","wav","wax","wbmp","wbxml","webm","wk","wm","wma","wmd","wml","wmlc","wmls","wmlsc","wmv","wmx","wmz","woff","wp5","wpd","wrl","wsc","wvx","wz","x3d","x3db","x3dv","xbm","xcf","xcos","xht","xhtml","xlam","xlb","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xml","xpi","xpm","xsd","xsl","xslt","xspf","xtel","xul","xwd","xyz","xz","zip","webp","createReadNCbTransformer","readCb","Transform","transform","chunk","_encoding","chunkSize","createReadNReadStream","readCbTransformer","CRC","reset","updateBlob","update","crc64","crcModule","nodejsCRC","combineCrc64","minRate","minCapacity","createDefaultRateLimiter","capacity","rate","realCapacity","max","realRate","currentAmount","lastConsumeTime","Date","now","Acquire","want","increment","floor","timeToWaitSec","ok","timeToWait","createRateLimiterTransform","rateLimiter","finished","wait","error","createRateLimiterStream","pipeRateLimit","milliseconds","r","setTimeout","moduleNode","Buffer2Stream","lastPos","_read","n","actualN","min","createReadCbTransformer","createCrcReadStream","TosHeader","RestoreOngoingRequestTrueStr","getObjectInputKey","DEFAULT_CONTENT_TYPE","lookupMimeType","lastDotIndex","lastIndexOf","extName","validateObjectName","getSize","body","size","getEmitReadBodyConfig","dataTransferCallback","newBody","getDefaultRet","bodyBuf","isValidRateLimiter","oriMakeRetryStream","getCRCBodyConfig","beforeRetry","enableCRC","getNewBodyConfig","config1","config2","getCopySourceHeaderValue","srcBucket","srcKey","Function","validateCheckpoint","cp","getRestoreInfoFromHeaders","headerStoreValue","HeaderRestore","ExpiryDate","split","OngoingRequest","trim","restoreInfo","RestoreStatus","RestoreParam","ExpiryDays","HeaderRestoreExpiryDays","Number","RequestDate","HeaderRestoreRequestDate","Tier","HeaderRestoreTier","DataTransferType","retryNamespace","retrySignatureNamespace","isNetworkError","Boolean","isCanRetryStatusCode","makeAxiosInst","maxRetryCount","axiosInst","axios","create","defaults","auth","responseType","withCredentials","maxContentLength","maxBodyLength","maxRedirects","validateStatus","decompress","transitional","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","ensureHeaders","header","interceptors","use","handleResponseHeader","decodedValue","decodeURI","sArr","valueArr","decodedValueArr","i","j","encodedCh","res","isAxiosError","config","retryConfig","retryCount","newData","canRetryData","canRetry","retrySignature","signOpt","sigInst","signatureHeaders","signatureHeader","nextConfig","getEnc","coding","cryptoEncUtf8","cryptoEncBase64","cryptoEncHex","decode","decoding","toString","hashMd5","cryptoHashMd5","digest","hmacSha256","crypto","createHmac","hashSha256","createHash","str","encoding","cryptoNode","_uploadPart","partNumber","enableContentMD5","toFixed","newStream","allContent","md5","totalSizeValid","dataTransferStatusChange","progress","consumedBytes","triggerDataTransfer","type","rwOnceBytes","totalBytes","progressValue","Succeed","bodyConfig","Rw","opts","Started","task","handleResponse","ETag","etag","serverSideEncryptionKeyId","hashCrc64ecma","axiosOpts","onUploadProgress","event","loaded","Failed","uploadPart","call","uploadPartFromFile","stats","start","offset","end","completeMultipartUpload","result","VersionID","Bucket","Location","HashCrc64ecma","Key","CallbackResult","completeAll","parts","Parts","eTag","PartNumber","EmptyReadStream","UploadEventType","CHECKPOINT_FILE_NAME_PLACEHOLDER","FILE_PARAM_CHECK_MSG","ABORT_ERROR_STATUS_CODE","uploadFile","cancelToken","isCancel","reason","checkpoint","fileStats","file","fileSize","checkpointRichInfo","checkpointStat","_err","isDirectory","endsWith","path","dirPath","dirname","filePathIsPlaceholder","record","file_info","last_modified","file_size","mtimeMs","part_size","tasks","allTasks","getAllTasks","initConsumedBytes","parts_info","filter","is_completed","consumedBytesForProgress","recordedTasks","recordedTaskMap","Map","part_number","getCheckpointContent","checkpointContent","upload_id","triggerUploadEvent","uploadEventChange","checkpointFile","TriggerProgressEventType","triggerProgressEvent","percent","uploadPartSucceed","writeCheckpointFile","content","rmCheckpointFile","catch","updateAfterUploadPart","uploadPartRes","existRecordTask","hash_crc64ecma","uploadPartInfo","UploadPartFailed","includes","UploadPartAborted","UploadPartSucceed","uploadedPartSet","Set","has","multipartRes","UploadId","getDefaultCheckpointFilePath","CreateMultipartUploadSucceed","CreateMultipartUploadFailed","handleTasks","firstErr","isCancelOrFirstError","index","all","taskNum","consumedBytesThisTask","curTask","curErr","currentIndex","getMakeRetryStream","getBody","CompleteMultipartUploadFailed","CompleteMultipartUploadSucceed","completeMultipartUploadSucceed","combineCRCInParts","currPartSize","originPath","normalizePath","sortedPartsInfo","a","part","ACLType","StorageClassType","MetadataDirectiveType","AzRedundancyType","PermissionType","GranteeType","CannedType","HttpMethodType","StorageClassInheritDirectiveType","ReplicationStatusType","LifecycleStatusType","RedirectType","StatusType","TierType","VersioningStatusType","AccessPointStatusType","TransferAccelerationStatusType","MRAPMirrorBackRedirectPolicyType","WorkflowExecutionStateType","FileCompressFlatten","FileUncompressPrefixReplaced","AccessPointStatus","AcceleratorPrefetchJobStatus","AuditJobStateType","AuditScanType","AuditType","CallbackTriggerModeType","FreezeModeType","TemplateTagType","AudioContainerFormatType","ContainerFormatType","SampleFormatType","DataType","DistanceMetricType","headObject","normalizedInput","ReplicationStatus","HeaderReplicationStatus","RestoreInfo","uploadPartCopy","copySource","srcVersionID","copySourceRangeStart","copySourceRangeEnd","copyRange","SSECAlgorithm","SSECKeyMD5","copyObject","ResumableCopyEventType","resumableCopyObject","objectStats","srcVersionId","objectSize","copy_source_object_info","object_size","copy_source_range_end","copy_source_range_start","copyEventListener","rangeStart","rangeEnd","copyPartInfo","UploadPartCopyFailed","UploadPartCopyAborted","UploadPartCopySucceed","cloneDeep","sourceCRC64","actualCrc64","handleEmptyObj","secure","endpoint","getObject","NODEJS_DATATYPE","checkSupportDataType","dataType","environment","supportDataTypes","getObjectV2","onDownloadProgress","total","resHeaders","actualRes","lastModified","getObjectToFile","getObjectRes","fsWriteStream","DownloadEventType","downloadFile","enableSparseFile","writeStreamHighWaterMark","headObjectRes","symlinkTargetSize","object_info","filePathStats","tempFilePath","isExist","range_end","range_start","nextEnsureCloseFd","version_id","file_path","temp_file_path","triggerDownloadEvent","downloadEventChange","downloadPartSucceed","updateAfterDownloadPart","downloadPartRes","rangeHashCrc64ecma","downloadPartInfo","DownloadPartFailed","DownloadPartAborted","DownloadPartSucceed","flag","platform","execFile","require","_stdout","stderr","CreateTempFileFailed","CreateTempFileSucceed","dataStream","crcInst","writeStream","flags","highWaterMark","isErr","handleOnceCancel","unpipe","off","customRenameFileAfterDownloadCompleted","RenameTempFileFailed","RenameTempFileSucceed","renameTempFileSucceed","SIG_QUERY","algorithm","expiration","signame","signature","v4_algorithm","v4_credential","v4_date","v4_expires","v4_signedHeaders","v4_security_token","v4_signature","v4_content_sha","v4_policy","isDefaultPort","port","v4Identifier","SignersV4","opt","credentials","options","expiredAt","datatime","datetime","credString","credentialString","GetAccessKey","signedHeaders","authorization","getDateTime","host","endpoints","hexEncodedBodyHash","securityToken","startsWith","getEncodePath","sign","gnrCopySig","getSignature","getSignatureQuery","getSignaturePolicyQuery","policy","signingKey","getSigningKey","substr","stringToSign","date","toISOString","createScope","serviceName","kDate","GetSecretKey","kRegion","kService","canonicalString","canonicalStringPolicy","hexEncodedHash","string","method","canonicalHeaders","needSignHeaders","getNeedSignedHeaders","canonicalHeaderValues","values","encodeAll","tmpPath","ISigV4Credentials","secretAccessKey","accessKeyId","TosAgent","tosOpts","agentOpts","Agent","isHttps","https","http","agent","keepAlive","rejectUnauthorized","enableVerifySSL","timeout","idleConnectionTime","maxFreeSockets","Infinity","maxTotalSockets","maxConnections","oriCreateConnection","createConnection","args","socket","isTimeout","isConnected","connectTimer","nextTick","connectionTimeout","clearTimeout","TOSBase","_opts","userAgent","httpAgent","httpsAgent","getObjectPath","actualBucket","actualKey","mimeType","autoRecognizeContentType","normalizeOpts","isProxy","proxyHost","getUserAgent","trimKeys","mustKeys","mustKeysErrorStr","S3_REGION_LIST","_default","defaultValue","requestTimeout","requestAdapter","getAdapter","language","sdkVersion","version","osType","oriType","os","aliasType","Linux","Darwin","Windows_NT","nodeVersion","stdStr","arch","moreStr","userAgentProductName","userAgentSoftName","userAgentSoftVersion","customStr","userAgentCustomizedKeyValues","productSoftStr","fetch","needMd5","md5String","newPath","subdomainBucket","forcePathStyle","signv4","stsToken","accessKeySecret","reqHeaders","reqOpts","baseURL","normalizedProxy","proxyPort","protocol","logReqOpts","adapter","err2","fetchBucket","subdomain","normalizeBucketInput","listObjects","listObjectVersions","versions","DefaultListMaxKeys","listObjectsType2","listOnlyOnce","output","maxKeys","listObjectsType2Once","KeyCount","IsTruncated","NextContinuationToken","Contents","CommonPrefixes","continuationToken","ShareLinkClient","modifyAxiosInst","request","parsedPolicyUrlVal","origin","addQueryStr","search","shareLinkClientOpts","initParsedPolicyUrlVal","reg","matched","policyUrl","listBuckets","createBucket","deleteBucket","headBucket","ProjectName","HeaderProjectName","doesBucketExist","putBucketStorageClass","getBucketInfo","bucketInfo","putBucketAcl","aclBody","getBucketAcl","putBucketHttpsConfig","TLS","httpsConfig","getBucketHttpsConfig","putObject","_putObject","putObjectFromFile","normalizedHeaders","fetchObject","URL","IgnoreSameKey","ignoreSameKey","ContentMD5","putFetchTask","fetchTask","getFetchTask","taskId","Task","Meta","UserMeta","getPreSignedUrl","alternativeEndpoint","newHost","signingPath","encodedKey","objectKeyPath","setOneQuery","_key","kebabKey","queryStr","doesObjectExist","deleteObject","skipTrash","renameObject","name","deleteMultiObjects","Quiet","quiet","Objects","objects","VersionId","delete","getObjectAcl","putObjectAcl","abortMultipartUpload","listMultipartUploads","appendObject","preHashCrc64ecma","append","nextAppendOffset","appendObjectCrc","setObjectMeta","metadata","calculatePostSignature","expiresIn","fields","conditions","expirationDateStr","getDateTimeStr","valueOf","dateStr","date8Str","substring","service","requestStr","credential","addedInForm","policyStr","policyBase64","dateTime","defaultEmptyMethodMap","getBucketCustomDomain","getBucketIntelligenttiering","getBucketInventory","listBucketInventory","getBucketMirrorBack","getBucketNotification","getBucketPolicy","getBucketRealTimeLog","getBucketReplication","getBucketTagging","getBucketWebsite","handleEmptyServerError","enableCatchEmptyServerError","methodKey","defaultResponse","putBucketPolicy","enableOptimizeMethodBehavior","Statement","deleteBucketPolicy","Condition","key2","Version","getBucketVersioning","versioning","putBucketVersioning","Status","preSignedPolicyURL","normalizeInput","validateConditions","getSignedURLForList","additionalQuery","str2","q","getSignedURLForGetOrHead","keyPath","signedQuery","defaultExpires","normalizedConditions","operator","getBucketLocation","location","getBucketCORS","cors","CORSRules","putBucketCORS","deleteBucketCORS","putBucketLifecycle","rules","deleteBucketLifecycle","lifecycle","Rules","getBucketLifecycle","AllowSameActionOverlap","putBucketEncryption","rule","encryption","Rule","getBucketEncryption","deleteBucketEncryption","CommonQueryKey","putBucketMirrorBack","deleteBucketMirrorBack","putObjectTagging","tagSet","TagSet","getObjectTagging","deleteObjectTagging","putBucketReplication","role","deleteBucketReplication","Role","ruleId","putBucketWebsite","otherProps","RoutingRules","deleteBucketWebsite","putBucketNotification","CloudFunctionConfigurations","RocketMQConfigurations","putBucketCustomDomain","CustomDomainRules","deleteBucketCustomDomain","customDomain","customdomain","putBucketRealTimeLog","deleteBucketRealTimeLog","ScheduleFrequency","IncludedObjectVersions","InventoryOptionalFields","req","inventory","id","InventoryConfigurations","deleteBucketInventory","putBucketInventory","inventoryConfiguration","Id","createJob","listJobs","maxResults","others","updateJobPriority","jobId","JobId","priority","updateJobStatus","requestedJobStatus","statusUpdateReason","deleteJob","describeJob","putBucketTagging","Tags","deleteBucketTagging","putBucketPayByTraffic","payByTraffic","getBucketPayByTraffic","getImageStyleBriefInfo","imageStyleBriefInfo","BucketName","ImageStyleBriefInfo","getBucketImageStyleList","imageStyle","ImageStyles","getBucketImageStyleListByName","styleName","imageStyleContent","getBucketImageStyle","putBucketImageStyle","styleObjectPrefix","Content","deleteBucketImageStyle","putBucketImageProtect","originalImageProtect","getBucketImageProtect","putBucketImageStyleSeparator","Separator","SeparatorSuffix","imageStyleSeparator","getBucketImageStyleSeparator","intelligenttiering","putBucketRename","getBucketRename","deleteBucketRename","restoreObject","restore","listStorageLens","deleteStorageLens","getStorageLens","putStorageLens","rest","putBucketNotificationType2","getBucketNotificationType2","putSymlink","_putSymlink","symlink","getSymlink","_getSymlink","SymlinkTargetKey","SymlinkTargetBucket","LastModified","putBucketTransferAcceleration","getBucketTransferAcceleration","getStatus","TransferAccelerationConfiguration","Enabled","Terminated","putBucketAccessMonitor","accessmonitor","getBucketAccessMonitor","StringOp","DateOp","IpOp","QuotaType","getQosPolicy","putQosPolicy","restParams","deleteQosPolicy","createMultiRegionAccessPoint","regions","Name","Regions","getMultiRegionAccessPoint","listMultiRegionAccessPoints","getMultiRegionAccessPointRoutes","alias","deleteMultiRegionAccessPoint","submitMultiRegionAccessPointRoutes","routes","Routes","bindAcceleratorWithMultiRegionAccessPoint","AccountId","MultiRegionAccessPointAlias","AcceleratorId","unbindAcceleratorWithMultiRegionAccessPoint","listBindAccessPointForMultiRegionAccelerator","createAccessPoint","BucketAccountId","NetworkOrigin","VpcId","getAccessPoint","listAccessPoints","deleteAccessPoint","bindAcceleratorWithAccessPoint","AcceleratorAccountId","AccessPointName","unbindAcceleratorWithAccessPoint","listBindAccessPointForAccelerator","restQuery","putAccelerator","Accelerator","getAccelerator","listAccelerators","deleteAccelerator","listAcceleratorAzs","putAcceleratorPrefetchJob","acceleratorId","getAcceleratorPrefetchJob","deleteAcceleratorPrefetchJob","listAcceleratorPrefetchJobs","listAcceleratorPrefetchJobRecords","getAcceleratorCapacityQuota","Az","az","listBindAcceleratorForAccessPoint","putMultiRegionAccessPointMirrorBack","deleteMultiRegionAccessPointMirrorBack","getMultiRegionAccessPointMirrorBack","putBucketPrivateM3U8","enable","privateM3U8","Enable","getBucketPrivateM3U8","putBucketBlindWatermark","blindWatermark","getBucketBlindWatermark","putBucketTrash","getBucketTrash","putBucketObjectLockConfiguration","objectLockEnabled","ObjectLockEnabled","getBucketObjectLockConfiguration","putObjectRetention","mode","retainUntilDate","retention","Mode","RetainUntilDate","getObjectRetention","putBucketCdnNotification","deleteBucketCdnNotification","cdn_notification","getBucketCdnNotification","putBucketWorkflow","deleteBucketWorkflow","workflow","getBucketWorkflow","getBucketWorkflowExecution","executionId","workflow_execution","listBucketWorkflowExecution","workflowId","startTime","endTime","states","orderByTime","pageSize","pageToken","Items","createFileCompress","Input","FileCompressConfig","Output","file_jobs","job_type","createFileUncompress","FileUncompressConfig","getBucketLogging","logging","putBucketLogging","LoggingEnabled","TargetBucket","targetBucket","TargetPrefix","targetPrefix","deleteBucketLogging","putAccessPointPolicy","deleteAccessPointPolicy","getAccessPointPolicy","Policy","putMultiRegionAccessPointPolicy","deleteMultiRegionAccessPointPolicy","getMultiRegionAccessPointPolicy","getBucketAudit","audit","putBucketAudit","action","listBucketAuditJob","getBucketAuditJob","job_id","postBucketAuditJob","job","audit_jobs","listBucketAuditBizType","audit_type","audits","postBucketIncrementAudit","increment_audit","AuditConfiguration","listBucketIncrementAudits","audiType","increment_audits","getBucketIncrementAudit","rule_id","deleteBucketIncrementAudit","listBucketJob","jobType","getBucketJob","createBucketAudioConvert","AudioConvertConfig","media_jobs","getObjectAITag","putBucketRequestPayment","getBucketRequestPayment","filterUndefined","fromEntries","_","DatasetTemplateId","createDataset","getDataset","datasetname","deleteDataset","listDataset","STOCK_STATE","createDatasetBinding","deleteDatasetBinding","getDatasetBinding","listDatasetBindings","Operator","AGGREGATION_OPERATION","datasetSimpleQuery","SEMANTIC_QUERY_TYPE","datasetSemanticQuery","putBucketDataProcessTemplate","tag","audioConvertConfig","process_template","Tag","listBucketDataProcessTemplates","getBucketDataProcessTemplate","deleteBucketDataProcessTemplate","putAudioConvertTemplate","ID","getAudioConvertTemplate","listAudioConvertTemplates","AudioConvertTemplates","deleteAudioConvertTemplate","putVideoConvertTemplate","transcodeConfig","TranscodeConfig","getVideoConvertTemplate","deleteVideoConvertTemplate","listVideoConvertTemplates","VideoConvertTemplates","createVideoConvertJob","jobInput","getVideoConvertJob","createAudioConvertJob","getAudioConvertJob","listTemplates","createBucketDataRedundancyTransition","targetRedundancyType","getBucketDataRedundancyTransition","redundancyTransitionTaskId","deleteBucketDataRedundancyTransition","listBucketDataRedundancyTransition","getBucketTransitionEstimatedRemainingTime","estimatedRemainingTime","listUserDataRedundancyTransition","putConvertWorkflow","getConvertWorkflow","deleteConvertWorkflow","putAnyPrivateAccessPoint","Subnets","SecurityGroupId","listAnyPrivateAccessPoints","listAnyPrivateAccessPointSupportAz","listAnyPrivateAccessPointEndpoints","InnerClient","preSignedPostSignature","createVectorBucket","vectorBucketName","fetchVectors","listVectorBuckets","nextToken","getVectorBucket","accountID","deleteVectorBucket","putVectorBucketPolicy","getVectorBucketPolicy","deleteVectorBucketPolicy","createIndex","dimension","distanceMetric","indexName","metadataConfiguration","deleteIndex","listIndexes","getIndex","putVectors","vectors","listVectors","returnData","returnMetadata","getVectors","deleteVectors","queryVectors","returnDistance","topK","queryVector","TosVectorsClient","CancelToken","TosClient"],"mappings":"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"}